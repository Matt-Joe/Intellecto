/*! For license information please see main.cc1d079b.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},153:(e,t,n)=>{"use strict";var i=n(43),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,s={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,i)&&!l.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===s[i]&&(s[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function v(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function _(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=_.prototype=new y;b.constructor=_,g(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,k={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,i){var r,s={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,r)&&!E.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:k.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,r,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return o=o(l=e),e=""===s?"."+I(l,0):s,w(o)?(r="",null!=e&&(r=e.replace(T,"$&/")+"/"),P(o,t,r,"",function(e){return e})):null!=o&&(S(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var u=s+I(a=e[c],c);l+=P(a,t,r,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=P(a=a.value,t,r,u=s+I(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function R(e,t,n){if(null==e)return e;var i=[],r=0;return P(e,i,"","",function(e){return t.call(n,e,r++)}),i}function N(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},O={transition:null},D={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:O,ReactCurrentOwner:k};function M(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:R,forEach:function(e,t,n){R(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return R(e,function(){t++}),t},toArray:function(e){return R(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=o,t.PureComponent=_,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D,t.act=M,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=g({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!E.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:r,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=M,t.useCallback=function(e,t){return A.current.useCallback(e,t)},t.useContext=function(e){return A.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return A.current.useDeferredValue(e)},t.useEffect=function(e,t){return A.current.useEffect(e,t)},t.useId=function(){return A.current.useId()},t.useImperativeHandle=function(e,t,n){return A.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return A.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return A.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return A.current.useMemo(e,t)},t.useReducer=function(e,t,n){return A.current.useReducer(e,t,n)},t.useRef=function(e){return A.current.useRef(e)},t.useState=function(e){return A.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return A.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return A.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,o=r>>>1;i<o;){var a=2*(i+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<r&&0>s(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[a]=n,i=a);else{if(!(c<r&&0>s(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,_="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function w(e){if(m=!1,b(e),!g)if(null!==i(c))g=!0,O(x);else{var t=i(u);null!==t&&D(w,t.startTime-e)}}function x(e,n){g=!1,m&&(m=!1,y(S),S=-1),p=!0;var s=f;try{for(b(n),d=i(c);null!==d&&(!(d.expirationTime>n)||e&&!P());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===i(c)&&r(c),b(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var h=i(u);null!==h&&D(w,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,E=!1,C=null,S=-1,T=5,I=-1;function P(){return!(t.unstable_now()-I<T)}function R(){if(null!==C){var e=t.unstable_now();I=e;var n=!0;try{n=C(!0,e)}finally{n?k():(E=!1,C=null)}}else E=!1}if("function"===typeof _)k=function(){_(R)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,A=N.port2;N.port1.onmessage=R,k=function(){A.postMessage(null)}}else k=function(){v(R,0)};function O(e){C=e,E||(E=!0,k())}function D(e,n){S=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,O(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,r,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===i(c)&&e===i(u)&&(m?(y(S),S=-1):m=!0,D(w,s-o))):(e.sortIndex=a,n(c,e),g||p||(g=!0,O(x))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{"use strict";var i=n(950);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},418:()=>{},579:(e,t,n)=>{"use strict";e.exports=n(153)},730:(e,t,n)=>{"use strict";var i=n(43),r=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,i,r,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function _(e,t,n,i){var r=m.hasOwnProperty(t)?m[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function M(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var L,j=Object.assign;function F(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function V(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=i.stack.split("\n"),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||r[o]!==s[a]){var l="\n"+r[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case x:return"Portal";case C:return"Profiler";case E:return"StrictMode";case P:return"Suspense";case R:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=q(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return j({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function J(e,t){X(e,t);var n=H(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return j({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),i=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=ge(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=j({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,ke=null,Ee=null;function Ce(e){if(e=_r(e)){if("function"!==typeof xe)throw Error(s(280));var t=e.stateNode;t&&(t=wr(t),xe(e.stateNode,e.type,t))}}function Se(e){ke?Ee?Ee.push(e):Ee=[e]:ke=e}function Te(){if(ke){var e=ke,t=Ee;if(Ee=ke=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ie(e,t){return e(t)}function Pe(){}var Re=!1;function Ne(e,t,n){if(Re)return e(t,n);Re=!0;try{return Ie(e,t,n)}finally{Re=!1,(null!==ke||null!==Ee)&&(Pe(),Te())}}function Ae(e,t){var n=e.stateNode;if(null===n)return null;var i=wr(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(u)try{var De={};Object.defineProperty(De,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(ue){Oe=!1}function Me(e,t,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,je=null,Fe=!1,Ue=null,Ve={onError:function(e){Le=!0,je=e}};function ze(e,t,n,i,r,s,o,a,l){Le=!1,je=null,Me.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Be(e)!==e)throw Error(s(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return He(r),e;if(o===i)return He(r),t;o=o.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=o;break}if(l===i){a=!0,i=r,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,i=r;break}if(l===i){a=!0,i=o,n=r;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=r.unstable_scheduleCallback,Ye=r.unstable_cancelCallback,Qe=r.unstable_shouldYield,$e=r.unstable_requestPaint,Xe=r.unstable_now,Je=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~r;0!==a?i=ht(a):0!==(s&=o)&&(i=ht(s))}else 0!==(o=n&~r)?i=ht(o):0!==s&&(i=ht(s));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-ot(t)),i|=e[n],t&=~r;return i}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ot(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var _t=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,kt,Et,Ct,St=!1,Tt=[],It=null,Pt=null,Rt=null,Nt=new Map,At=new Map,Ot=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Mt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Rt=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":At.delete(t.pointerId)}}function Lt(e,t,n,i,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=_r(t))&&xt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function jt(e){var t=yr(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void Ct(e.priority,function(){kt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_r(n))&&xt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);be=i,n.target.dispatchEvent(i),be=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Vt(){St=!1,null!==It&&Ft(It)&&(It=null),null!==Pt&&Ft(Pt)&&(Pt=null),null!==Rt&&Ft(Rt)&&(Rt=null),Nt.forEach(Ut),At.forEach(Ut)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var i=Tt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==It&&zt(It,e),null!==Pt&&zt(Pt,e),null!==Rt&&zt(Rt,e),Nt.forEach(t),At.forEach(t),n=0;n<Ot.length;n++)(i=Ot[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)jt(n),null===n.blockedOn&&Ot.shift()}var Wt=b.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,n,i){var r=_t,s=Wt.transition;Wt.transition=null;try{_t=1,Gt(e,t,n,i)}finally{_t=r,Wt.transition=s}}function Kt(e,t,n,i){var r=_t,s=Wt.transition;Wt.transition=null;try{_t=4,Gt(e,t,n,i)}finally{_t=r,Wt.transition=s}}function Gt(e,t,n,i){if(Ht){var r=Qt(e,t,n,i);if(null===r)Hi(e,t,i,Yt,n),Mt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return It=Lt(It,e,t,n,i,r),!0;case"dragenter":return Pt=Lt(Pt,e,t,n,i,r),!0;case"mouseover":return Rt=Lt(Rt,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return Nt.set(s,Lt(Nt.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,At.set(s,Lt(At.get(s)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Mt(e,i),4&t&&-1<Dt.indexOf(e)){for(;null!==r;){var s=_r(r);if(null!==s&&wt(s),null===(s=Qt(e,t,n,i))&&Hi(e,t,i,Yt,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else Hi(e,t,i,null,n)}}var Yt=null;function Qt(e,t,n,i){if(Yt=null,null!==(e=yr(e=we(i))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,i=n.length,r="value"in Xt?Xt.value:Xt.textContent,s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[s-t];t++);return Zt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,i,r,s){for(var o in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return j(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=j({},cn,{view:0,detail:0}),dn=sn(hn),fn=j({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),gn=sn(j({},fn,{dataTransfer:0})),mn=sn(j({},hn,{relatedTarget:0})),vn=sn(j({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=j({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=sn(yn),bn=sn(j({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function Cn(){return En}var Sn=j({},hn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(Sn),In=sn(j({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=sn(j({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Rn=sn(j({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=j({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),An=sn(Nn),On=[9,13,27,32],Dn=u&&"CompositionEvent"in window,Mn=null;u&&"documentMode"in document&&(Mn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Mn,jn=u&&(!Dn||Mn&&8<Mn&&11>=Mn),Fn=String.fromCharCode(32),Un=!1;function Vn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function qn(e,t,n,i){Se(i),0<(t=Ki(t,"onChange")).length&&(n=new un("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Yn(e){Fi(e,0)}function Qn(e){if(G(br(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Zn="function"===typeof ei.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function ti(){Kn&&(Kn.detachEvent("onpropertychange",ni),Gn=Kn=null)}function ni(e){if("value"===e.propertyName&&Qn(Gn)){var t=[];qn(t,Gn,e,we(e)),Ne(Yn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Gn=n,(Kn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Gn)}function si(e,t){if("click"===e)return Qn(t)}function oi(e,t){if("input"===e||"change"===e)return Qn(t)}var ai="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(ai(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!h.call(t,r)||!ai(e[r],t[r]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function hi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function di(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function fi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pi(e){var t=di(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hi(n.ownerDocument.documentElement,n)){if(null!==i&&fi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!e.extend&&s>i&&(r=i,i=s,s=r),r=ui(n,s);var o=ui(n,i);r&&o&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gi=u&&"documentMode"in document&&11>=document.documentMode,mi=null,vi=null,yi=null,_i=!1;function bi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_i||null==mi||mi!==Y(i)||("selectionStart"in(i=mi)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&li(yi,i)||(yi=i,0<(i=Ki(vi,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=mi)))}function wi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xi={animationend:wi("Animation","AnimationEnd"),animationiteration:wi("Animation","AnimationIteration"),animationstart:wi("Animation","AnimationStart"),transitionend:wi("Transition","TransitionEnd")},ki={},Ei={};function Ci(e){if(ki[e])return ki[e];if(!xi[e])return e;var t,n=xi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ei)return ki[e]=n[t];return e}u&&(Ei=document.createElement("div").style,"AnimationEvent"in window||(delete xi.animationend.animation,delete xi.animationiteration.animation,delete xi.animationstart.animation),"TransitionEvent"in window||delete xi.transitionend.transition);var Si=Ci("animationend"),Ti=Ci("animationiteration"),Ii=Ci("animationstart"),Pi=Ci("transitionend"),Ri=new Map,Ni="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ai(e,t){Ri.set(e,t),l(t,[e])}for(var Oi=0;Oi<Ni.length;Oi++){var Di=Ni[Oi];Ai(Di.toLowerCase(),"on"+(Di[0].toUpperCase()+Di.slice(1)))}Ai(Si,"onAnimationEnd"),Ai(Ti,"onAnimationIteration"),Ai(Ii,"onAnimationStart"),Ai("dblclick","onDoubleClick"),Ai("focusin","onFocus"),Ai("focusout","onBlur"),Ai(Pi,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Li=new Set("cancel close invalid load scroll toggle".split(" ").concat(Mi));function ji(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,o,a,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=je;Le=!1,je=null,Fe||(Fe=!0,Ue=u)}}(i,t,void 0,e),e.currentTarget=null}function Fi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;ji(r,a,c),s=l}else for(o=0;o<i.length;o++){if(l=(a=i[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;ji(r,a,c),s=l}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ui(e,t){var n=t[gr];void 0===n&&(n=t[gr]=new Set);var i=e+"__bubble";n.has(i)||(Wi(t,e,2,!1),n.add(i))}function Vi(e,t,n){var i=0;t&&(i|=4),Wi(n,e,i,t)}var zi="_reactListening"+Math.random().toString(36).slice(2);function Bi(e){if(!e[zi]){e[zi]=!0,o.forEach(function(t){"selectionchange"!==t&&(Li.has(t)||Vi(t,!1,e),Vi(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zi]||(t[zi]=!0,Vi("selectionchange",!1,t))}}function Wi(e,t,n,i){switch($t(t)){case 1:var r=qt;break;case 4:r=Kt;break;default:r=Gt}n=r.bind(null,t,n,e),r=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Hi(e,t,n,i,r){var s=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;o=o.return}for(;null!==a;){if(null===(o=yr(a)))return;if(5===(l=o.tag)||6===l){i=s=o;continue e}a=a.parentNode}}i=i.return}Ne(function(){var i=s,r=we(n),o=[];e:{var a=Ri.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Si:case Ti:case Ii:l=vn;break;case Pi:l=Rn;break;case"scroll":l=dn;break;case"wheel":l=An;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=i;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Ae(p,d))&&u.push(qi(p,g,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,r),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yr(c)&&!c[pr])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?yr(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:br(l),f=null==c?a:br(c),(a=new u(g,p+"leave",l,n,r)).target=h,a.relatedTarget=f,g=null,yr(r)===i&&((u=new u(d,p+"enter",c,n,r)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Gi(f))p++;for(f=0,g=d;g;g=Gi(g))f++;for(;0<p-f;)u=Gi(u),p--;for(;0<f-p;)d=Gi(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Gi(u),d=Gi(d)}u=null}else u=null;null!==l&&Yi(o,a,l,u,!1),null!==c&&null!==h&&Yi(o,h,c,u,!0)}if("select"===(l=(a=i?br(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=$n;else if(Hn(a))if(Xn)m=oi;else{m=ri;var v=ii}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=si);switch(m&&(m=m(e,i))?qn(o,m,n,r):(v&&v(e,a,i),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=i?br(i):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(mi=v,vi=i,yi=null);break;case"focusout":yi=vi=mi=null;break;case"mousedown":_i=!0;break;case"contextmenu":case"mouseup":case"dragend":_i=!1,bi(o,n,r);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":bi(o,n,r)}var y;if(Dn)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Bn?Vn(e,n)&&(_="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(_="onCompositionStart");_&&(jn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==_?"onCompositionEnd"===_&&Bn&&(y=en()):(Jt="value"in(Xt=r)?Xt.value:Xt.textContent,Bn=!0)),0<(v=Ki(i,_)).length&&(_=new bn(_,e,null,n,r),o.push({event:_,listeners:v}),y?_.data=y:null!==(y=zn(n))&&(_.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Dn&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return jn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Ki(i,"onBeforeInput")).length&&(r=new bn("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:i}),r.data=y))}Fi(o,t)})}function qi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ki(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Ae(e,n))&&i.unshift(qi(e,s,r)),null!=(s=Ae(e,t))&&i.push(qi(e,s,r))),e=e.return}return i}function Gi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yi(e,t,n,i,r){for(var s=t._reactName,o=[];null!==n&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==c&&(a=c,r?null!=(l=Ae(n,s))&&o.unshift(qi(n,l,a)):r||null!=(l=Ae(n,s))&&o.push(qi(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qi=/\r\n?/g,$i=/\u0000|\uFFFD/g;function Xi(e){return("string"===typeof e?e:""+e).replace(Qi,"\n").replace($i,"")}function Ji(e,t,n){if(t=Xi(t),Xi(e)!==t&&n)throw Error(s(425))}function Zi(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,or="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(e){return sr.resolve(null).then(e).catch(ar)}:ir;function ar(e){setTimeout(function(){throw e})}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Bt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Bt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hr=Math.random().toString(36).slice(2),dr="__reactFiber$"+hr,fr="__reactProps$"+hr,pr="__reactContainer$"+hr,gr="__reactEvents$"+hr,mr="__reactListeners$"+hr,vr="__reactHandles$"+hr;function yr(e){var t=e[dr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pr]||n[dr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[dr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function _r(e){return!(e=e[dr]||e[pr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function br(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wr(e){return e[fr]||null}var xr=[],kr=-1;function Er(e){return{current:e}}function Cr(e){0>kr||(e.current=xr[kr],xr[kr]=null,kr--)}function Sr(e,t){kr++,xr[kr]=e.current,e.current=t}var Tr={},Ir=Er(Tr),Pr=Er(!1),Rr=Tr;function Nr(e,t){var n=e.type.contextTypes;if(!n)return Tr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ar(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Or(){Cr(Pr),Cr(Ir)}function Dr(e,t,n){if(Ir.current!==Tr)throw Error(s(168));Sr(Ir,t),Sr(Pr,n)}function Mr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(s(108,W(e)||"Unknown",r));return j({},n,i)}function Lr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tr,Rr=Ir.current,Sr(Ir,e),Sr(Pr,Pr.current),!0}function jr(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(e=Mr(e,t,Rr),i.__reactInternalMemoizedMergedChildContext=e,Cr(Pr),Cr(Ir),Sr(Ir,e)):Cr(Pr),Sr(Pr,n)}var Fr=null,Ur=!1,Vr=!1;function zr(e){null===Fr?Fr=[e]:Fr.push(e)}function Br(){if(!Vr&&null!==Fr){Vr=!0;var e=0,t=_t;try{var n=Fr;for(_t=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Fr=null,Ur=!1}catch(r){throw null!==Fr&&(Fr=Fr.slice(e+1)),Ge(Ze,Br),r}finally{_t=t,Vr=!1}}return null}var Wr=[],Hr=0,qr=null,Kr=0,Gr=[],Yr=0,Qr=null,$r=1,Xr="";function Jr(e,t){Wr[Hr++]=Kr,Wr[Hr++]=qr,qr=e,Kr=t}function Zr(e,t,n){Gr[Yr++]=$r,Gr[Yr++]=Xr,Gr[Yr++]=Qr,Qr=e;var i=$r;e=Xr;var r=32-ot(i)-1;i&=~(1<<r),n+=1;var s=32-ot(t)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,$r=1<<32-ot(t)+r|n<<r|i,Xr=s+e}else $r=1<<s|n<<r|i,Xr=e}function es(e){null!==e.return&&(Jr(e,1),Zr(e,1,0))}function ts(e){for(;e===qr;)qr=Wr[--Hr],Wr[Hr]=null,Kr=Wr[--Hr],Wr[Hr]=null;for(;e===Qr;)Qr=Gr[--Yr],Gr[Yr]=null,Xr=Gr[--Yr],Gr[Yr]=null,$r=Gr[--Yr],Gr[Yr]=null}var ns=null,is=null,rs=!1,ss=null;function os(e,t){var n=Nc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,is=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qr?{id:$r,overflow:Xr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Nc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,is=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(rs){var t=is;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=cr(n.nextSibling);var i=ns;t&&as(e,t)?os(i,n):(e.flags=-4097&e.flags|2,rs=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,rs=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!rs)return us(e),rs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=is)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=cr(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=ns?cr(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=is;e;)e=cr(e.nextSibling)}function fs(){is=ns=null,rs=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var gs=b.ReactCurrentBatchConfig;function ms(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var r=i,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function _s(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=jc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var s=n.type;return s===k?h(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===A&&ys(s)===t.type)?((i=r(t,n.props)).ref=ms(e,t,n),i.return=e,i):((i=Dc(n.type,n.key,n.props,null,e.mode,i)).ref=ms(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,i,s){return null===t||7!==t.tag?((t=Mc(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=jc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Dc(t.type,t.key,t.props,null,e.mode,n)).ref=ms(e,null,t),n.return=e,n;case x:return(t=Fc(t,e.mode,n)).return=e,t;case A:return d(e,(0,t._init)(t._payload),n)}if(te(t)||M(t))return(t=Mc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?c(e,t,n,i):null;case x:return n.key===r?u(e,t,n,i):null;case A:return f(e,t,(r=n._init)(n._payload),i)}if(te(n)||M(n))return null!==r?null:h(e,t,n,i,null);vs(e,n)}return null}function p(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case x:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case A:return p(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||M(i))return h(t,e=e.get(n)||null,i,r,null);vs(t,i)}return null}function g(r,s,a,l){for(var c=null,u=null,h=s,g=s=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var v=f(r,h,a[g],l);if(null===v){null===h&&(h=m);break}e&&h&&null===v.alternate&&t(r,h),s=o(v,s,g),null===u?c=v:u.sibling=v,u=v,h=m}if(g===a.length)return n(r,h),rs&&Jr(r,g),c;if(null===h){for(;g<a.length;g++)null!==(h=d(r,a[g],l))&&(s=o(h,s,g),null===u?c=h:u.sibling=h,u=h);return rs&&Jr(r,g),c}for(h=i(r,h);g<a.length;g++)null!==(m=p(h,r,g,a[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=o(m,s,g),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach(function(e){return t(r,e)}),rs&&Jr(r,g),c}function m(r,a,l,c){var u=M(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,g=a,m=a=0,v=null,y=l.next();null!==g&&!y.done;m++,y=l.next()){g.index>m?(v=g,g=null):v=g.sibling;var _=f(r,g,y.value,c);if(null===_){null===g&&(g=v);break}e&&g&&null===_.alternate&&t(r,g),a=o(_,a,m),null===h?u=_:h.sibling=_,h=_,g=v}if(y.done)return n(r,g),rs&&Jr(r,m),u;if(null===g){for(;!y.done;m++,y=l.next())null!==(y=d(r,y.value,c))&&(a=o(y,a,m),null===h?u=y:h.sibling=y,h=y);return rs&&Jr(r,m),u}for(g=i(r,g);!y.done;m++,y=l.next())null!==(y=p(g,r,m,y.value,c))&&(e&&null!==y.alternate&&g.delete(null===y.key?m:y.key),a=o(y,a,m),null===h?u=y:h.sibling=y,h=y);return e&&g.forEach(function(e){return t(r,e)}),rs&&Jr(r,m),u}return function e(i,s,o,l){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===k){if(7===u.tag){n(i,u.sibling),(s=r(u,o.props.children)).return=i,i=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&ys(c)===u.type){n(i,u.sibling),(s=r(u,o.props)).ref=ms(i,u,o),s.return=i,i=s;break e}n(i,u);break}t(i,u),u=u.sibling}o.type===k?((s=Mc(o.props.children,i.mode,l,o.key)).return=i,i=s):((l=Dc(o.type,o.key,o.props,null,i.mode,l)).ref=ms(i,s,o),l.return=i,i=l)}return a(i);case x:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(i,s.sibling),(s=r(s,o.children||[])).return=i,i=s;break e}n(i,s);break}t(i,s),s=s.sibling}(s=Fc(o,i.mode,l)).return=i,i=s}return a(i);case A:return e(i,s,(u=o._init)(o._payload),l)}if(te(o))return g(i,s,o,l);if(M(o))return m(i,s,o,l);vs(i,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,o)).return=i,i=s):(n(i,s),(s=jc(o,i.mode,l)).return=i,i=s),a(i)):n(i,s)}}var bs=_s(!0),ws=_s(!1),xs=Er(null),ks=null,Es=null,Cs=null;function Ss(){Cs=Es=ks=null}function Ts(e){var t=xs.current;Cr(xs),e._currentValue=t}function Is(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Ps(e,t){ks=e,Cs=Es=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_a=!0),e.firstContext=null)}function Rs(e){var t=e._currentValue;if(Cs!==e)if(e={context:e,memoizedValue:t,next:null},null===Es){if(null===ks)throw Error(s(308));Es=e,ks.dependencies={lanes:0,firstContext:e}}else Es=Es.next=e;return t}var Ns=null;function As(e){null===Ns?Ns=[e]:Ns.push(e)}function Os(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,As(t)):(n.next=r.next,r.next=n),t.interleaved=n,Ds(e,i)}function Ds(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ms=!1;function Ls(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function js(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Us(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Il)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Ds(e,n)}return null===(r=i.interleaved)?(t.next=t,As(i)):(t.next=r.next,r.next=t),i.interleaved=t,Ds(e,n)}function Vs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}function zs(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,i){var r=e.updateQueue;Ms=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=r.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((i&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=j({},h,d);break e;case 2:Ms=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=r.effects)?r.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(d=a).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{o|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);Ll|=o,e.lanes=o,e.memoizedState=h}}function Ws(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var Hs={},qs=Er(Hs),Ks=Er(Hs),Gs=Er(Hs);function Ys(e){if(e===Hs)throw Error(s(174));return e}function Qs(e,t){switch(Sr(Gs,t),Sr(Ks,e),Sr(qs,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Cr(qs),Sr(qs,t)}function $s(){Cr(qs),Cr(Ks),Cr(Gs)}function Xs(e){Ys(Gs.current);var t=Ys(qs.current),n=le(t,e.type);t!==n&&(Sr(Ks,e),Sr(qs,n))}function Js(e){Ks.current===e&&(Cr(qs),Cr(Ks))}var Zs=Er(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var io=b.ReactCurrentDispatcher,ro=b.ReactCurrentBatchConfig,so=0,oo=null,ao=null,lo=null,co=!1,uo=!1,ho=0,fo=0;function po(){throw Error(s(321))}function go(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ai(e[n],t[n]))return!1;return!0}function mo(e,t,n,i,r,o){if(so=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,io.current=null===e||null===e.memoizedState?Zo:ea,e=n(i,r),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(s(301));o+=1,lo=ao=null,t.updateQueue=null,io.current=ta,e=n(i,r)}while(uo)}if(io.current=Jo,t=null!==ao&&null!==ao.next,so=0,lo=ao=oo=null,co=!1,t)throw Error(s(300));return e}function vo(){var e=0!==ho;return ho=0,e}function yo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===lo?oo.memoizedState=lo=e:lo=lo.next=e,lo}function _o(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===lo?oo.memoizedState:lo.next;if(null!==t)lo=t,ao=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===lo?oo.memoizedState=lo=e:lo=lo.next=e}return lo}function bo(e,t){return"function"===typeof t?t(e):t}function wo(e){var t=_o(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=ao,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,i=i.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((so&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=i):c=c.next=d,oo.lanes|=h,Ll|=h}u=u.next}while(null!==u&&u!==o);null===c?a=i:c.next=l,ai(i,t.memoizedState)||(_a=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{o=r.lane,oo.lanes|=o,Ll|=o,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xo(e){var t=_o(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{o=e(o,a.action),a=a.next}while(a!==r);ai(o,t.memoizedState)||(_a=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function ko(){}function Eo(e,t){var n=oo,i=_o(),r=t(),o=!ai(i.memoizedState,r);if(o&&(i.memoizedState=r,_a=!0),i=i.queue,Lo(To.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||null!==lo&&1&lo.memoizedState.tag){if(n.flags|=2048,No(9,So.bind(null,n,i,r,t),void 0,null),null===Pl)throw Error(s(349));0!==(30&so)||Co(n,t,r)}return r}function Co(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function So(e,t,n,i){t.value=n,t.getSnapshot=i,Io(t)&&Po(e)}function To(e,t,n){return n(function(){Io(t)&&Po(e)})}function Io(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ai(e,n)}catch(i){return!0}}function Po(e){var t=Ds(e,1);null!==t&&nc(t,e,1,-1)}function Ro(e){var t=yo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Yo.bind(null,oo,e),[t.memoizedState,e]}function No(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Ao(){return _o().memoizedState}function Oo(e,t,n,i){var r=yo();oo.flags|=e,r.memoizedState=No(1|t,n,void 0,void 0===i?null:i)}function Do(e,t,n,i){var r=_o();i=void 0===i?null:i;var s=void 0;if(null!==ao){var o=ao.memoizedState;if(s=o.destroy,null!==i&&go(i,o.deps))return void(r.memoizedState=No(t,n,s,i))}oo.flags|=e,r.memoizedState=No(1|t,n,s,i)}function Mo(e,t){return Oo(8390656,8,e,t)}function Lo(e,t){return Do(2048,8,e,t)}function jo(e,t){return Do(4,2,e,t)}function Fo(e,t){return Do(4,4,e,t)}function Uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Vo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4,4,Uo.bind(null,t,e),n)}function zo(){}function Bo(e,t){var n=_o();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&go(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Wo(e,t){var n=_o();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&go(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Ho(e,t,n){return 0===(21&so)?(e.baseState&&(e.baseState=!1,_a=!0),e.memoizedState=n):(ai(n,t)||(n=gt(),oo.lanes|=n,Ll|=n,e.baseState=!0),t)}function qo(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var i=ro.transition;ro.transition={};try{e(!1),t()}finally{_t=n,ro.transition=i}}function Ko(){return _o().memoizedState}function Go(e,t,n){var i=tc(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Qo(e))$o(t,n);else if(null!==(n=Os(e,t,n,i))){nc(n,e,i,ec()),Xo(n,t,i)}}function Yo(e,t,n){var i=tc(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qo(e))$o(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ai(a,o)){var l=t.interleaved;return null===l?(r.next=r,As(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=Os(e,t,r,i))&&(nc(n,e,i,r=ec()),Xo(n,t,i))}}function Qo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function $o(e,t){uo=co=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xo(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Jo={readContext:Rs,useCallback:po,useContext:po,useEffect:po,useImperativeHandle:po,useInsertionEffect:po,useLayoutEffect:po,useMemo:po,useReducer:po,useRef:po,useState:po,useDebugValue:po,useDeferredValue:po,useTransition:po,useMutableSource:po,useSyncExternalStore:po,useId:po,unstable_isNewReconciler:!1},Zo={readContext:Rs,useCallback:function(e,t){return yo().memoizedState=[e,void 0===t?null:t],e},useContext:Rs,useEffect:Mo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oo(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Oo(4,2,e,t)},useMemo:function(e,t){var n=yo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=yo();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Go.bind(null,oo,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},yo().memoizedState=e},useState:Ro,useDebugValue:zo,useDeferredValue:function(e){return yo().memoizedState=e},useTransition:function(){var e=Ro(!1),t=e[0];return e=qo.bind(null,e[1]),yo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=oo,r=yo();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Pl)throw Error(s(349));0!==(30&so)||Co(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,Mo(To.bind(null,i,o,e),[e]),i.flags|=2048,No(9,So.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=yo(),t=Pl.identifierPrefix;if(rs){var n=Xr;t=":"+t+"R"+(n=($r&~(1<<32-ot($r)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Rs,useCallback:Bo,useContext:Rs,useEffect:Lo,useImperativeHandle:Vo,useInsertionEffect:jo,useLayoutEffect:Fo,useMemo:Wo,useReducer:wo,useRef:Ao,useState:function(){return wo(bo)},useDebugValue:zo,useDeferredValue:function(e){return Ho(_o(),ao.memoizedState,e)},useTransition:function(){return[wo(bo)[0],_o().memoizedState]},useMutableSource:ko,useSyncExternalStore:Eo,useId:Ko,unstable_isNewReconciler:!1},ta={readContext:Rs,useCallback:Bo,useContext:Rs,useEffect:Lo,useImperativeHandle:Vo,useInsertionEffect:jo,useLayoutEffect:Fo,useMemo:Wo,useReducer:xo,useRef:Ao,useState:function(){return xo(bo)},useDebugValue:zo,useDeferredValue:function(e){var t=_o();return null===ao?t.memoizedState=e:Ho(t,ao.memoizedState,e)},useTransition:function(){return[xo(bo)[0],_o().memoizedState]},useMutableSource:ko,useSyncExternalStore:Eo,useId:Ko,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=j({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ia(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:j({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ra={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ec(),r=tc(e),s=Fs(i,r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,r))&&(nc(t,e,r,i),Vs(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ec(),r=tc(e),s=Fs(i,r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Us(e,s,r))&&(nc(t,e,r,i),Vs(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),i=tc(e),r=Fs(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Us(e,r,i))&&(nc(t,e,i,n),Vs(t,e,i))}};function sa(e,t,n,i,r,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,s))}function oa(e,t,n){var i=!1,r=Tr,s=t.contextType;return"object"===typeof s&&null!==s?s=Rs(s):(r=Ar(t)?Rr:Ir.current,s=(i=null!==(i=t.contextTypes)&&void 0!==i)?Nr(e,r):Tr),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ra,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function aa(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&ra.enqueueReplaceState(t,t.state,null)}function la(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Ls(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=Rs(s):(s=Ar(t)?Rr:Ir.current,r.context=Nr(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(ia(e,t,s,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&ra.enqueueReplaceState(r,r.state,null),Bs(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",i=t;do{n+=z(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Hl||(Hl=!0,ql=i),ha(0,t)},n}function pa(e,t,n){(n=Fs(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){ha(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof i&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new da;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function ma(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,Us(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var ya=b.ReactCurrentOwner,_a=!1;function ba(e,t,n,i){t.child=null===e?ws(t,null,n,i):bs(t,e.child,n,i)}function wa(e,t,n,i,r){n=n.render;var s=t.ref;return Ps(t,r),i=mo(e,t,n,i,s,r),n=vo(),null===e||_a?(rs&&n&&es(t),t.flags|=1,ba(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ha(e,t,r))}function xa(e,t,n,i,r){if(null===e){var s=n.type;return"function"!==typeof s||Ac(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Dc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ka(e,t,s,i,r))}if(s=e.child,0===(e.lanes&r)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:li)(o,i)&&e.ref===t.ref)return Ha(e,t,r)}return t.flags|=1,(e=Oc(s,i)).ref=t.ref,e.return=t,t.child=e}function ka(e,t,n,i,r){if(null!==e){var s=e.memoizedProps;if(li(s,i)&&e.ref===t.ref){if(_a=!1,t.pendingProps=i=s,0===(e.lanes&r))return t.lanes=e.lanes,Ha(e,t,r);0!==(131072&e.flags)&&(_a=!0)}}return Sa(e,t,n,i,r)}function Ea(e,t,n){var i=t.pendingProps,r=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sr(Ol,Al),Al|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Sr(Ol,Al),Al|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Sr(Ol,Al),Al|=i}else null!==s?(i=s.baseLanes|n,t.memoizedState=null):i=n,Sr(Ol,Al),Al|=i;return ba(e,t,r,n),t.child}function Ca(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Sa(e,t,n,i,r){var s=Ar(n)?Rr:Ir.current;return s=Nr(t,s),Ps(t,r),n=mo(e,t,n,i,s,r),i=vo(),null===e||_a?(rs&&i&&es(t),t.flags|=1,ba(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ha(e,t,r))}function Ta(e,t,n,i,r){if(Ar(n)){var s=!0;Lr(t)}else s=!1;if(Ps(t,r),null===t.stateNode)Wa(e,t),oa(t,n,i),la(t,n,i,r),i=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Rs(c):c=Nr(t,c=Ar(n)?Rr:Ir.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==i||l!==c)&&aa(t,o,i,c),Ms=!1;var d=t.memoizedState;o.state=d,Bs(t,i,o,r),l=t.memoizedState,a!==i||d!==l||Pr.current||Ms?("function"===typeof u&&(ia(t,n,u,i),l=t.memoizedState),(a=Ms||sa(t,n,a,i,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,js(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Rs(l):l=Nr(t,l=Ar(n)?Rr:Ir.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&aa(t,o,i,l),Ms=!1,d=t.memoizedState,o.state=d,Bs(t,i,o,r);var p=t.memoizedState;a!==h||d!==p||Pr.current||Ms?("function"===typeof f&&(ia(t,n,f,i),p=t.memoizedState),(c=Ms||sa(t,n,c,i,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return Ia(e,t,n,i,s,r)}function Ia(e,t,n,i,r,s){Ca(e,t);var o=0!==(128&t.flags);if(!i&&!o)return r&&jr(t,n,!1),Ha(e,t,s);i=t.stateNode,ya.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&o?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,a,s)):ba(e,t,a,s),t.memoizedState=i.state,r&&jr(t,n,!0),t.child}function Pa(e){var t=e.stateNode;t.pendingContext?Dr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Dr(0,t.context,!1),Qs(e,t.containerInfo)}function Ra(e,t,n,i,r){return fs(),ps(r),t.flags|=256,ba(e,t,n,i),t.child}var Na,Aa,Oa,Da,Ma={dehydrated:null,treeContext:null,retryLane:0};function La(e){return{baseLanes:e,cachePool:null,transitions:null}}function ja(e,t,n){var i,r=t.pendingProps,o=Zs.current,a=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&o)),i?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Sr(Zs,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,a?(r=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Lc(l,r,0,null),e=Mc(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=La(n),t.memoizedState=Ma,e):Fa(t,l));if(null!==(o=e.memoizedState)&&null!==(i=o.dehydrated))return function(e,t,n,i,r,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ua(e,t,a,i=ua(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=i.fallback,r=t.mode,i=Lc({mode:"visible",children:i.children},r,0,null),(o=Mc(o,r,a,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,0!==(1&t.mode)&&bs(t,e.child,null,a),t.child.memoizedState=La(a),t.memoizedState=Ma,o);if(0===(1&t.mode))return Ua(e,t,a,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Ua(e,t,a,i=ua(o=Error(s(419)),i,void 0))}if(l=0!==(a&e.childLanes),_a||l){if(null!==(i=Pl)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|a))?0:r)&&r!==o.retryLane&&(o.retryLane=r,Ds(e,r),nc(i,e,r,-1))}return gc(),Ua(e,t,a,i=ua(Error(s(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),r._reactRetry=t,null):(e=o.treeContext,is=cr(r.nextSibling),ns=t,rs=!0,ss=null,null!==e&&(Gr[Yr++]=$r,Gr[Yr++]=Xr,Gr[Yr++]=Qr,$r=e.id,Xr=e.overflow,Qr=t),t=Fa(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,o,n);if(a){a=r.fallback,l=t.mode,i=(o=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==o?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==i?a=Oc(i,a):(a=Mc(a,l,n,null)).flags|=2,a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,l=null===(l=e.child.memoizedState)?La(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,r}return e=(a=e.child).sibling,r=Oc(a,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Fa(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ua(e,t,n,i){return null!==i&&ps(i),bs(t,e.child,null,n),(e=Fa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Va(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Is(e.return,t,n)}function za(e,t,n,i,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Ba(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(ba(e,t,i.children,n),0!==(2&(i=Zs.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Va(e,n,t);else if(19===e.tag)Va(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Sr(Zs,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),za(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===eo(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}za(t,!0,n,null,s);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qa(e,t){if(!rs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ka(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Ga(e,t,n){var i=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ka(t),null;case 1:case 17:return Ar(t.type)&&Or(),Ka(t),null;case 3:return i=t.stateNode,$s(),Cr(Pr),Cr(Ir),no(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(oc(ss),ss=null))),Aa(e,t),Ka(t),null;case 5:Js(t);var r=Ys(Gs.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(s(166));return Ka(t),null}if(e=Ys(qs.current),hs(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[dr]=t,i[fr]=o,e=0!==(1&t.mode),n){case"dialog":Ui("cancel",i),Ui("close",i);break;case"iframe":case"object":case"embed":Ui("load",i);break;case"video":case"audio":for(r=0;r<Mi.length;r++)Ui(Mi[r],i);break;case"source":Ui("error",i);break;case"img":case"image":case"link":Ui("error",i),Ui("load",i);break;case"details":Ui("toggle",i);break;case"input":$(i,o),Ui("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Ui("invalid",i);break;case"textarea":re(i,o),Ui("invalid",i)}for(var l in ye(n,o),r=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ui("scroll",i)}switch(n){case"input":K(i),Z(i,o,!0);break;case"textarea":K(i),oe(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=Zi)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[dr]=t,e[fr]=i,Na(e,t,!1,!1),t.stateNode=e;e:{switch(l=_e(n,i),n){case"dialog":Ui("cancel",e),Ui("close",e),r=i;break;case"iframe":case"object":case"embed":Ui("load",e),r=i;break;case"video":case"audio":for(r=0;r<Mi.length;r++)Ui(Mi[r],e);r=i;break;case"source":Ui("error",e),r=i;break;case"img":case"image":case"link":Ui("error",e),Ui("load",e),r=i;break;case"details":Ui("toggle",e),r=i;break;case"input":$(e,i),r=Q(e,i),Ui("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=j({},i,{value:void 0}),Ui("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),Ui("invalid",e)}for(o in ye(n,r),c=r)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?me(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ui("scroll",e):null!=u&&_(e,o,u,l))}switch(n){case"input":K(e),Z(e,i,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=i.value&&e.setAttribute("value",""+H(i.value));break;case"select":e.multiple=!!i.multiple,null!=(o=i.value)?ne(e,!!i.multiple,o,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ka(t),null;case 6:if(e&&null!=t.stateNode)Da(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));if(n=Ys(Gs.current),Ys(qs.current),hs(t)){if(i=t.stateNode,n=t.memoizedProps,i[dr]=t,(o=i.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Ji(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ji(i.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[dr]=t,t.stateNode=i}return Ka(t),null;case 13:if(Cr(Zs),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rs&&null!==is&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==i&&null!==i.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[dr]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ka(t),o=!1}else null!==ss&&(oc(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Dl&&(Dl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ka(t),null);case 4:return $s(),Aa(e,t),null===e&&Bi(t.stateNode.containerInfo),Ka(t),null;case 10:return Ts(t.type._context),Ka(t),null;case 19:if(Cr(Zs),null===(o=t.memoizedState))return Ka(t),null;if(i=0!==(128&t.flags),null===(l=o.rendering))if(i)qa(o,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=eo(e))){for(t.flags|=128,qa(o,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Sr(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Bl&&(t.flags|=128,i=!0,qa(o,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=eo(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!rs)return Ka(t),null}else 2*Xe()-o.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,i=!0,qa(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=Zs.current,Sr(Zs,i?1&n|2:1&n),t):(Ka(t),null);case 22:case 23:return hc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Al)&&(Ka(t),6&t.subtreeFlags&&(t.flags|=8192)):Ka(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ya(e,t){switch(ts(t),t.tag){case 1:return Ar(t.type)&&Or(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return $s(),Cr(Pr),Cr(Ir),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Js(t),null;case 13:if(Cr(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Cr(Zs),null;case 4:return $s(),null;case 10:return Ts(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Na=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Aa=function(){},Oa=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,Ys(qs.current);var s,o=null;switch(n){case"input":r=Q(e,r),i=Q(e,i),o=[];break;case"select":r=j({},r,{value:void 0}),i=j({},i,{value:void 0}),o=[];break;case"textarea":r=ie(e,r),i=ie(e,i),o=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=Zi)}for(u in ye(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ui("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Da=function(e,t,n,i){n!==i&&(t.flags|=4)};var Qa=!1,$a=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Ja=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Ec(e,t,i)}else n.current=null}function el(e,t,n){try{n()}catch(i){Ec(e,t,i)}}var tl=!1;function nl(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&el(t,n,s)}r=r.next}while(r!==i)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[dr],delete t[fr],delete t[gr],delete t[mr],delete t[vr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zi));else if(4!==i&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,n)}catch(a){}switch(n.tag){case 5:$a||Za(n,t);case 6:var i=ul,r=hl;ul=null,dl(e,t,n),hl=r,null!==(ul=i)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Bt(e)):lr(ul,n.stateNode));break;case 4:i=ul,r=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=i,hl=r;break;case 0:case 11:case 14:case 15:if(!$a&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&el(n,t,o),r=r.next}while(r!==i)}dl(e,t,n);break;case 1:if(!$a&&(Za(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Ec(n,t,a)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?($a=(i=$a)||null!==n.memoizedState,dl(e,t,n),$a=i):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach(function(t){var i=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))})}}function gl(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(o,a,r),ul=null,hl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Ec(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),vl(e),4&i){try{nl(3,e,e.return),il(3,e)}catch(m){Ec(e,e.return,m)}try{nl(5,e,e.return)}catch(m){Ec(e,e.return,m)}}break;case 1:gl(t,e),vl(e),512&i&&null!==n&&Za(n,n.return);break;case 5:if(gl(t,e),vl(e),512&i&&null!==n&&Za(n,n.return),32&e.flags){var r=e.stateNode;try{de(r,"")}catch(m){Ec(e,e.return,m)}}if(4&i&&null!=(r=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&X(r,o),_e(l,a);var u=_e(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?me(r,d):"dangerouslySetInnerHTML"===h?he(r,d):"children"===h?de(r,d):_(r,h,d,u)}switch(l){case"input":J(r,o);break;case"textarea":se(r,o);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(r,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(r,!!o.multiple,o.defaultValue,!0):ne(r,!!o.multiple,o.multiple?[]:"",!1))}r[fr]=o}catch(m){Ec(e,e.return,m)}}break;case 6:if(gl(t,e),vl(e),4&i){if(null===e.stateNode)throw Error(s(162));r=e.stateNode,o=e.memoizedProps;try{r.nodeValue=o}catch(m){Ec(e,e.return,m)}}break;case 3:if(gl(t,e),vl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Ec(e,e.return,m)}break;case 4:default:gl(t,e),vl(e);break;case 13:gl(t,e),vl(e),8192&(r=e.child).flags&&(o=null!==r.memoizedState,r.stateNode.isHidden=o,!o||null!==r.alternate&&null!==r.alternate.memoizedState||(zl=Xe())),4&i&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?($a=(u=$a)||h,gl(t,e),$a=u):gl(t,e),vl(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Ja=e,h=e.child;null!==h;){for(d=Ja=h;null!==Ja;){switch(p=(f=Ja).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Za(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){i=f,n=f.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Ec(i,n,m)}}break;case 5:Za(f,f.return);break;case 22:if(null!==f.memoizedState){wl(d);continue}}null!==p?(p.return=f,Ja=p):wl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{r=d.stateNode,u?"function"===typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(m){Ec(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Ec(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),vl(e),4&i&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var i=n;break e}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(de(r,""),i.flags&=-33),cl(e,al(e),r);break;case 3:case 4:var o=i.stateNode.containerInfo;ll(e,al(e),o);break;default:throw Error(s(161))}}catch(a){Ec(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Ja=e,_l(e,t,n)}function _l(e,t,n){for(var i=0!==(1&e.mode);null!==Ja;){var r=Ja,s=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||Qa;if(!o){var a=r.alternate,l=null!==a&&null!==a.memoizedState||$a;a=Qa;var c=$a;if(Qa=o,($a=l)&&!c)for(Ja=r;null!==Ja;)l=(o=Ja).child,22===o.tag&&null!==o.memoizedState?xl(r):null!==l?(l.return=o,Ja=l):xl(r);for(;null!==s;)Ja=s,_l(s,t,n),s=s.sibling;Ja=r,Qa=a,$a=c}bl(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,Ja=s):bl(e)}}function bl(e){for(;null!==Ja;){var t=Ja;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$a||il(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!$a)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ws(t,o,i);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ws(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}$a||512&t.flags&&rl(t)}catch(f){Ec(t,t.return,f)}}if(t===e){Ja=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ja=n;break}Ja=t.return}}function wl(e){for(;null!==Ja;){var t=Ja;if(t===e){Ja=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ja=n;break}Ja=t.return}}function xl(e){for(;null!==Ja;){var t=Ja;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Ec(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){Ec(t,r,l)}}var s=t.return;try{rl(t)}catch(l){Ec(t,s,l)}break;case 5:var o=t.return;try{rl(t)}catch(l){Ec(t,o,l)}}}catch(l){Ec(t,t.return,l)}if(t===e){Ja=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ja=a;break}Ja=t.return}}var kl,El=Math.ceil,Cl=b.ReactCurrentDispatcher,Sl=b.ReactCurrentOwner,Tl=b.ReactCurrentBatchConfig,Il=0,Pl=null,Rl=null,Nl=0,Al=0,Ol=Er(0),Dl=0,Ml=null,Ll=0,jl=0,Fl=0,Ul=null,Vl=null,zl=0,Bl=1/0,Wl=null,Hl=!1,ql=null,Kl=null,Gl=!1,Yl=null,Ql=0,$l=0,Xl=null,Jl=-1,Zl=0;function ec(){return 0!==(6&Il)?Xe():-1!==Jl?Jl:Jl=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Nl?Nl&-Nl:null!==gs.transition?(0===Zl&&(Zl=gt()),Zl):0!==(e=_t)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nc(e,t,n,i){if(50<$l)throw $l=0,Xl=null,Error(s(185));vt(e,n,i),0!==(2&Il)&&e===Pl||(e===Pl&&(0===(2&Il)&&(jl|=n),4===Dl&&ac(e,Nl)),ic(e,i),1===n&&0===Il&&0===(1&t.mode)&&(Bl=Xe()+500,Ur&&Br()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=r[o];-1===l?0!==(a&n)&&0===(a&i)||(r[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var i=dt(e,e===Pl?Nl:0);if(0===i)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Ur=!0,zr(e)}(lc.bind(null,e)):zr(lc.bind(null,e)),or(function(){0===(6&Il)&&Br()}),n=null;else{switch(bt(i)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Pc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Jl=-1,Zl=0,0!==(6&Il))throw Error(s(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var i=dt(e,e===Pl?Nl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=mc(e,i);else{t=i;var r=Il;Il|=2;var o=pc();for(Pl===e&&Nl===t||(Wl=null,Bl=Xe()+500,dc(e,t));;)try{yc();break}catch(l){fc(e,l)}Ss(),Cl.current=o,Il=r,null!==Rl?t=0:(Pl=null,Nl=0,t=Dl)}if(0!==t){if(2===t&&(0!==(r=pt(e))&&(i=r,t=sc(e,r))),1===t)throw n=Ml,dc(e,0),ac(e,i),ic(e,Xe()),n;if(6===t)ac(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ai(s(),r))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=mc(e,i))&&(0!==(o=pt(e))&&(i=o,t=sc(e,o))),1===t))throw n=Ml,dc(e,0),ac(e,i),ic(e,Xe()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,Vl,Wl);break;case 3:if(ac(e,i),(130023424&i)===i&&10<(t=zl+500-Xe())){if(0!==dt(e,0))break;if(((r=e.suspendedLanes)&i)!==i){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(wc.bind(null,e,Vl,Wl),t);break}wc(e,Vl,Wl);break;case 4:if(ac(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var a=31-ot(i);o=1<<a,(a=t[a])>r&&(r=a),i&=~o}if(i=r,10<(i=(120>(i=Xe()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*El(i/1960))-i)){e.timeoutHandle=ir(wc.bind(null,e,Vl,Wl),i);break}wc(e,Vl,Wl);break;default:throw Error(s(329))}}}return ic(e,Xe()),e.callbackNode===n?rc.bind(null,e):null}function sc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Vl,Vl=n,null!==t&&oc(t)),e}function oc(e){null===Vl?Vl=e:Vl.push.apply(Vl,e)}function ac(e,t){for(t&=~Fl,t&=~jl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),i=1<<n;e[n]=-1,t&=~i}}function lc(e){if(0!==(6&Il))throw Error(s(327));xc();var t=dt(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var i=pt(e);0!==i&&(t=i,n=sc(e,i))}if(1===n)throw n=Ml,dc(e,0),ac(e,t),ic(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vl,Wl),ic(e,Xe()),null}function cc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(Bl=Xe()+500,Ur&&Br())}}function uc(e){null!==Yl&&0===Yl.tag&&0===(6&Il)&&xc();var t=Il;Il|=1;var n=Tl.transition,i=_t;try{if(Tl.transition=null,_t=1,e)return e()}finally{_t=i,Tl.transition=n,0===(6&(Il=t))&&Br()}}function hc(){Al=Ol.current,Cr(Ol)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Rl)for(n=Rl.return;null!==n;){var i=n;switch(ts(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Or();break;case 3:$s(),Cr(Pr),Cr(Ir),no();break;case 5:Js(i);break;case 4:$s();break;case 13:case 19:Cr(Zs);break;case 10:Ts(i.type._context);break;case 22:case 23:hc()}n=n.return}if(Pl=e,Rl=e=Oc(e.current,null),Nl=Al=t,Dl=0,Ml=null,Fl=jl=Ll=0,Vl=Ul=null,null!==Ns){for(t=0;t<Ns.length;t++)if(null!==(i=(n=Ns[t]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var o=s.next;s.next=r,i.next=o}n.pending=i}Ns=null}return e}function fc(e,t){for(;;){var n=Rl;try{if(Ss(),io.current=Jo,co){for(var i=oo.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}co=!1}if(so=0,lo=ao=oo=null,uo=!1,ho=0,Sl.current=null,null===n||null===n.return){Dl=1,Ml=t,Rl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Nl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ma(a);if(null!==p){p.flags&=-257,va(p,a,l,0,t),1&p.mode&&ga(o,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){ga(o,u,t),gc();break e}c=Error(s(426))}else if(rs&&1&l.mode){var v=ma(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),va(v,a,l,0,t),ps(ca(c,l));break e}}o=c=ca(c,l),4!==Dl&&(Dl=2),null===Ul?Ul=[o]:Ul.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,zs(o,fa(0,c,t));break e;case 1:l=c;var y=o.type,_=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Kl||!Kl.has(_)))){o.flags|=65536,t&=-t,o.lanes|=t,zs(o,pa(o,l,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function pc(){var e=Cl.current;return Cl.current=Jo,null===e?Jo:e}function gc(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Pl||0===(268435455&Ll)&&0===(268435455&jl)||ac(Pl,Nl)}function mc(e,t){var n=Il;Il|=2;var i=pc();for(Pl===e&&Nl===t||(Wl=null,dc(e,t));;)try{vc();break}catch(r){fc(e,r)}if(Ss(),Il=n,Cl.current=i,null!==Rl)throw Error(s(261));return Pl=null,Nl=0,Dl}function vc(){for(;null!==Rl;)_c(Rl)}function yc(){for(;null!==Rl&&!Qe();)_c(Rl)}function _c(e){var t=kl(e.alternate,e,Al);e.memoizedProps=e.pendingProps,null===t?bc(e):Rl=t,Sl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ga(n,t,Al)))return void(Rl=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Dl=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Dl&&(Dl=5)}function wc(e,t,n){var i=_t,r=Tl.transition;try{Tl.transition=null,_t=1,function(e,t,n,i){do{xc()}while(null!==Yl);if(0!==(6&Il))throw Error(s(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-ot(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}(e,o),e===Pl&&(Rl=Pl=null,Nl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Pc(tt,function(){return xc(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Tl.transition,Tl.transition=null;var a=_t;_t=1;var l=Il;Il|=4,Sl.current=null,function(e,t){if(er=Ht,fi(e=di())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==r&&3!==d.nodeType||(l=a+r),d!==o||0!==i&&3!==d.nodeType||(c=a+i),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===r&&(l=a),f===o&&++h===i&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Ht=!1,Ja=t;null!==Ja;)if(e=(t=Ja).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ja=e;else for(;null!==Ja;){t=Ja;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,v=g.memoizedState,y=t.stateNode,_=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:na(t.type,m),v);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(w){Ec(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ja=e;break}Ja=t.return}g=tl,tl=!1}(e,n),ml(n,e),pi(tr),Ht=!!er,tr=er=null,e.current=n,yl(n,e,r),$e(),Il=l,_t=a,Tl.transition=o}else e.current=n;if(Gl&&(Gl=!1,Yl=e,Ql=r),o=e.pendingLanes,0===o&&(Kl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Hl)throw Hl=!1,e=ql,ql=null,e;0!==(1&Ql)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Xl?$l++:($l=0,Xl=e):$l=0,Br()}(e,t,n,i)}finally{Tl.transition=r,_t=i}return null}function xc(){if(null!==Yl){var e=bt(Ql),t=Tl.transition,n=_t;try{if(Tl.transition=null,_t=16>e?16:e,null===Yl)var i=!1;else{if(e=Yl,Yl=null,Ql=0,0!==(6&Il))throw Error(s(331));var r=Il;for(Il|=4,Ja=e.current;null!==Ja;){var o=Ja,a=o.child;if(0!==(16&Ja.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Ja=u;null!==Ja;){var h=Ja;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Ja=d;else for(;null!==Ja;){var f=(h=Ja).sibling,p=h.return;if(sl(h),h===u){Ja=null;break}if(null!==f){f.return=p,Ja=f;break}Ja=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(null!==m)}}Ja=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Ja=a;else e:for(;null!==Ja;){if(0!==(2048&(o=Ja).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Ja=y;break e}Ja=o.return}}var _=e.current;for(Ja=_;null!==Ja;){var b=(a=Ja).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Ja=b;else e:for(a=_;null!==Ja;){if(0!==(2048&(l=Ja).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(x){Ec(l,l.return,x)}if(l===a){Ja=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Ja=w;break e}Ja=l.return}}if(Il=r,Br(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(x){}i=!0}return i}finally{_t=n,Tl.transition=t}}return!1}function kc(e,t,n){e=Us(e,t=fa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Kl||!Kl.has(i))){t=Us(t,e=pa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function Cc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Nl&n)===n&&(4===Dl||3===Dl&&(130023424&Nl)===Nl&&500>Xe()-zl?dc(e,0):Fl|=n),ic(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ds(e,t))&&(vt(e,t,n),ic(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(t),Sc(e,n)}function Pc(e,t){return Ge(e,t)}function Rc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nc(e,t,n,i){return new Rc(e,t,n,i)}function Ac(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Nc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Dc(e,t,n,i,r,o){var a=2;if(i=e,"function"===typeof e)Ac(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case k:return Mc(n.children,r,o,t);case E:a=8,r|=8;break;case C:return(e=Nc(12,n,t,2|r)).elementType=C,e.lanes=o,e;case P:return(e=Nc(13,n,t,r)).elementType=P,e.lanes=o,e;case R:return(e=Nc(19,n,t,r)).elementType=R,e.lanes=o,e;case O:return Lc(n,r,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:a=10;break e;case T:a=9;break e;case I:a=11;break e;case N:a=14;break e;case A:a=16,i=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Nc(a,n,t,r)).elementType=e,t.type=i,t.lanes=o,t}function Mc(e,t,n,i){return(e=Nc(7,e,i,t)).lanes=n,e}function Lc(e,t,n,i){return(e=Nc(22,e,i,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function jc(e,t,n){return(e=Nc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Nc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,i,r,s,o,a,l){return e=new Uc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Nc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ls(s),e}function zc(e){if(!e)return Tr;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ar(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ar(n))return Mr(e,n,t)}return t}function Bc(e,t,n,i,r,s,o,a,l){return(e=Vc(n,i,!0,e,0,s,0,a,l)).context=zc(null),n=e.current,(s=Fs(i=ec(),r=tc(n))).callback=void 0!==t&&null!==t?t:null,Us(n,s,r),e.current.lanes=r,vt(e,r,i),ic(e,i),e}function Wc(e,t,n,i){var r=t.current,s=ec(),o=tc(r);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Us(r,t,o))&&(nc(e,r,o,s),Vs(e,r,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pr.current)_a=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _a=!1,function(e,t,n){switch(t.tag){case 3:Pa(t),fs();break;case 5:Xs(t);break;case 1:Ar(t.type)&&Lr(t);break;case 4:Qs(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Sr(xs,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Sr(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?ja(e,t,n):(Sr(Zs,1&Zs.current),null!==(e=Ha(e,t,n))?e.sibling:null);Sr(Zs,1&Zs.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Ba(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Sr(Zs,Zs.current),i)break;return null;case 22:case 23:return t.lanes=0,Ea(e,t,n)}return Ha(e,t,n)}(e,t,n);_a=0!==(131072&e.flags)}else _a=!1,rs&&0!==(1048576&t.flags)&&Zr(t,Kr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Wa(e,t),e=t.pendingProps;var r=Nr(t,Ir.current);Ps(t,n),r=mo(null,t,i,e,r,n);var o=vo();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ar(i)?(o=!0,Lr(t)):o=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Ls(t),r.updater=ra,t.stateNode=r,r._reactInternals=t,la(t,i,e,n),t=Ia(null,t,i,!0,o,n)):(t.tag=0,rs&&o&&es(t),ba(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Ac(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===N)return 14}return 2}(i),e=na(i,e),r){case 0:t=Sa(null,t,i,e,n);break e;case 1:t=Ta(null,t,i,e,n);break e;case 11:t=wa(null,t,i,e,n);break e;case 14:t=xa(null,t,i,na(i.type,e),n);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Sa(e,t,i,r=t.elementType===i?r:na(i,r),n);case 1:return i=t.type,r=t.pendingProps,Ta(e,t,i,r=t.elementType===i?r:na(i,r),n);case 3:e:{if(Pa(t),null===e)throw Error(s(387));i=t.pendingProps,r=(o=t.memoizedState).element,js(e,t),Bs(t,i,null,n);var a=t.memoizedState;if(i=a.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ra(e,t,i,n,r=ca(Error(s(423)),t));break e}if(i!==r){t=Ra(e,t,i,n,r=ca(Error(s(424)),t));break e}for(is=cr(t.stateNode.containerInfo.firstChild),ns=t,rs=!0,ss=null,n=ws(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),i===r){t=Ha(e,t,n);break e}ba(e,t,i,n)}t=t.child}return t;case 5:return Xs(t),null===e&&cs(t),i=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,a=r.children,nr(i,r)?a=null:null!==o&&nr(i,o)&&(t.flags|=32),Ca(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return ja(e,t,n);case 4:return Qs(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=bs(t,null,i,n):ba(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,wa(e,t,i,r=t.elementType===i?r:na(i,r),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,o=t.memoizedProps,a=r.value,Sr(xs,i._currentValue),i._currentValue=a,null!==o)if(ai(o.value,a)){if(o.children===r.children&&!Pr.current){t=Ha(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===o.tag){(c=Fs(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Is(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Is(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ba(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Ps(t,n),i=i(r=Rs(r)),t.flags|=1,ba(e,t,i,n),t.child;case 14:return r=na(i=t.type,t.pendingProps),xa(e,t,i,r=na(i.type,r),n);case 15:return ka(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:na(i,r),Wa(e,t),t.tag=1,Ar(i)?(e=!0,Lr(t)):e=!1,Ps(t,n),oa(t,i,r),la(t,i,r,n),Ia(null,t,i,!0,e,n);case 19:return Ba(e,t,n);case 22:return Ea(e,t,n)}throw Error(s(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof r){var a=r;r=function(){var e=Hc(o);a.call(e)}}Wc(t,o,e,r)}else o=function(e,t,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var e=Hc(o);s.call(e)}}var o=Bc(t,i,e,0,null,!1,0,"",Jc);return e._reactRootContainer=o,e[pr]=o.current,Bi(8===e.nodeType?e.parentNode:e),uc(),o}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var a=i;i=function(){var e=Hc(l);a.call(e)}}var l=Vc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[pr]=l.current,Bi(8===e.nodeType?e.parentNode:e),uc(function(){Wc(t,l,n,i)}),l}(n,t,e,r,i);return Hc(o)}Qc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},Qc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Wc(null,e,null,null)}),t[pr]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&jt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,Xe()),0===(6&Il)&&(Bl=Xe()+500,Br()))}break;case 13:uc(function(){var t=Ds(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Kc(e,1)}},xt=function(e){if(13===e.tag){var t=Ds(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),n=Ds(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},Et=function(){return _t},Ct=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=wr(i);if(!r)throw Error(s(90));G(i),J(i,r)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cc,Pe=uc;var eu={usingClientEntryPoint:!1,Events:[_r,br,wr,Se,Te,cc]},tu={findFiberByHostInstance:yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{rt=iu.inject(nu),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(s(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(s(299));var n=!1,i="",r=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,i,r),e[pr]=t.current,Bi(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,o="",a=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,r,0,o,a),e[pr]=t.current,Bi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Qc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[pr]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Xc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{"use strict";e.exports=n(234)},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&i;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>o[e]=()=>i[e]);return o.default=()=>i,n.d(s,o),s}})(),n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,i)=>(n.f[i](e,t),t),[])),n.u=e=>"static/js/"+e+".fa962200.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="capacitiprojectbase:";n.l=(i,r,s,o)=>{if(e[i])e[i].push(r);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=i),e[i]=[r];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var r=e[i];if(delete e[i],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach(e=>e(n)),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/capacitiprojectbase/",(()=>{var e={792:0};n.f.j=(t,i)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var s=new Promise((n,i)=>r=e[t]=[n,i]);i.push(r[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,i=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var s=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,r[1](a)}},"chunk-"+t,t)}};var t=(t,i)=>{var r,s,o=i[0],a=i[1],l=i[2],c=0;if(o.some(t=>0!==e[t])){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(l)l(n)}for(t&&t(i);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},i=self.webpackChunkcapacitiprojectbase=self.webpackChunkcapacitiprojectbase||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),(()=>{"use strict";var e,t=n(43),i=n.t(t,2),r=n(391);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function o(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function a(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const h="popstate";function d(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function f(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function p(e,t){return{usr:e.state,key:e.key,idx:t}}function g(e,t,n,i){return void 0===n&&(n=null),u({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?v(t):t,{state:n,key:t&&t.key||i||Math.random().toString(36).substr(2,8)})}function m(e){let{pathname:t="/",search:n="",hash:i=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),i&&"#"!==i&&(t+="#"===i.charAt(0)?i:"#"+i),t}function v(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function y(t,n,i,r){void 0===r&&(r={});let{window:s=document.defaultView,v5Compat:o=!1}=r,a=s.history,l=e.Pop,c=null,f=v();function v(){return(a.state||{idx:null}).idx}function y(){l=e.Pop;let t=v(),n=null==t?null:t-f;f=t,c&&c({action:l,location:b.location,delta:n})}function _(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:m(e);return n=n.replace(/ $/,"%20"),d(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==f&&(f=0,a.replaceState(u({},a.state,{idx:f}),""));let b={get action(){return l},get location(){return t(s,a)},listen(e){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(h,y),c=e,()=>{s.removeEventListener(h,y),c=null}},createHref:e=>n(s,e),createURL:_,encodeLocation(e){let t=_(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){l=e.Push;let r=g(b.location,t,n);i&&i(r,t),f=v()+1;let u=p(r,f),h=b.createHref(r);try{a.pushState(u,"",h)}catch(zp){if(zp instanceof DOMException&&"DataCloneError"===zp.name)throw zp;s.location.assign(h)}o&&c&&c({action:l,location:b.location,delta:1})},replace:function(t,n){l=e.Replace;let r=g(b.location,t,n);i&&i(r,t),f=v();let s=p(r,f),u=b.createHref(r);a.replaceState(s,"",u),o&&c&&c({action:l,location:b.location,delta:0})},go:e=>a.go(e)};return b}var _;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(_||(_={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function b(e,t,n){return void 0===n&&(n="/"),w(e,t,n,!1)}function w(e,t,n,i){let r=M(("string"===typeof t?v(t):t).pathname||"/",n);if(null==r)return null;let s=x(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let o=null;for(let a=0;null==o&&a<s.length;++a){let e=D(r);o=A(s[a],e,i)}return o}function x(e,t,n,i){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===i&&(i="");let r=(e,r,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};o.relativePath.startsWith("/")&&(d(o.relativePath.startsWith(i),'Absolute route path "'+o.relativePath+'" nested under path "'+i+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(i.length));let a=V([i,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),x(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:N(a,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let i of k(e.path))r(e,t,i);else r(e,t)}),t}function k(e){let t=e.split("/");if(0===t.length)return[];let[n,...i]=t,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===i.length)return r?[s,""]:[s];let o=k(i.join("/")),a=[];return a.push(...o.map(e=>""===e?s:[s,e].join("/"))),r&&a.push(...o),a.map(t=>e.startsWith("/")&&""===t?"/":t)}const E=/^:[\w-]+$/,C=3,S=2,T=1,I=10,P=-2,R=e=>"*"===e;function N(e,t){let n=e.split("/"),i=n.length;return n.some(R)&&(i+=P),t&&(i+=S),n.filter(e=>!R(e)).reduce((e,t)=>e+(E.test(t)?C:""===t?T:I),i)}function A(e,t,n){void 0===n&&(n=!1);let{routesMeta:i}=e,r={},s="/",o=[];for(let a=0;a<i.length;++a){let e=i[a],l=a===i.length-1,c="/"===s?t:t.slice(s.length)||"/",u=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!i[i.length-1].route.index&&(u=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(r,u.params),o.push({params:r,pathname:V([s,u.pathname]),pathnameBase:z(V([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=V([s,u.pathnameBase]))}return o}function O(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);f("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(i.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(i.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");let s=new RegExp(r,t?void 0:"i");return[s,i]}(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1),l=i.reduce((e,t,n)=>{let{paramName:i,isOptional:r}=t;if("*"===i){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[i]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:s,pathnameBase:o,pattern:e}}function D(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(zp){return f(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+zp+")."),e}}function M(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&"/"!==i?null:e.slice(n)||"/"}function L(e,t,n,i){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function j(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function F(e,t){let n=j(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function U(e,t,n,i){let r;void 0===i&&(i=!1),"string"===typeof e?r=v(e):(r=u({},e),d(!r.pathname||!r.pathname.includes("?"),L("?","pathname","search",r)),d(!r.pathname||!r.pathname.includes("#"),L("#","pathname","hash",r)),d(!r.search||!r.search.includes("#"),L("#","search","hash",r)));let s,o=""===e||""===r.pathname,a=o?"/":r.pathname;if(null==a)s=n;else{let e=t.length-1;if(!i&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:i="",hash:r=""}="string"===typeof e?v(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:B(i),hash:W(r)}}(r,s),c=a&&"/"!==a&&a.endsWith("/"),h=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!h||(l.pathname+="/"),l}const V=e=>e.join("/").replace(/\/\/+/g,"/"),z=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",W=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function H(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const q=["post","put","patch","delete"],K=(new Set(q),["get",...q]);new Set(K),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},G.apply(this,arguments)}const Y=t.createContext(null);const Q=t.createContext(null);const $=t.createContext(null);const X=t.createContext(null);const J=t.createContext({outlet:null,matches:[],isDataRoute:!1});const Z=t.createContext(null);function ee(){return null!=t.useContext(X)}function te(){return ee()||d(!1),t.useContext(X).location}function ne(e){t.useContext($).static||t.useLayoutEffect(e)}function ie(){let{isDataRoute:e}=t.useContext(J);return e?function(){let{router:e}=fe(he.UseNavigateStable),n=ge(de.UseNavigateStable),i=t.useRef(!1);ne(()=>{i.current=!0});let r=t.useCallback(function(t,r){void 0===r&&(r={}),i.current&&("number"===typeof t?e.navigate(t):e.navigate(t,G({fromRouteId:n},r)))},[e,n]);return r}():function(){ee()||d(!1);let e=t.useContext(Y),{basename:n,future:i,navigator:r}=t.useContext($),{matches:s}=t.useContext(J),{pathname:o}=te(),a=JSON.stringify(F(s,i.v7_relativeSplatPath)),l=t.useRef(!1);ne(()=>{l.current=!0});let c=t.useCallback(function(t,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof t)return void r.go(t);let s=U(t,JSON.parse(a),o,"path"===i.relative);null==e&&"/"!==n&&(s.pathname="/"===s.pathname?n:V([n,s.pathname])),(i.replace?r.replace:r.push)(s,i.state,i)},[n,r,a,o,e]);return c}()}function re(e,n){let{relative:i}=void 0===n?{}:n,{future:r}=t.useContext($),{matches:s}=t.useContext(J),{pathname:o}=te(),a=JSON.stringify(F(s,r.v7_relativeSplatPath));return t.useMemo(()=>U(e,JSON.parse(a),o,"path"===i),[e,a,o,i])}function se(n,i,r,s){ee()||d(!1);let{navigator:o}=t.useContext($),{matches:a}=t.useContext(J),l=a[a.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,f=te();if(i){var p;let e="string"===typeof i?v(i):i;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||d(!1),h=e}else h=f;let g=h.pathname||"/",m=g;if("/"!==u){let e=u.replace(/^\//,"").split("/");m="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=b(n,{pathname:m});let _=ue(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:V([u,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:V([u,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,r,s);return i&&_?t.createElement(X.Provider,{value:{location:G({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:e.Pop}},_):_}function oe(){let e=function(){var e;let n=t.useContext(Z),i=pe(de.UseRouteError),r=ge(de.UseRouteError);if(void 0!==n)return n;return null==(e=i.errors)?void 0:e[r]}(),n=H(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),i?t.createElement("pre",{style:s},i):null,null)}const ae=t.createElement(oe,null);class le extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(J.Provider,{value:this.props.routeContext},t.createElement(Z.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ce(e){let{routeContext:n,match:i,children:r}=e,s=t.useContext(Y);return s&&s.static&&s.staticContext&&(i.route.errorElement||i.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=i.route.id),t.createElement(J.Provider,{value:n},r)}function ue(e,n,i,r){var s;if(void 0===n&&(n=[]),void 0===i&&(i=null),void 0===r&&(r=null),null==e){var o;if(!i)return null;if(i.errors)e=i.matches;else{if(!(null!=(o=r)&&o.v7_partialHydration&&0===n.length&&!i.initialized&&i.matches.length>0))return null;e=i.matches}}let a=e,l=null==(s=i)?void 0:s.errors;if(null!=l){let e=a.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||d(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,u=-1;if(i&&r&&r.v7_partialHydration)for(let t=0;t<a.length;t++){let e=a[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=t),e.route.id){let{loaderData:t,errors:n}=i,r=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||r){c=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight((e,r,s)=>{let o,h=!1,d=null,f=null;var p;i&&(o=l&&r.route.id?l[r.route.id]:void 0,d=r.route.errorElement||ae,c&&(u<0&&0===s?(p="route-fallback",!1||me[p]||(me[p]=!0),h=!0,f=null):u===s&&(h=!0,f=r.route.hydrateFallbackElement||null)));let g=n.concat(a.slice(0,s+1)),m=()=>{let n;return n=o?d:h?f:r.route.Component?t.createElement(r.route.Component,null):r.route.element?r.route.element:e,t.createElement(ce,{match:r,routeContext:{outlet:e,matches:g,isDataRoute:null!=i},children:n})};return i&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?t.createElement(le,{location:i.location,revalidation:i.revalidation,component:d,error:o,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var he=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(he||{}),de=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(de||{});function fe(e){let n=t.useContext(Y);return n||d(!1),n}function pe(e){let n=t.useContext(Q);return n||d(!1),n}function ge(e){let n=function(){let e=t.useContext(J);return e||d(!1),e}(),i=n.matches[n.matches.length-1];return i.route.id||d(!1),i.route.id}const me={};function ve(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}i.startTransition;function ye(e){d(!1)}function _e(n){let{basename:i="/",children:r=null,location:s,navigationType:o=e.Pop,navigator:a,static:l=!1,future:c}=n;ee()&&d(!1);let u=i.replace(/^\/*/,"/"),h=t.useMemo(()=>({basename:u,navigator:a,static:l,future:G({v7_relativeSplatPath:!1},c)}),[u,c,a,l]);"string"===typeof s&&(s=v(s));let{pathname:f="/",search:p="",hash:g="",state:m=null,key:y="default"}=s,_=t.useMemo(()=>{let e=M(f,u);return null==e?null:{location:{pathname:e,search:p,hash:g,state:m,key:y},navigationType:o}},[u,f,p,g,m,y,o]);return null==_?null:t.createElement($.Provider,{value:h},t.createElement(X.Provider,{children:r,value:_}))}function be(e){let{children:t,location:n}=e;return se(we(t),n)}new Promise(()=>{});t.Component;function we(e,n){void 0===n&&(n=[]);let i=[];return t.Children.forEach(e,(e,r)=>{if(!t.isValidElement(e))return;let s=[...n,r];if(e.type===t.Fragment)return void i.push.apply(i,we(e.props.children,s));e.type!==ye&&d(!1),e.props.index&&e.props.children&&d(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=we(e.props.children,s)),i.push(o)}),i}const xe=n.p+"static/media/logo-light.fd250ea13fee24ae0d77.png";var ke=n(579);const Ee=()=>(0,ke.jsxs)("div",{className:"hero-section",children:[(0,ke.jsx)("h1",{className:"landing-title",children:"WELCOME"}),(0,ke.jsxs)("p",{className:"landing-description",children:["Streamline your digital resource requests with our intelligent, AI-powered platform. Find, preview, and download resources with ease.",(0,ke.jsx)("br",{}),"Start your journey today."]})]}),Ce=async e=>{console.log("API Key:",{NODE_ENV:"production",PUBLIC_URL:"/capacitiprojectbase",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GOOGLE_SEARCH_API_KEY),console.log("Search Engine ID:",{NODE_ENV:"production",PUBLIC_URL:"/capacitiprojectbase",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GOOGLE_SEARCH_ENGINE_ID);const t={NODE_ENV:"production",PUBLIC_URL:"/capacitiprojectbase",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GOOGLE_SEARCH_ENGINE_ID,n="https://www.googleapis.com/customsearch/v1?key=".concat({NODE_ENV:"production",PUBLIC_URL:"/capacitiprojectbase",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_GOOGLE_SEARCH_API_KEY,"&cx=").concat(t,"&q=").concat(encodeURIComponent(e));try{const e=await fetch(n),t=await e.json();return(t.items||[]).map(e=>({title:e.title,link:e.link,snippet:e.snippet}))}catch(zp){return console.error("Error fetching recommendations:",zp),[]}},Se=e=>{let{setRecommendations:n,setShowPopup:i}=e;const[r,s]=(0,t.useState)("");return(0,ke.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),r.trim()){const e=await Ce(r);n(e),i(!0)}},className:"search-form",children:[(0,ke.jsx)("input",{type:"text",value:r,onChange:e=>s(e.target.value),placeholder:"Search for resources...",className:"search-input","aria-label":"Search for resources"}),(0,ke.jsx)("button",{type:"submit",className:"search-button",children:"Search"})]})};var Te=n(418),Ie=n.n(Te);const Pe=()=>{const e=ie(),[n,i]=(0,t.useState)(!1);return(0,t.useEffect)(()=>{const e=()=>{i(window.scrollY>50)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}},[]),(0,ke.jsxs)("nav",{className:"navbar ".concat(n?"scrolled":""),children:[(0,ke.jsxs)("div",{className:"navbar-left",onClick:()=>e("/"),children:[(0,ke.jsx)("img",{src:xe,alt:"Logo",className:"navbar-logo"}),(0,ke.jsx)("span",{className:"navbar-title",children:"Resource Hub"})]}),(0,ke.jsxs)("div",{className:"navbar-links",children:[(0,ke.jsx)("a",{href:"#features",children:"Dashboard"}),(0,ke.jsx)("a",{href:"#about",children:"About Us"}),(0,ke.jsx)("a",{href:"#contact",children:"Contact Us"}),(0,ke.jsx)("a",{href:"#faq",children:"FAQ"})]}),(0,ke.jsx)("div",{className:"navbar-right",children:(0,ke.jsx)("button",{className:"nav-auth-button",onClick:()=>e("/auth"),children:"Sign In"})})]})},Re=()=>{const e=ie(),[n,i]=(0,t.useState)([]),[r,s]=(0,t.useState)(!1);return(0,ke.jsxs)("div",{className:"landing-container",children:[(0,ke.jsx)(Pe,{}),(0,ke.jsx)(Ee,{}),(0,ke.jsx)(Se,{setRecommendations:i,setShowPopup:s}),r&&n.length>0&&(0,ke.jsx)(Ie(),{recommendations:n,onClose:()=>s(!1)}),(0,ke.jsx)("div",{className:"landing-buttons",children:(0,ke.jsx)("button",{onClick:()=>e("/auth"),className:"get-started-button",children:"Get Started"})})]})},Ne=e=>{let{isAdmin:t,setIsAdmin:n}=e;return(0,ke.jsxs)("div",{className:"auth-toggle-buttons",children:[(0,ke.jsx)("button",{onClick:()=>n(!1),className:t?"":"active",children:"User"}),(0,ke.jsx)("button",{onClick:()=>n(!0),className:t?"active":"",children:"Admin"})]})},Ae=!1,Oe=!1,De="${JSCORE_VERSION}",Me=function(e,t){if(!e)throw Le(t)},Le=function(e){return new Error("Firebase Database ("+De+") INTERNAL ASSERT FAILED: "+e)},je=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&i+1<e.length&&56320===(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},Fe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const t=e[r],s=r+1<e.length,o=s?e[r+1]:0,a=r+2<e.length,l=a?e[r+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),i.push(n[c],n[u],n[h],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(je(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],s=r<e.length?n[e.charAt(r)]:0;++r;const o=r<e.length?n[e.charAt(r)]:64;++r;const a=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==s||null==o||null==a)throw new Ue;const l=t<<2|s>>4;if(i.push(l),64!==o){const e=s<<4&240|o>>2;if(i.push(e),64!==a){const e=o<<6&192|a;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Ue extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ve=function(e){const t=je(e);return Fe.encodeByteArray(t,!0)},ze=function(e){return Ve(e).replace(/\./g,"")},Be=function(e){try{return Fe.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function We(e){return He(void 0,e)}function He(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&qe(n)&&(e[n]=He(e[n],t[n]));return e}function qe(e){return"__proto__"!==e}function Ke(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const Ge=()=>{try{return Ke().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/capacitiprojectbase",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&Be(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},Ye=e=>{var t,n;return null===(n=null===(t=Ge())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},Qe=e=>{const t=Ye(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]},$e=()=>{var e;return null===(e=Ge())||void 0===e?void 0:e.config},Xe=e=>{var t;return null===(t=Ge())||void 0===t?void 0:t["_".concat(e)]};class Je{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function Ze(e){return e.endsWith(".cloudworkstations.dev")}async function et(e){return(await fetch(e,{credentials:"include"})).ok}function tt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ze(JSON.stringify({alg:"none",type:"JWT"})),ze(JSON.stringify(s)),""].join(".")}const nt={};let it=!1;function rt(e,t){if("undefined"===typeof window||"undefined"===typeof document||!Ze(window.location.host)||nt[e]===t||nt[e]||it)return;function n(e){return"__firebase__banner__".concat(e)}nt[e]=t;const i="__firebase__banner",r=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(nt))nt[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function s(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{it=!0,function(){const e=document.getElementById(i);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(i),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),l=document.getElementById(a)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,a);const n=s();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,o,l,n),document.body.appendChild(t)}r?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function st(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function ot(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(st())}function at(){var e;const t=null===(e=Ge())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(i){return!1}}function lt(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function ct(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function ut(){return!0===Ae||!0===Oe}function ht(){return!at()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dt(){try{return"object"===typeof indexedDB}catch(e){return!1}}function ft(){return new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(zp){t(zp)}})}class pt extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,pt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gt.prototype.create)}}class gt{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),i=this.errors[e],r=i?function(e,t){return e.replace(mt,(e,n)=>{const i=t[n];return null!=i?String(i):"<".concat(n,"?>")})}(i,t):"Error",s="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new pt(n,s,t)}}const mt=/\{\$([^}]+)}/g;function vt(e){return JSON.parse(e)}function yt(e){return JSON.stringify(e)}const _t=function(e){let t={},n={},i={},r="";try{const s=e.split(".");t=vt(Be(s[0])||""),n=vt(Be(s[1])||""),r=s[2],i=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:i,signature:r}};function bt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function wt(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function xt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function kt(e,t,n){const i={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=t.call(n,e[r],r,e));return i}function Et(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(Ct(n)&&Ct(s)){if(!Et(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function Ct(e){return null!==e&&"object"===typeof e}function St(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function Tt(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}}),t}function It(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Pt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let i,r,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],l=this.chain_[3],c=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(i=l^o&(a^l),r=1518500249):(i=o^a^l,r=1859775393):u<60?(i=o&a|l&(o|a),r=2400959708):(i=o^a^l,r=3395469782);const e=(s<<5|s>>>27)+i+c+r+n[u]&4294967295;c=l,l=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+c&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let i=0;const r=this.buf_;let s=this.inbuf_;for(;i<t;){if(0===s)for(;i<=n;)this.compress_(e,i),i+=this.blockSize;if("string"===typeof e){for(;i<t;)if(r[s]=e.charCodeAt(i),++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}else for(;i<t;)if(r[s]=e[i],++s,++i,s===this.blockSize){this.compress_(r),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let i=0;i<5;i++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[i]>>t&255,++n;return e}}class Rt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=Nt),void 0===i.error&&(i.error=Nt),void 0===i.complete&&(i.complete=Nt);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}}),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nt(){}function At(e,t){return"".concat(e," failed: ").concat(t," argument ")}const Ot=function(e){let t=0;for(let n=0;n<e.length;n++){const i=e.charCodeAt(n);i<128?t++:i<2048?t+=2:i>=55296&&i<=56319?(t+=4,n++):t+=3}return t};function Dt(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),i=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+i)}function Mt(e){return e&&e._delegate?e._delegate:e}class Lt{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const jt="[DEFAULT]";class Ft{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Je;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),i=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:jt})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:i});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&s.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(i){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===jt?void 0:r),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(s){}var r;return i||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jt;return this.component?this.component.multipleInstances?e:jt:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ut{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ft(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const Vt=[];var zt;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(zt||(zt={}));const Bt={debug:zt.DEBUG,verbose:zt.VERBOSE,info:zt.INFO,warn:zt.WARN,error:zt.ERROR,silent:zt.SILENT},Wt=zt.INFO,Ht={[zt.DEBUG]:"log",[zt.VERBOSE]:"log",[zt.INFO]:"info",[zt.WARN]:"warn",[zt.ERROR]:"error"},qt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),i=Ht[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var r=arguments.length,s=new Array(r>2?r-2:0),o=2;o<r;o++)s[o-2]=arguments[o];console[i]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Kt{constructor(e){this.name=e,this._logLevel=Wt,this._logHandler=qt,this._userLogHandler=null,Vt.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in zt))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Bt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,zt.DEBUG,...t),this._logHandler(this,zt.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,zt.VERBOSE,...t),this._logHandler(this,zt.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,zt.INFO,...t),this._logHandler(this,zt.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,zt.WARN,...t),this._logHandler(this,zt.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,zt.ERROR,...t),this._logHandler(this,zt.ERROR,...t)}}let Gt,Yt;const Qt=new WeakMap,$t=new WeakMap,Xt=new WeakMap,Jt=new WeakMap,Zt=new WeakMap;let en={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return $t.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Xt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return rn(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function tn(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Yt||(Yt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(sn(this),n),rn(Qt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return rn(e.apply(sn(this),n))}:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const s=e.call(sn(this),t,...i);return Xt.set(s,t.sort?t.sort():[t]),rn(s)}}function nn(e){return"function"===typeof e?tn(e):(e instanceof IDBTransaction&&function(e){if($t.has(e))return;const t=new Promise((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)});$t.set(e,t)}(e),t=e,(Gt||(Gt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,en):e);var t}function rn(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(rn(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&Qt.set(t,e)}).catch(()=>{}),Zt.set(t,e),t}(e);if(Jt.has(e))return Jt.get(e);const t=nn(e);return t!==e&&(Jt.set(e,t),Zt.set(t,e)),t}const sn=e=>Zt.get(e);function on(e,t){let{blocked:n,upgrade:i,blocking:r,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=rn(o);return i&&o.addEventListener("upgradeneeded",e=>{i(rn(o.result),e.oldVersion,e.newVersion,rn(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),r&&e.addEventListener("versionchange",e=>r(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}const an=["get","getKey","getAll","getAllKeys","count"],ln=["put","add","delete","clear"],cn=new Map;function un(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(cn.get(t))return cn.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=ln.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!an.includes(n))return;const s=async function(e){const t=this.transaction(e,r?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return i&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),r&&t.done]))[0]};return cn.set(t,s),s}!function(e){en=e(en)}(e=>c(c({},e),{},{get:(t,n,i)=>un(t,n)||e.get(t,n,i),has:(t,n)=>!!un(t,n)||e.has(t,n)}));class hn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const dn="@firebase/app",fn="0.13.1",pn=new Kt("@firebase/app"),gn="@firebase/app-compat",mn="@firebase/analytics-compat",vn="@firebase/analytics",yn="@firebase/app-check-compat",_n="@firebase/app-check",bn="@firebase/auth",wn="@firebase/auth-compat",xn="@firebase/database",kn="@firebase/data-connect",En="@firebase/database-compat",Cn="@firebase/functions",Sn="@firebase/functions-compat",Tn="@firebase/installations",In="@firebase/installations-compat",Pn="@firebase/messaging",Rn="@firebase/messaging-compat",Nn="@firebase/performance",An="@firebase/performance-compat",On="@firebase/remote-config",Dn="@firebase/remote-config-compat",Mn="@firebase/storage",Ln="@firebase/storage-compat",jn="@firebase/firestore",Fn="@firebase/ai",Un="@firebase/firestore-compat",Vn="firebase",zn="[DEFAULT]",Bn={[dn]:"fire-core",[gn]:"fire-core-compat",[vn]:"fire-analytics",[mn]:"fire-analytics-compat",[_n]:"fire-app-check",[yn]:"fire-app-check-compat",[bn]:"fire-auth",[wn]:"fire-auth-compat",[xn]:"fire-rtdb",[kn]:"fire-data-connect",[En]:"fire-rtdb-compat",[Cn]:"fire-fn",[Sn]:"fire-fn-compat",[Tn]:"fire-iid",[In]:"fire-iid-compat",[Pn]:"fire-fcm",[Rn]:"fire-fcm-compat",[Nn]:"fire-perf",[An]:"fire-perf-compat",[On]:"fire-rc",[Dn]:"fire-rc-compat",[Mn]:"fire-gcs",[Ln]:"fire-gcs-compat",[jn]:"fire-fst",[Un]:"fire-fst-compat",[Fn]:"fire-vertex","fire-js":"fire-js",[Vn]:"fire-js-all"},Wn=new Map,Hn=new Map,qn=new Map;function Kn(e,t){try{e.container.addComponent(t)}catch(n){pn.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Gn(e){const t=e.name;if(qn.has(t))return pn.debug("There were multiple attempts to register component ".concat(t,".")),!1;qn.set(t,e);for(const n of Wn.values())Kn(n,e);for(const n of Hn.values())Kn(n,e);return!0}function Yn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Qn(e){return null!==e&&void 0!==e&&void 0!==e.settings}const $n=new gt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Xn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Lt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $n.create("app-deleted",{appName:this._name})}}const Jn="11.9.0";function Zn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=Object.assign({name:zn,automaticDataCollectionEnabled:!0},t),r=i.name;if("string"!==typeof r||!r)throw $n.create("bad-app-name",{appName:String(r)});if(n||(n=$e()),!n)throw $n.create("no-options");const s=Wn.get(r);if(s){if(Et(n,s.options)&&Et(i,s.config))return s;throw $n.create("duplicate-app",{appName:r})}const o=new Ut(r);for(const l of qn.values())o.addComponent(l);const a=new Xn(n,i,o);return Wn.set(r,a),a}function ei(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zn;const t=Wn.get(e);if(!t&&e===zn&&$e())return Zn();if(!t)throw $n.create("no-app",{appName:e});return t}function ti(e,t,n){var i;let r=null!==(i=Bn[e])&&void 0!==i?i:e;n&&(r+="-".concat(n));const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(r,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void pn.warn(e.join(" "))}Gn(new Lt("".concat(r,"-version"),()=>({library:r,version:t}),"VERSION"))}const ni="firebase-heartbeat-store";let ii=null;function ri(){return ii||(ii=on("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ni)}catch(n){console.warn(n)}}}).catch(e=>{throw $n.create("idb-open",{originalErrorMessage:e.message})})),ii}async function si(e,t){try{const n=(await ri()).transaction(ni,"readwrite"),i=n.objectStore(ni);await i.put(t,oi(e)),await n.done}catch(n){if(n instanceof pt)pn.warn(n.message);else{const e=$n.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});pn.warn(e.message)}}}function oi(e){return"".concat(e.name,"!").concat(e.options.appId)}class ai{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ci(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=li();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(e=>e.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){pn.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=li(),{heartbeatsToSend:n,unsentEntries:i}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let i=e.slice();for(const r of e){const e=n.find(e=>e.agent===r.agent);if(e){if(e.dates.push(r.date),ui(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),ui(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=ze(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return pn.warn(t),""}}}function li(){return(new Date).toISOString().substring(0,10)}class ci{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!dt()&&ft().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ri()).transaction(ni),n=await t.objectStore(ni).get(oi(e));return await t.done,n}catch(t){if(t instanceof pt)pn.warn(t.message);else{const e=$n.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});pn.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return si(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return si(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ui(e){return ze(JSON.stringify({version:2,heartbeats:e})).length}var hi;hi="",Gn(new Lt("platform-logger",e=>new hn(e),"PRIVATE")),Gn(new Lt("heartbeat",e=>new ai(e),"PRIVATE")),ti(dn,fn,hi),ti(dn,fn,"esm2017"),ti("fire-js","");ti("firebase","11.9.1","app");const di="@firebase/installations",fi="0.6.17",pi=1e4,gi="w:".concat(fi),mi="FIS_v2",vi=36e5,yi=new gt("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function _i(e){return e instanceof pt&&e.code.includes("request-failed")}function bi(e){let{projectId:t}=e;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function wi(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function xi(e,t){const n=(await t.json()).error;return yi.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function ki(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Ei(e,t){let{refreshToken:n}=t;const i=ki(e);return i.append("Authorization",function(e){return"".concat(mi," ").concat(e)}(n)),i}async function Ci(e){const t=await e();return t.status>=500&&t.status<600?e():t}function Si(e){return new Promise(t=>{setTimeout(t,e)})}const Ti=/^[cdef][\w-]{21}$/;function Ii(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return Ti.test(t)?t:""}catch(e){return""}}function Pi(e){return"".concat(e.appName,"!").concat(e.appId)}const Ri=new Map;function Ni(e,t){const n=Pi(e);Ai(n,t),function(e,t){const n=Di();n&&n.postMessage({key:e,fid:t});Mi()}(n,t)}function Ai(e,t){const n=Ri.get(e);if(n)for(const i of n)i(t)}let Oi=null;function Di(){return!Oi&&"BroadcastChannel"in self&&(Oi=new BroadcastChannel("[Firebase] FID Change"),Oi.onmessage=e=>{Ai(e.data.key,e.data.fid)}),Oi}function Mi(){0===Ri.size&&Oi&&(Oi.close(),Oi=null)}const Li="firebase-installations-store";let ji=null;function Fi(){return ji||(ji=on("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Li)}})),ji}async function Ui(e,t){const n=Pi(e),i=(await Fi()).transaction(Li,"readwrite"),r=i.objectStore(Li),s=await r.get(n);return await r.put(t,n),await i.done,s&&s.fid===t.fid||Ni(e,t.fid),t}async function Vi(e){const t=Pi(e),n=(await Fi()).transaction(Li,"readwrite");await n.objectStore(Li).delete(t),await n.done}async function zi(e,t){const n=Pi(e),i=(await Fi()).transaction(Li,"readwrite"),r=i.objectStore(Li),s=await r.get(n),o=t(s);return void 0===o?await r.delete(n):await r.put(o,n),await i.done,!o||s&&s.fid===o.fid||Ni(e,o.fid),o}async function Bi(e){let t;const n=await zi(e.appConfig,n=>{const i=function(e){const t=e||{fid:Ii(),registrationStatus:0};return qi(t)}(n),r=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(yi.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:i}=e,{fid:r}=t;const s=bi(n),o=ki(n),a=i.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&o.append("x-firebase-client",e)}const l={fid:r,authVersion:mi,appId:n.appId,sdkVersion:gi},c={method:"POST",headers:o,body:JSON.stringify(l)},u=await Ci(()=>fetch(s,c));if(u.ok){const e=await u.json();return{fid:e.fid||r,registrationStatus:2,refreshToken:e.refreshToken,authToken:wi(e.authToken)}}throw await xi("Create Installation",u)}(e,t);return Ui(e.appConfig,n)}catch(n){throw _i(n)&&409===n.customData.serverCode?await Vi(e.appConfig):await Ui(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:i}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Wi(e)}:{installationEntry:t}}(e,i);return t=r.registrationPromise,r.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Wi(e){let t=await Hi(e.appConfig);for(;1===t.registrationStatus;)await Si(100),t=await Hi(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Bi(e);return n||t}return t}function Hi(e){return zi(e,e=>{if(!e)throw yi.create("installation-not-found");return qi(e)})}function qi(e){return 1===(t=e).registrationStatus&&t.registrationTime+pi<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Ki(e,t){let{appConfig:n,heartbeatServiceProvider:i}=e;const r=function(e,t){let{fid:n}=t;return"".concat(bi(e),"/").concat(n,"/authTokens:generate")}(n,t),s=Ei(n,t),o=i.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&s.append("x-firebase-client",e)}const a={installation:{sdkVersion:gi,appId:n.appId}},l={method:"POST",headers:s,body:JSON.stringify(a)},c=await Ci(()=>fetch(r,l));if(c.ok){return wi(await c.json())}throw await xi("Generate Auth Token",c)}async function Gi(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=await zi(e.appConfig,i=>{if(!Qi(i))throw yi.create("not-registered");const r=i.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+vi}(e)}(r))return i;if(1===r.requestStatus)return t=async function(e,t){let n=await Yi(e.appConfig);for(;1===n.authToken.requestStatus;)await Si(100),n=await Yi(e.appConfig);const i=n.authToken;return 0===i.requestStatus?Gi(e,t):i}(e,n),i;{if(!navigator.onLine)throw yi.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(i);return t=async function(e,t){try{const n=await Ki(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return await Ui(e.appConfig,i),n}catch(n){if(!_i(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await Ui(e.appConfig,n)}else await Vi(e.appConfig);throw n}}(e,n),n}});return t?await t:i.authToken}function Yi(e){return zi(e,e=>{if(!Qi(e))throw yi.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+pi<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var n})}function Qi(e){return void 0!==e&&2===e.registrationStatus}async function $i(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await Bi(e);t&&await t}(n);return(await Gi(n,t)).token}function Xi(e){return yi.create("missing-app-config-values",{valueName:e})}const Ji="installations",Zi=e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw Xi("App Configuration");if(!e.name)throw Xi("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Xi(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Yn(t,"heartbeat"),_delete:()=>Promise.resolve()}},er=e=>{const t=Yn(e.getProvider("app").getImmediate(),Ji).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:i}=await Bi(t);return i?i.catch(console.error):Gi(t).catch(console.error),n.fid}(t),getToken:e=>$i(t,e)}};Gn(new Lt(Ji,Zi,"PUBLIC")),Gn(new Lt("installations-internal",er,"PRIVATE")),ti(di,fi),ti(di,fi,"esm2017");const tr="analytics",nr="https://www.googletagmanager.com/gtag/js",ir=new Kt("@firebase/analytics"),rr=new gt("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function sr(e){if(!e.startsWith(nr)){const t=rr.create("invalid-gtag-resource",{gtagURL:e});return ir.warn(t.message),""}return e}function or(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function ar(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:sr}),i=document.createElement("script"),r="".concat(nr,"?l=").concat(e,"&id=").concat(t);i.src=n?null===n||void 0===n?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function lr(e,t,n,i){return async function(r){try{for(var s=arguments.length,o=new Array(s>1?s-1:0),a=1;a<s;a++)o[a-1]=arguments[a];if("event"===r){const[i,r]=o;await async function(e,t,n,i,r){try{let s=[];if(r&&r.send_to){let e=r.send_to;Array.isArray(e)||(e=[e]);const i=await or(n);for(const n of e){const e=i.find(e=>e.measurementId===n),r=e&&t[e.appId];if(!r){s=[];break}s.push(r)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",i,r||{})}catch(s){ir.error(s)}}(e,t,n,i,r)}else if("config"===r){const[r,s]=o;await async function(e,t,n,i,r,s){const o=i[r];try{if(o)await t[o];else{const e=(await or(n)).find(e=>e.measurementId===r);e&&await t[e.appId]}}catch(a){ir.error(a)}e("config",r,s)}(e,t,n,i,r,s)}else if("consent"===r){const[t,n]=o;e("consent",t,n)}else if("get"===r){const[t,n,i]=o;e("get",t,n,i)}else if("set"===r){const[t]=o;e("set",t)}else e(r,...o)}catch(l){ir.error(l)}}}const cr=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function ur(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function hr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cr,n=arguments.length>2?arguments[2]:void 0;const{appId:i,apiKey:r,measurementId:s}=e.options;if(!i)throw rr.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw rr.create("no-api-key")}const o=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new fr;return setTimeout(async()=>{a.abort()},void 0!==n?n:6e4),dr({appId:i,apiKey:r,measurementId:s},o,a,t)}async function dr(e,t,n){let{throttleEndTimeMillis:i,backoffCount:r}=t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:cr;var o;const{appId:a,measurementId:l}=e;try{await function(e,t){return new Promise((n,i)=>{const r=Math.max(t-Date.now(),0),s=setTimeout(n,r);e.addEventListener(()=>{clearTimeout(s),i(rr.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(n,i)}catch(c){if(l)return ir.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===c||void 0===c?void 0:c.message,"]")),{appId:a,measurementId:l};throw c}try{const t=await async function(e){var t;const{appId:n,apiKey:i}=e,r={method:"GET",headers:ur(i)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),o=await fetch(s,r);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw rr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return s.deleteThrottleMetadata(a),t}catch(c){const t=c;if(!function(e){if(!(e instanceof pt)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(s.deleteThrottleMetadata(a),l)return ir.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(l)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===t||void 0===t?void 0:t.message,"]")),{appId:a,measurementId:l};throw c}const i=503===Number(null===(o=null===t||void 0===t?void 0:t.customData)||void 0===o?void 0:o.httpStatus)?Dt(r,s.intervalMillis,30):Dt(r,s.intervalMillis),u={throttleEndTimeMillis:Date.now()+i,backoffCount:r+1};return s.setThrottleMetadata(a,u),ir.debug("Calling attemptFetch again in ".concat(i," millis")),dr(e,u,n,s)}}class fr{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let pr,gr;function mr(e){gr=e}function vr(e){pr=e}async function yr(e,t,n,i,r,s,o){var a;const l=hr(e);l.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&ir.warn("The measurement ID in the local Firebase config (".concat(e.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(t.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(e=>ir.error(e)),t.push(l);const c=async function(){if(!dt())return ir.warn(rr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await ft()}catch(e){return ir.warn(rr.create("indexeddb-unavailable",{errorInfo:null===e||void 0===e?void 0:e.toString()}).message),!1}return!0}().then(e=>e?i.getId():void 0),[u,h]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(nr)&&n.src.includes(e))return n;return null})(s)||ar(s,u.measurementId),gr&&(r("consent","default",gr),mr(void 0)),r("js",new Date);const d=null!==(a=null===o||void 0===o?void 0:o.config)&&void 0!==a?a:{};return d.origin="firebase",d.update=!0,null!=h&&(d.firebase_id=h),r("config",u.measurementId,d),pr&&(r("set",pr),vr(void 0)),u.measurementId}class _r{constructor(e){this.app=e}_delete(){return delete br[this.app.options.appId],Promise.resolve()}}let br={},wr=[];const xr={};let kr,Er,Cr="dataLayer",Sr="gtag",Tr=!1;function Ir(){const e=[];if(lt()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(" "),n=rr.create("invalid-analytics-context",{errorInfo:t});ir.warn(n.message)}}function Pr(e,t,n){Ir();const i=e.options.appId;if(!i)throw rr.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw rr.create("no-api-key");ir.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=br[i])throw rr.create("already-exists",{id:i});if(!Tr){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(Cr);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,i,r){let s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[i].push(arguments)};return window[r]&&"function"===typeof window[r]&&(s=window[r]),window[r]=lr(s,e,t,n),{gtagCore:s,wrappedGtag:window[r]}}(br,wr,xr,Cr,Sr);Er=e,kr=t,Tr=!0}br[i]=yr(e,wr,xr,t,kr,Cr,n);return new _r(e)}function Rr(e,t,n,i){e=Mt(e),async function(e,t,n,i,r){if(r&&r.global)e("event",n,i);else{const r=await t;e("event",n,Object.assign(Object.assign({},i),{send_to:r}))}}(Er,br[e.app.options.appId],t,n,i).catch(e=>ir.error(e))}const Nr="@firebase/analytics",Ar="0.10.16";Gn(new Lt(tr,(e,t)=>{let{options:n}=t;return Pr(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)},"PUBLIC")),Gn(new Lt("analytics-internal",function(e){try{const t=e.getProvider(tr).getImmediate();return{logEvent:(e,n,i)=>Rr(t,e,n,i)}}catch(t){throw rr.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),ti(Nr,Ar),ti(Nr,Ar,"esm2017");function Or(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function Dr(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Mr=Dr,Lr=new gt("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),jr=new Kt("@firebase/auth");function Fr(e){if(jr.logLevel<=zt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];jr.error("Auth (".concat(Jn,"): ").concat(e),...n)}}function Ur(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw Hr(e,...n)}function Vr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Hr(e,...n)}function zr(e,t,n){const i=Object.assign(Object.assign({},Mr()),{[t]:n});return new gt("auth","Firebase",i).create(t,{appName:e.name})}function Br(e){return zr(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Wr(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Ur(e,"argument-error"),zr(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Hr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if("string"!==typeof e){const t=n[0],i=[...n.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(t,...i)}return Lr.create(e,...n)}function qr(e,t){if(!e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];throw Hr(t,...i)}}function Kr(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Fr(t),new Error(t)}function Gr(e,t){e||Kr(t)}function Yr(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Qr(){return"http:"===$r()||"https:"===$r()}function $r(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Xr{constructor(e,t){this.shortDelay=e,this.longDelay=t,Gr(t>e,"Short delay should be less than long delay!"),this.isMobile=ot()||ct()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Qr()||lt()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Jr(e,t){Gr(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Zr{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const es={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},ts=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ns=new Xr(3e4,6e4);function is(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function rs(e,t,n,i){return ss(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let r={},s={};i&&("GET"===t?s=i:r={body:JSON.stringify(i)});const o=St(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:a},r);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&Ze(e.emulatorConfig.host)&&(l.credentials="include"),Zr.fetch()(await as(e,e.config.apiHost,n,o),l)})}async function ss(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},es),t);try{const t=new cs(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw us(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw us(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw us(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw us(e,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw zr(e,a,o);Ur(e,a)}}catch(r){if(r instanceof pt)throw r;Ur(e,"network-request-failed",{message:String(r)})}}async function os(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await rs(e,t,n,i,r);return"mfaPendingCredential"in s&&Ur(e,"multi-factor-auth-required",{_serverResponse:s}),s}async function as(e,t,n,i){const r="".concat(t).concat(n,"?").concat(i),s=e,o=s.config.emulator?Jr(e.config,r):"".concat(e.config.apiScheme,"://").concat(r);if(ts.includes(n)&&(await s._persistenceManagerAvailable,"COOKIE"===s._getPersistenceType())){return s._getPersistence()._getFinalTarget(o).toString()}return o}function ls(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class cs{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Vr(this.auth,"network-request-failed")),ns.get())})}}function us(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Vr(e,t,i);return r.customData._tokenResponse=n,r}function hs(e){return void 0!==e&&void 0!==e.enterprise}class ds{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return ls(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function fs(e,t){return rs(e,"GET","/v2/recaptchaConfig",is(e,t))}async function ps(e,t){return rs(e,"POST","/v1/accounts:lookup",t)}function gs(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function ms(e){return 1e3*Number(e)}function vs(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return Fr("JWT malformed, contained fewer than 3 sections"),null;try{const e=Be(n);return e?JSON.parse(e):(Fr("Failed to decode base64 JWT payload"),null)}catch(r){return Fr("Caught error parsing JWT payload as JSON",null===r||void 0===r?void 0:r.toString()),null}}function ys(e){const t=vs(e);return qr(t,"internal-error"),qr("undefined"!==typeof t.exp,"internal-error"),qr("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function _s(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof pt&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class bs{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class ws{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=gs(this.lastLoginAt),this.creationTime=gs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function xs(e){var t;const n=e.auth,i=await e.getIdToken(),r=await _s(e,ps(n,{idToken:i}));qr(null===r||void 0===r?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?ks(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ws(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function ks(e){return e.map(e=>{var{providerId:t}=e,n=Or(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Es{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qr(e.idToken,"internal-error"),qr("undefined"!==typeof e.idToken,"internal-error"),qr("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):ys(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){qr(0!==e.length,"internal-error");const t=ys(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(qr(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(e,t){const n=await ss(e,{},async()=>{const n=St({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,s=await as(e,i,"/v1/token","key=".concat(r)),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:o,body:n};return e.emulatorConfig&&Ze(e.emulatorConfig.host)&&(a.credentials="include"),Zr.fetch()(s,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new Es;return n&&(qr("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(qr("string"===typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(qr("number"===typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Es,this.toJSON())}_performRefresh(){return Kr("not implemented")}}function Cs(e,t){qr("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Ss{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=Or(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new ws(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await _s(this,this.stsTokenManager.getToken(this.auth,e));return qr(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Mt(e),i=await n.getIdToken(t),r=vs(i);qr(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"===typeof r.firebase?r.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:gs(ms(r.auth_time)),issuedAtTime:gs(ms(r.iat)),expirationTime:gs(ms(r.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Mt(e);await xs(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(qr(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ss(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){qr(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await xs(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Qn(this.auth.app))return Promise.reject(Br(this.auth));const e=await this.getIdToken();return await _s(this,async function(e,t){return rs(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:_,isAnonymous:b,providerData:w,stsTokenManager:x}=t;qr(y&&x,e,"internal-error");const k=Es.fromJSON(this.name,x);qr("string"===typeof y,e,"internal-error"),Cs(u,e.name),Cs(h,e.name),qr("boolean"===typeof _,e,"internal-error"),qr("boolean"===typeof b,e,"internal-error"),Cs(d,e.name),Cs(f,e.name),Cs(p,e.name),Cs(g,e.name),Cs(m,e.name),Cs(v,e.name);const E=new Ss({uid:y,auth:e,email:h,emailVerified:_,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:k,createdAt:m,lastLoginAt:v});return w&&Array.isArray(w)&&(E.providerData=w.map(e=>Object.assign({},e))),g&&(E._redirectEventId=g),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=new Es;i.updateFromServerResponse(t);const r=new Ss({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await xs(r),r}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];qr(void 0!==i.localId,"internal-error");const r=void 0!==i.providerUserInfo?ks(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(null===r||void 0===r?void 0:r.length),o=new Es;o.updateFromIdToken(n);const a=new Ss({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new ws(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(null===r||void 0===r?void 0:r.length)};return Object.assign(a,l),a}}const Ts=new Map;function Is(e){Gr(e instanceof Function,"Expected a class definition");let t=Ts.get(e);return t?(Gr(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ts.set(e,t),t)}class Ps{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ps.type="NONE";const Rs=Ps;function Ns(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class As{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=Ns(this.userKey,i.apiKey,r),this.fullPersistenceKey=Ns("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await ps(this.auth,{idToken:e}).catch(()=>{});return t?Ss._fromGetAccountInfoResponse(this.auth,t,e):null}return Ss._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new As(Is(Rs),e,n);const i=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let r=i[0]||Is(Rs);const s=Ns(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){let n;if("string"===typeof t){const i=await ps(e,{idToken:t}).catch(()=>{});if(!i)break;n=await Ss._fromGetAccountInfoResponse(e,i,t)}else n=Ss._fromJSON(e,t);c!==r&&(o=n),r=c;break}}catch(l){}const a=i.filter(e=>e._shouldAllowMigration);return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==r)try{await e._remove(s)}catch(l){}})),new As(r,e,n)):new As(r,e,n)}}function Os(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(js(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ds(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Us(t))return"Blackberry";if(Vs(t))return"Webos";if(Ms(t))return"Safari";if((t.includes("chrome/")||Ls(t))&&!t.includes("edge/"))return"Chrome";if(Fs(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Ds(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st();return/firefox\//i.test(e)}function Ms(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:st()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ls(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st();return/crios\//i.test(e)}function js(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st();return/iemobile/i.test(e)}function Fs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st();return/android/i.test(e)}function Us(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st();return/blackberry/i.test(e)}function Vs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st();return/webos/i.test(e)}function zs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Bs(){return function(){const e=st();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Ws(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st();return zs(e)||Fs(e)||Vs(e)||Us(e)||/windows phone/i.test(e)||js(e)}function Hs(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Os(st());break;case"Worker":t="".concat(Os(st()),"-").concat(e);break;default:t=e}const i=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Jn,"/").concat(i)}class qs{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,i)=>{try{n(e(t))}catch(r){i(r)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(i){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Ks{constructor(e){var t,n,i,r;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(r=e.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,r,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(i=a.containsLowercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(r=a.containsUppercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}class Gs{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qs(this),this.idTokenSubscription=new Qs(this),this.beforeStateQueue=new qs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Lr,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Is(t)),this._initializationPromise=this.queue(async()=>{var n,i,r;if(!this._deleted&&(this.persistenceManager=await As.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null===(i=this._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(s){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await ps(this,{idToken:e}),n=await Ss._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Qn(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return qr(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xs(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Qn(this.app))return Promise.reject(Br(this));const t=e?Mt(e):null;return t&&qr(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&qr(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Qn(this.app)?Promise.reject(Br(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Qn(this.app)?Promise.reject(Br(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Is(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return rs(e,"GET","/v2/passwordPolicy",is(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Ks(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gt("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return rs(e,"POST","/v2/accounts:revokeToken",is(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Is(e)||this._popupRedirectResolver;qr(t,this,"argument-error"),this.redirectPersistenceManager=await As.create(this,[Is(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(qr(o,this,"internal-error"),o.then(()=>{s||r(this.currentUser)}),"function"===typeof t){const r=e.addObserver(t,n,i);return()=>{s=!0,r()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qr(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Hs(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;if(Qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(jr.logLevel<=zt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];jr.warn("Auth (".concat(Jn,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ys(e){return Mt(e)}class Qs{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new Rt(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return qr(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let $s={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Xs(e){return $s.loadJS(e)}function Js(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Zs{constructor(){this.enterprise=new eo}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class eo{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const to="NO_RECAPTCHA";class no{constructor(e){this.type="recaptcha-enterprise",this.auth=Ys(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,i){const r=window.grecaptcha;hs(r)?r.enterprise.ready(()=>{r.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(to)})}):i(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Zs).execute("siteKey",{action:"verify"})}return new Promise((e,i)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{fs(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(i=>{if(void 0!==i.recaptchaKey){const n=new ds(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(r=>{if(!t&&hs(window.grecaptcha))n(r,e,i);else{if("undefined"===typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let t=$s.recaptchaEnterpriseScript;0!==t.length&&(t+=r),Xs(t).then(()=>{n(r,e,i)}).catch(e=>{i(e)})}}).catch(e=>{i(e)})})}}async function io(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new no(e);let o;if(r)o=to;else try{o=await s.verify(n)}catch(zp){o=await s.verify(n,!0)}const a=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in a){const e=a.phoneEnrollmentInfo.phoneNumber,t=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const e=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return i?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ro(e,t,n,i,r){var s,o;if("EMAIL_PASSWORD_PROVIDER"===r){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await io(e,t,n,"getOobCode"===n);return i(e,r)}return i(e,t).catch(async r=>{if(r.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const r=await io(e,t,n,"getOobCode"===n);return i(e,r)}return Promise.reject(r)})}if("PHONE_PROVIDER"===r){if(null===(o=e._getRecaptchaConfig())||void 0===o?void 0:o.isProviderEnabled("PHONE_PROVIDER")){const r=await io(e,t,n);return i(e,r).catch(async r=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(r.code==="auth/".concat("missing-recaptcha-token")||r.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const r=await io(e,t,n,!1,!0);return i(e,r)}return Promise.reject(r)})}{const r=await io(e,t,n,!1,!0);return i(e,r)}}return Promise.reject(r+" provider is not supported.")}async function so(e){const t=Ys(e),n=await fs(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new ds(n);if(null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,i.isAnyProviderEnabled()){new no(t).verify()}}function oo(e,t,n){const i=Ys(e);qr(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!!(null===n||void 0===n?void 0:n.disableWarnings),s=ao(t),{host:o,port:a}=function(e){const t=ao(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const e=r[1];return{host:e,port:lo(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:lo(t)}}}(t),l=null===a?"":":".concat(a),c={url:"".concat(s,"//").concat(o).concat(l,"/")},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator)return qr(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),void qr(Et(c,i.config.emulator)&&Et(u,i.emulatorConfig),i,"emulator-config-failed");i.config.emulator=c,i.emulatorConfig=u,i.settings.appVerificationDisabledForTesting=!0,Ze(o)?(et("".concat(s,"//").concat(o).concat(l)),rt("Auth",!0)):r||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function ao(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function lo(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class co{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Kr("not implemented")}_getIdTokenResponse(e){return Kr("not implemented")}_linkToIdToken(e,t){return Kr("not implemented")}_getReauthenticationResolver(e){return Kr("not implemented")}}async function uo(e,t){return rs(e,"POST","/v1/accounts:signUp",t)}async function ho(e,t){return os(e,"POST","/v1/accounts:signInWithPassword",is(e,t))}async function fo(e,t){return rs(e,"POST","/v1/accounts:sendOobCode",is(e,t))}async function po(e,t){return fo(e,t)}class go extends co{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new go(e,t,"password")}static _fromEmailAndCode(e,t){return new go(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return ro(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ho,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return os(e,"POST","/v1/accounts:signInWithEmailLink",is(e,t))}(e,{email:this._email,oobCode:this._password});default:Ur(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ro(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",uo,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return os(e,"POST","/v1/accounts:signInWithEmailLink",is(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Ur(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function mo(e,t){return os(e,"POST","/v1/accounts:signInWithIdp",is(e,t))}class vo extends co{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new vo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ur("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=Or(t,["providerId","signInMethod"]);if(!n||!i)return null;const s=new vo(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(e){return mo(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,mo(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,mo(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=St(t)}return e}}async function yo(e,t){return rs(e,"POST","/v1/accounts:sendVerificationCode",is(e,t))}const _o={USER_NOT_FOUND:"user-not-found"};class bo extends co{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new bo({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new bo({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return os(e,"POST","/v1/accounts:signInWithPhoneNumber",is(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await os(e,"POST","/v1/accounts:signInWithPhoneNumber",is(e,t));if(n.temporaryProof)throw us(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return os(e,"POST","/v1/accounts:signInWithPhoneNumber",is(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),_o)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new bo({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class wo{constructor(e){var t,n,i,r,s,o;const a=Tt(It(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);qr(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.lang)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Tt(It(e)).link,n=t?Tt(It(t)).deep_link_id:null,i=Tt(It(e)).deep_link_id;return(i?Tt(It(i)).link:null)||i||n||t||e}(e);try{return new wo(t)}catch(n){return null}}}class xo{constructor(){this.providerId=xo.PROVIDER_ID}static credential(e,t){return go._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=wo.parseLink(t);return qr(n,"argument-error"),go._fromEmailAndCode(e,n.code,n.tenantId)}}xo.PROVIDER_ID="password",xo.EMAIL_PASSWORD_SIGN_IN_METHOD="password",xo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class ko{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Eo extends ko{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Co extends Eo{constructor(){super("facebook.com")}static credential(e){return vo._fromParams({providerId:Co.PROVIDER_ID,signInMethod:Co.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Co.credentialFromTaggedObject(e)}static credentialFromError(e){return Co.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Co.credential(t.oauthAccessToken)}catch(n){return null}}}Co.FACEBOOK_SIGN_IN_METHOD="facebook.com",Co.PROVIDER_ID="facebook.com";class So extends Eo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return vo._fromParams({providerId:So.PROVIDER_ID,signInMethod:So.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return So.credentialFromTaggedObject(e)}static credentialFromError(e){return So.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return So.credential(n,i)}catch(r){return null}}}So.GOOGLE_SIGN_IN_METHOD="google.com",So.PROVIDER_ID="google.com";class To extends Eo{constructor(){super("github.com")}static credential(e){return vo._fromParams({providerId:To.PROVIDER_ID,signInMethod:To.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return To.credentialFromTaggedObject(e)}static credentialFromError(e){return To.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return To.credential(t.oauthAccessToken)}catch(n){return null}}}To.GITHUB_SIGN_IN_METHOD="github.com",To.PROVIDER_ID="github.com";class Io extends Eo{constructor(){super("twitter.com")}static credential(e,t){return vo._fromParams({providerId:Io.PROVIDER_ID,signInMethod:Io.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Io.credentialFromTaggedObject(e)}static credentialFromError(e){return Io.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return Io.credential(n,i)}catch(r){return null}}}async function Po(e,t){return os(e,"POST","/v1/accounts:signUp",is(e,t))}Io.TWITTER_SIGN_IN_METHOD="twitter.com",Io.PROVIDER_ID="twitter.com";class Ro{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=await Ss._fromIdTokenResponse(e,n,i),s=No(n);return new Ro({user:r,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=No(n);return new Ro({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function No(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Ao extends pt{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,Ao.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new Ao(e,t,n,i)}}function Oo(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Ao._fromErrorAndOperation(e,n,t,i);throw n})}async function Do(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=await _s(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Ro._forOperation(e,"link",i)}async function Mo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=e;if(Qn(i.app))return Promise.reject(Br(i));const r="reauthenticate";try{const s=await _s(e,Oo(i,r,t,e),n);qr(s.idToken,i,"internal-error");const o=vs(s.idToken);qr(o,i,"internal-error");const{sub:a}=o;return qr(e.uid===a,i,"user-mismatch"),Ro._forOperation(e,r,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&Ur(i,"user-mismatch"),s}}async function Lo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Qn(e.app))return Promise.reject(Br(e));const i="signIn",r=await Oo(e,i,t),s=await Ro._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}async function jo(e,t){return Lo(Ys(e),t)}function Fo(e,t,n){var i;qr((null===(i=n.url)||void 0===i?void 0:i.length)>0,e,"invalid-continue-uri"),qr("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),qr("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(qr(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(qr(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function Uo(e){const t=Ys(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Vo(e,t){const n=Mt(e),i={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&Fo(n.auth,i,t);const{email:r}=await async function(e,t){return fo(e,t)}(n.auth,i);r!==e.email&&await e.reload()}async function zo(e,t,n){const{auth:i}=e,r={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(r.email=t),n&&(r.password=n);const s=await _s(e,async function(e,t){return rs(e,"POST","/v1/accounts:update",t)}(i,r));await e._updateTokensIfNecessary(s,!0)}function Bo(e){return Mt(e).signOut()}function Wo(e,t){return rs(e,"POST","/v2/accounts/mfaEnrollment:start",is(e,t))}new WeakMap;const Ho="__sak";class qo{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ho,"1"),this.storage.removeItem(Ho),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Ko extends qo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ws(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);Bs()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ko.type="LOCAL";const Go=Ko;function Yo(e){var t,n;const i=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),r=RegExp("".concat(i,"=([^;]+)"));return null!==(n=null===(t=document.cookie.match(r))||void 0===t?void 0:t[1])&&void 0!==n?n:null}function Qo(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class $o{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Qo(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Yo(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Qo(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Qo(e);if(window.cookieStore){const e=e=>{const i=e.changed.find(e=>e.name===n);i&&t(i.value);e.deleted.find(e=>e.name===n)&&t(null)},i=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,i),window.cookieStore.addEventListener("change",e)}let i=Yo(n);const r=setInterval(()=>{const e=Yo(n);e!==i&&(t(e),i=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(r))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}$o.type="COOKIE";class Xo extends qo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Xo.type="SESSION";const Jo=Xo;class Zo{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Zo(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,s=this.handlersMap[i];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map(async e=>e(t.origin,r)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function ea(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let i=0;i<t;i++)n+=Math.floor(10*Math.random());return e+n}Zo.receivers=[];class ta{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise((o,a)=>{const l=ea("",20);i.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),r=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),o(t.data.response);break;default:clearTimeout(c),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function na(){return window}function ia(){return"undefined"!==typeof na().WorkerGlobalScope&&"function"===typeof na().importScripts}const ra="firebaseLocalStorageDb",sa="firebaseLocalStorage",oa="fbase_key";class aa{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function la(e,t){return e.transaction([sa],t?"readwrite":"readonly").objectStore(sa)}function ca(){const e=indexedDB.open(ra,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(sa,{keyPath:oa})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(sa)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(ra);return new aa(e).toPromise()}(),t(await ca()))})})}async function ua(e,t,n){const i=la(e,!0).put({[oa]:t,value:n});return new aa(i).toPromise()}function ha(e,t){const n=la(e,!0).delete(t);return new aa(n).toPromise()}class da{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await ca()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ia()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Zo._getInstance(ia()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new ta(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ca();return await ua(e,Ho,"1"),await ha(e,Ho),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ua(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=la(e,!1).get(t),i=await new aa(n).toPromise();return void 0===i?null:i.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ha(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=la(e,!1).getAll();return new aa(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}da.type="LOCAL";const fa=da;function pa(e,t){return rs(e,"POST","/v2/accounts/mfaSignIn:start",is(e,t))}Js("rcb"),new Xr(3e4,6e4);const ga="recaptcha";async function ma(e,t,n){var i;if(!e._getRecaptchaConfig())try{await so(e)}catch(zp){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let r;if(r="string"===typeof t?{phoneNumber:t}:t,"session"in r){const t=r.session;if("phoneNumber"in r){qr("enroll"===t.type,e,"internal-error");const i={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=ro(e,i,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===to){qr((null===n||void 0===n?void 0:n.type)===ga,e,"argument-error");return Wo(e,await va(e,t,n))}return Wo(e,t)},"PHONE_PROVIDER"),o=await s.catch(e=>Promise.reject(e));return o.phoneSessionInfo.sessionInfo}{qr("signin"===t.type,e,"internal-error");const s=(null===(i=r.multiFactorHint)||void 0===i?void 0:i.uid)||r.multiFactorUid;qr(s,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=ro(e,o,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===to){qr((null===n||void 0===n?void 0:n.type)===ga,e,"argument-error");return pa(e,await va(e,t,n))}return pa(e,t)},"PHONE_PROVIDER"),l=await a.catch(e=>Promise.reject(e));return l.phoneResponseInfo.sessionInfo}}{const t={phoneNumber:r.phoneNumber,clientType:"CLIENT_TYPE_WEB"},i=ro(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===to){qr((null===n||void 0===n?void 0:n.type)===ga,e,"argument-error");return yo(e,await va(e,t,n))}return yo(e,t)},"PHONE_PROVIDER"),s=await i.catch(e=>Promise.reject(e));return s.sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function va(e,t,n){qr(n.type===ga,e,"argument-error");const i=await n.verify();qr("string"===typeof i,e,"argument-error");const r=Object.assign({},t);if("phoneEnrollmentInfo"in r){const e=r.phoneEnrollmentInfo.phoneNumber,t=r.phoneEnrollmentInfo.captchaResponse,n=r.phoneEnrollmentInfo.clientType,s=r.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(r,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:i,captchaResponse:t,clientType:n,recaptchaVersion:s}}),r}if("phoneSignInInfo"in r){const e=r.phoneSignInInfo.captchaResponse,t=r.phoneSignInInfo.clientType,n=r.phoneSignInInfo.recaptchaVersion;return Object.assign(r,{phoneSignInInfo:{recaptchaToken:i,captchaResponse:e,clientType:t,recaptchaVersion:n}}),r}return Object.assign(r,{recaptchaToken:i}),r}class ya{constructor(e){this.providerId=ya.PROVIDER_ID,this.auth=Ys(e)}verifyPhoneNumber(e,t){return ma(this.auth,e,Mt(t))}static credential(e,t){return bo._fromVerification(e,t)}static credentialFromResult(e){const t=e;return ya.credentialFromTaggedObject(t)}static credentialFromError(e){return ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:i}=t;return n&&i?bo._fromTokenResponse(n,i):null}}function _a(e,t){return t?Is(t):(qr(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}ya.PROVIDER_ID="phone",ya.PHONE_SIGN_IN_METHOD="phone";class ba extends co{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return mo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return mo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return mo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function wa(e){return Lo(e.auth,new ba(e),e.bypassAuthState)}function xa(e){const{auth:t,user:n}=e;return qr(n,t,"internal-error"),Mo(n,new ba(e),e.bypassAuthState)}async function ka(e){const{auth:t,user:n}=e;return qr(n,t,"internal-error"),Do(n,new ba(e),e.bypassAuthState)}class Ea{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return wa;case"linkViaPopup":case"linkViaRedirect":return ka;case"reauthViaPopup":case"reauthViaRedirect":return xa;default:Ur(this.auth,"internal-error")}}resolve(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Ca=new Xr(2e3,1e4);class Sa extends Ea{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,Sa.currentPopupAction&&Sa.currentPopupAction.cancel(),Sa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qr(e,this.auth,"internal-error"),e}async onExecution(){Gr(1===this.filter.length,"Popup operations only handle one event");const e=ea();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Vr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Vr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Vr(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Ca.get())};e()}}Sa.currentPopupAction=null;const Ta=new Map;class Ia extends Ea{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Ta.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Na(t),i=Ra(e);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Ta.set(this.auth._key(),e)}return this.bypassAuthState||Ta.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Pa(e,t){Ta.set(e._key(),t)}function Ra(e){return Is(e._redirectPersistence)}function Na(e){return Ns("pendingRedirect",e.config.apiKey,e.name)}async function Aa(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Qn(e.app))return Promise.reject(Br(e));const i=Ys(e),r=_a(i,t),s=new Ia(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}class Oa{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ma(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Ma(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Vr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Da(e))}saveEventToCache(e){this.cachedEventUids.add(Da(e)),this.lastProcessedEventTime=Date.now()}}function Da(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Ma(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const La=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ja=/^https?/;async function Fa(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return rs(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const i of t)try{if(Ua(i))return}catch(n){}Ur(e,"unauthorized-domain")}function Ua(e){const t=Yr(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!ja.test(n))return!1;if(La.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const Va=new Xr(3e4,6e4);function za(){const e=na().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Ba(e){return new Promise((t,n)=>{var i,r,s;function o(){za(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{za(),n(Vr(e,"network-request-failed"))},timeout:Va.get()})}if(null===(r=null===(i=na().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=na().gapi)||void 0===s?void 0:s.load)){const t=Js("iframefcb");return na()[t]=()=>{gapi.load?o():n(Vr(e,"network-request-failed"))},Xs("".concat($s.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}o()}}).catch(e=>{throw Wa=null,e})}let Wa=null;const Ha=new Xr(5e3,15e3),qa={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ka=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ga(e){const t=e.config;qr(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Jr(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),i={apiKey:t.apiKey,appName:e.name,v:Jn},r=Ka.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),"".concat(n,"?").concat(St(i).slice(1))}async function Ya(e){const t=await function(e){return Wa=Wa||Ba(e),Wa}(e),n=na().gapi;return qr(n,e,"internal-error"),t.open({where:document.body,url:Ga(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qa,dontclear:!0},t=>new Promise(async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=Vr(e,"network-request-failed"),s=na().setTimeout(()=>{i(r)},Ha.get());function o(){na().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{i(r)})}))}const Qa={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class $a{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Xa(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Qa),{width:i.toString(),height:r.toString(),top:s,left:o}),c=st().toLowerCase();n&&(a=Ls(c)?"_blank":n),Ds(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,i]=t;return"".concat(e).concat(n,"=").concat(i,",")},"");if(function(){var e;return zs(arguments.length>0&&void 0!==arguments[0]?arguments[0]:st())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",a),new $a(null);const h=window.open(t||"",a,u);qr(h,e,"popup-blocked");try{h.focus()}catch(d){}return new $a(h)}const Ja="__/auth/handler",Za="emulator/auth/handler",el=encodeURIComponent("fac");async function tl(e,t,n,i,r,s){qr(e.config.authDomain,e,"auth-domain-config-required"),qr(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:Jn,eventId:r};if(t instanceof ko){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",xt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Eo){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(el,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ja);return Jr(t,Za)}(e),"?").concat(St(a).slice(1)).concat(c)}const nl="webStorageSupport";const il=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jo,this._completeRedirectFn=Aa,this._overrideRedirectResult=Pa}async _openPopup(e,t,n,i){var r;Gr(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return Xa(e,await tl(e,t,n,Yr(),i),ea())}async _openRedirect(e,t,n,i){await this._originValidation(e);return function(e){na().location.href=e}(await tl(e,t,n,Yr(),i)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Gr(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Ya(e),n=new Oa(e);return t.register("authEvent",t=>{qr(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(nl,{type:nl},n=>{var i;const r=null===(i=null===n||void 0===n?void 0:n[0])||void 0===i?void 0:i[nl];void 0!==r&&t(!!r),Ur(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Fa(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ws()||Ms()||zs()}};var rl="@firebase/auth",sl="1.10.7";class ol{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){qr(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const al=Xe("authIdTokenMaxAge")||300;let ll=null;var cl,ul;cl={loadJS:e=>new Promise((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=Vr("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(i)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},$s=cl,ul="Browser",Gn(new Lt("auth",(e,t)=>{let{options:n}=t;const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;qr(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:ul,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hs(ul)},c=new Gs(i,r,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Is);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Gn(new Lt("auth-internal",e=>(e=>new ol(e))(Ys(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),ti(rl,sl,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(ul)),ti(rl,sl,"esm2017");var hl,dl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},fl={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var i=Array(16);if("string"===typeof t)for(var r=0;16>r;++r)i[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];var s=e.g[3],o=t+(s^n&(r^s))+i[0]+3614090360&4294967295;o=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(t^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+i[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+s&4294967295}function i(e,t){this.h=t;for(var n=[],i=!0,r=e.length-1;0<=r;r--){var s=0|e[r];i&&s==t||(n[r]=s,i=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var i=t-this.blockSize,r=this.B,s=this.h,o=0;o<t;){if(0==s)for(;o<=i;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(r[s++]=e.charCodeAt(o++),s==this.blockSize){n(this,r),s=0;break}}else for(;o<t;)if(r[s++]=e[o++],s==this.blockSize){n(this,r),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var i=0;32>i;i+=8)e[n++]=this.g[t]>>>i&255;return e};var r={};function s(e){return-128<=e&&128>e?function(e,t){var n=r;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new i([0|e],0>e?-1:0)}):new i([0|e],0>e?-1:0)}function o(e){if(isNaN(e)||!isFinite(e))return a;if(0>e)return d(o(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new i(t,0)}var a=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new i(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function m(e,t){if(u(t))throw Error("division by zero");if(u(e))return new g(a,a);if(h(e))return t=m(d(e),t),new g(d(t.g),d(t.h));if(h(t))return t=m(e,d(t)),new g(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,i=t;0>=i.l(e);)n=v(n),i=v(i);var r=y(n,1),s=y(i,1);for(i=y(i,2),n=y(n,2);!u(i);){var c=s.add(i);0>=c.l(e)&&(r=r.add(n),s=c),i=y(i,1),n=y(n,1)}return t=f(e,r.j(t)),new g(r,t)}for(r=a;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),c=(s=o(n)).j(t);h(c)||0<c.l(e);)c=(s=o(n-=i)).j(t);u(s)&&(s=l),r=r.add(s),e=f(e,c)}return new g(r,e)}function v(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new i(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],o=0;o<r;o++)s[o]=0<t?e.i(o+n)>>>t|e.i(o+n+1)<<32-t:e.i(o+n);return new i(s,e.h)}(e=i.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var i=this.i(n);e+=(0<=i?i:4294967296+i)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=o(Math.pow(e,6)),n=this,i="";;){var r=m(n,t).g,s=((0<(n=f(n,r.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var o=r+(65535&this.i(s))+(65535&e.i(s)),a=(o>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);r=a>>>16,o&=65535,a&=65535,n[s]=a<<16|o}return new i(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return a;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return o(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var l=this.i(r)>>>16,f=65535&this.i(r),g=e.i(s)>>>16,m=65535&e.i(s);n[2*r+2*s]+=f*m,p(n,2*r+2*s),n[2*r+2*s+1]+=l*m,p(n,2*r+2*s+1),n[2*r+2*s+1]+=f*g,p(n,2*r+2*s+1),n[2*r+2*s+2]+=l*g,p(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new i(n,0)},e.A=function(e){return m(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new i(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new i(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new i(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,fl.Md5=t,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=o,i.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=o(Math.pow(n,8)),r=a,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=o(Math.pow(n,l)),r=r.j(l).add(o(c))):r=(r=r.j(i)).add(o(c))}return r},hl=fl.Integer=i}).apply("undefined"!==typeof dl?dl:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var pl,gl,ml,vl,yl,_l,bl,wl,xl="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},kl={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof xl&&xl];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,i){if(i)e:{var r=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var o=e[s];if(!(o in r))break e;r=r[o]}(i=i(s=r[e=e[e.length-1]]))!=s&&null!=i&&t(r,e,{configurable:!0,writable:!0,value:i})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,function(e,t){return t})}});var i=i||{},r=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?a:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,i=t.length||0;e.length=n+i;for(let r=0;r<i;r++)e[n+r]=t[r]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function g(){var e=r.navigator;return e&&(e=e.userAgent)?e:""}function m(e){return m[" "](e),e}m[" "]=function(){};var v=-1!=g().indexOf("Gecko")&&!(-1!=g().toLowerCase().indexOf("webkit")&&-1==g().indexOf("Edge"))&&!(-1!=g().indexOf("Trident")||-1!=g().indexOf("MSIE"))&&-1==g().indexOf("Edge");function y(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function _(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(e,t){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)e[n]=i[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function x(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function k(e){r.setTimeout(()=>{throw e},0)}function E(){var e=P;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var C=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new S,e=>e.reset());class S{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,I=!1,P=new class{constructor(){this.h=this.g=null}add(e,t){const n=C.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},R=()=>{const e=r.Promise.resolve(void 0);T=()=>{e.then(N)}};var N=()=>{for(var e;e=E();){try{e.h.call(e.g)}catch(n){k(n)}var t=C;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}I=!1};function A(){this.s=this.s,this.C=this.C}function O(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}A.prototype.s=!1,A.prototype.ma=function(){this.s||(this.s=!0,this.N())},A.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},O.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};r.addEventListener("test",e,t),r.removeEventListener("test",e,t)}catch(n){}return e}();function M(e,t){if(O.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{m(t.nodeName);var r=!0;break e}catch(s){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&M.aa.h.call(this)}}h(M,O);var L={2:"touch",3:"pen",4:"mouse"};M.prototype.h=function(){M.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var j="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.ha=r,this.key=++F,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function B(e,t){var n=t.type;if(n in e.g){var i,r=e.g[n],s=Array.prototype.indexOf.call(r,t,void 0);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function W(e,t,n,i){for(var r=0;r<e.length;++r){var s=e[r];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==i)return r}return-1}z.prototype.add=function(e,t,n,i,r){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=W(e,t,i,r);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new U(t,this.src,s,!!i,r)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),q={};function K(e,t,n,i,r){if(i&&i.once)return Y(e,t,n,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)K(e,t[s],n,i,r);return null}return n=te(n),e&&e[j]?e.K(t,n,o(i)?!!i.capture:!!i,r):G(e,t,n,!1,i,r)}function G(e,t,n,i,r,s){if(!t)throw Error("Invalid event type");var a=o(r)?!!r.capture:!!r,l=Z(e);if(l||(e[H]=l=new z(e)),(n=l.add(t,n,i,a,s)).proxy)return n;if(i=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)D||(r=a),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(X(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function Y(e,t,n,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Y(e,t[s],n,i,r);return null}return n=te(n),e&&e[j]?e.L(t,n,o(i)?!!i.capture:!!i,r):G(e,t,n,!0,i,r)}function Q(e,t,n,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)Q(e,t[s],n,i,r);else i=o(i)?!!i.capture:!!i,n=te(n),e&&e[j]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=W(s=e.g[t],n,i,r))&&(V(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=W(t,n,i,r)),(n=-1<e?t[e]:null)&&$(n))}function $(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[j])B(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(X(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=Z(t))?(B(n,e),0==n.h&&(n.src=null,t[H]=null)):V(e)}}}function X(e){return e in q?q[e]:q[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new M(t,this);var n=e.listener,i=e.ha||e.src;e.fa&&$(e),e=n.call(i,t)}return e}function Z(e){return(e=e[H])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){A.call(this),this.i=new z(this),this.M=this,this.F=null}function ie(e,t){var n,i=e.F;if(i)for(n=[];i;i=i.F)n.push(i);if(e=e.M,i=t.type||t,"string"===typeof t)t=new O(t,e);else if(t instanceof O)t.target=t.target||e;else{var r=t;w(t=new O(i,e),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];r=re(o,i,!0,t)&&r}if(r=re(o=t.g=e,i,!0,t)&&r,r=re(o,i,!1,t)&&r,n)for(s=0;s<n.length;s++)r=re(o=t.g=n[s],i,!1,t)&&r}function re(e,t,n,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.da&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.fa&&B(e.i,o),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:r.setTimeout(e,t||0)}function oe(e){e.g=se(()=>{e.g=null,e.i&&(e.i=!1,oe(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,A),ne.prototype[j]=!0,ne.prototype.removeEventListener=function(e,t,n,i){Q(this,e,t,n,i)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)V(n[i]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},ne.prototype.L=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};class ae extends A{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:oe(this)}N(){super.N(),this.g&&(r.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){A.call(this),this.h=e,this.g={}}h(le,A);var ce=[];function ue(e){y(e.g,function(e,t){this.g.hasOwnProperty(t)&&$(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=r.JSON.stringify,de=r.JSON.parse,fe=class{stringify(e){return r.JSON.stringify(e,void 0)}parse(e){return r.JSON.parse(e,void 0)}};function pe(){}function ge(e){return e.h||(e.h=e.i())}function me(){}pe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){O.call(this,"d")}function _e(){O.call(this,"c")}h(ye,O),h(_e,O);var be={},we=null;function xe(){return we=we||new ne}function ke(e){O.call(this,be.La,e)}function Ee(e){const t=xe();ie(t,new ke(t))}function Ce(e,t){O.call(this,be.STAT_EVENT,e),this.stat=t}function Se(e){const t=xe();ie(t,new Ce(t,e))}function Te(e,t){O.call(this,be.Ma,e),this.size=t}function Ie(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return r.setTimeout(function(){e()},t)}function Pe(){this.g=!0}function Re(e,t,n,i){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return he(n)}catch(a){return t}}(e,n)+(i?" "+i:"")})}be.La="serverreachability",h(ke,O),be.STAT_EVENT="statevent",h(Ce,O),be.Ma="timingevent",h(Te,O),Pe.prototype.xa=function(){this.g=!1},Pe.prototype.info=function(){};var Ne,Ae={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Oe={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Me(e,t,n,i){this.j=e,this.i=t,this.l=n,this.R=i||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}h(De,pe),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},Ne=new De;var je={},Fe={};function Ue(e,t,n){e.L=1,e.v=ht(ot(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),We(e),e.A=ot(e.v);var n=e.A,i=e.R;Array.isArray(i)||(i=[String(i)]),Ct(n.i,"t",i),e.C=0,n=e.j.J,e.h=new Le,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new ae(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,i=e.ca;var r="readystatechange";Array.isArray(r)||(r&&(ce[0]=r.toString()),r=ce);for(var s=0;s<r.length;s++){var o=K(n,r[s],i||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}t=e.H?_(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ee(),function(e,t,n,i,r,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Be(e,t){var n=e.C,i=t.indexOf("\n",n);return-1==i?Fe:(n=Number(t.substring(n,i)),isNaN(n)?je:(i+=1)+n>t.length?Fe:(t=t.slice(i,i+n),e.C=i+n,t))}function We(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ie(c(e.ba,e),t)}function qe(e){e.B&&(r.clearTimeout(e.B),e.B=null)}function Ke(e){0==e.j.G||e.J||ln(e.j,e)}function Ge(e){qe(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ye(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var i=n.Da.g.parse(t)}catch(u){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;an(n),$t(n)}rn(n),Se(18)}}else n.za=r[1],0<n.za-n.T&&37500>r[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ie(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&an(n),!p(t))for(r=n.Da.g.parse(t),t=0;t<r.length;t++){let c=r[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const r=c[4];null!=r&&(n.Aa=r,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(i=1.5*u,n.L=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=i.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(i.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.ya=e,ut(i.I,i.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var o=e;if((i=n).qa=dn(i,i.J?i.ia:null,i.W),o.K){tt(i.h,o);var a=o,l=i.L;l&&(a.I=l),a.B&&(qe(a),We(a)),i.g=o}else nn(i);0<n.i.length&&Jt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Qt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ee()}catch(u){}}Me.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==qt(e)?t.j():this.Y(e)},Me.prototype.Y=function(e){try{if(e==this.g)e:{const d=qt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||Kt(this.g)))){this.J||4!=d||7==t||Ee(),qe(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var i=Kt(this.g);e="";var s=i.length,o=4==qt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ge(this),Ke(this);var a="";break t}this.h.i=new r.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:!(o&&t==s-1)});i.length=0,this.h.g+=e,this.C=0,a=this.h.g}else a=this.g.oa();if(this.o=200==n,function(e,t,n,i,r,s,o){e.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Se(12),Ge(this),Ke(this);break e}Re(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ye(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<a.length;){if(e=Be(this,a),e==Fe){4==d&&(this.s=4,Se(14),n=!1),Re(this.i,this.l,null,"[Incomplete Response]");break}if(e==je){this.s=4,Se(15),Re(this.i,this.l,a,"[Invalid Chunk]"),n=!1;break}Re(this.i,this.l,e,null),Ye(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=a.length||this.h.h||(this.s=1,Se(16),n=!1),this.o=this.o&&n,n){if(0<a.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+a.length),sn(h),h.M=!0,Se(11))}}else Re(this.i,this.l,a,"[Invalid Chunked Response]"),Ge(this),Ke(this)}else Re(this.i,this.l,a,null),Ye(this,a);4==d&&Ge(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,We(this)))}else(function(e){const t={};e=(e.g&&2<=qt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<e.length;i++){if(p(e[i]))continue;var n=x(e[i]);const r=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[r]||[];t[r]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,Se(12)):(this.s=0,Se(13)),Ge(this),Ke(this)}}}catch(d){}},Me.prototype.cancel=function(){this.J=!0,Ge(this)},Me.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Ee(),Se(17)),Ge(this),this.s=2,Ke(this)):He(this,this.S-e)};var Qe=class{constructor(e,t){this.g=e,this.map=t}};function $e(e){this.l=e||10,r.PerformanceNavigationTiming?e=0<(e=r.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(r.chrome&&r.chrome.loadTimes&&r.chrome.loadTimes()&&r.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function it(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const i in e)t[n++]=i;return t}}}(e),i=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}(e),r=i.length,o=0;o<r;o++)t.call(void 0,i[o],n&&n[o],e)}$e.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var rt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,at(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new wt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(rt))?(this.h=!1,at(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new wt(null,this.h))}function ot(e){return new st(e)}function at(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof wt?(e.i=t,function(e,t){t&&!e.j&&(xt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(kt(this,t),Ct(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,_t)),e.i=new wt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,mt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,mt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var gt,mt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,_t=/[#\?@]/g,bt=/#/g;function wt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function xt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var s=e[n].substring(0,i);r=e[n].substring(i+1)}else s=e[n];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function kt(e,t){xt(e),t=St(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Et(e,t){return xt(e),t=St(e,t),e.g.has(t)}function Ct(e,t,n){kt(e,t),0<n.length&&(e.i=null,e.g.set(St(e,t),d(n)),e.h+=n.length)}function St(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tt(e,t,n,i,r){try{r&&(r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null),i(n)}catch(s){}}function It(){this.g=new fe}function Pt(e,t,n){const i=n||"";try{it(e,function(e,n){let r=e;o(e)&&(r=he(e)),t.push(i+n+"="+encodeURIComponent(r))})}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function Rt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Nt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function At(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ot(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Mt(e){let t="";return y(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Lt(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=Mt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function jt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=wt.prototype).add=function(e,t){xt(this),this.i=null,e=St(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){xt(this),this.g.forEach(function(n,i){n.forEach(function(n){e.call(t,n,i,this)},this)},this)},e.na=function(){xt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let i=0;i<t.length;i++){const r=e[i];for(let e=0;e<r.length;e++)n.push(t[i])}return n},e.V=function(e){xt(this);let t=[];if("string"===typeof e)Et(this,e)&&(t=t.concat(this.g.get(St(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return xt(this),this.i=null,Et(this,e=St(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var i=t[n];const s=encodeURIComponent(String(i)),o=this.V(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),e.push(r)}}return this.i=e.join("&")},h(Rt,pe),Rt.prototype.g=function(){return new Nt(this.l,this.j)},Rt.prototype.i=(gt={},function(){return gt}),h(Nt,ne),(e=Nt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||r).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ot(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof r.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;At(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ot(this):Dt(this),3==this.readyState&&At(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ot(this))},e.Qa=function(e){this.g&&(this.response=e,Ot(this))},e.ga=function(){this.g&&Ot(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Nt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(jt,ne);var Ft=/^https?$/i,Ut=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),Wt(e)}function zt(e){e.A||(e.A=!0,ie(e,"complete"),ie(e,"error"))}function Bt(e){if(e.h&&"undefined"!=typeof i&&(!e.v[1]||4!=qt(e)||2!=e.Z()))if(e.u&&4==qt(e))se(e.Ea,0,e);else if(ie(e,"readystatechange"),4==qt(e)){e.h=!1;try{const i=e.Z();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===i){var o=String(e.D).match(rt)[1]||null;!o&&r.self&&r.self.location&&(o=r.self.location.protocol.slice(0,-1)),s=!Ft.test(o?o.toLowerCase():"")}n=s}if(n)ie(e,"complete"),ie(e,"success");else{e.m=6;try{var a=2<qt(e)?e.g.statusText:""}catch(l){a=""}e.l=a+" ["+e.Z()+"]",zt(e)}}finally{Wt(e)}}}function Wt(e,t){if(e.g){Ht(e);const i=e.g,r=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||ie(e,"ready");try{i.onreadystatechange=r}catch(n){}}}function Ht(e){e.I&&(r.clearTimeout(e.I),e.I=null)}function qt(e){return e.g?e.g.readyState:0}function Kt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Gt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Yt(e){this.Aa=0,this.i=[],this.j=new Pe,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gt("baseRetryDelayMs",5e3,e),this.cb=Gt("retryDelaySeedMs",1e4,e),this.Wa=Gt("forwardChannelMaxRetries",2,e),this.wa=Gt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new $e(e&&e.concurrentRequestLimit),this.Da=new It,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Qt(e){if(Xt(e),3==e.G){var t=e.U++,n=ot(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Me(e,e.j,t)).L=2,t.v=ht(ot(n)),n=!1,r.navigator&&r.navigator.sendBeacon)try{n=r.navigator.sendBeacon(t.v.toString(),"")}catch(i){}!n&&r.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),We(t)}hn(e)}function $t(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Xt(e){$t(e),e.u&&(r.clearTimeout(e.u),e.u=null),an(e),e.h.cancel(),e.s&&("number"===typeof e.s&&r.clearTimeout(e.s),e.s=null)}function Jt(e){if(!Xe(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||R(),I||(T(),I=!0),P.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const i=ot(e.I);ut(i,"SID",e.K),ut(i,"RID",n),ut(i,"AID",e.T),en(e,i),e.m&&e.o&&Lt(i,e.m,e.o),n=new Me(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,i,t)}function en(e,t){e.H&&y(e.H,function(e,n){ut(t,n,e)}),e.l&&it({},function(e,n){ut(t,n,e)})}function tn(e,t,n){n=Math.min(e.i.length,n);var i=e.l?c(e.l.Na,e.l,e):null;e:{var r=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=r[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=r[a].g;const l=r[a].map;if(n-=t,0>n)t=Math.max(0,r[a].g-100),o=!1;else try{Pt(l,e,"req"+n+"_")}catch(s){i&&i(l)}}if(o){i=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,i}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||R(),I||(T(),I=!0),P.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ie(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(r.clearTimeout(e.A),e.A=null)}function on(e){e.g=new Me(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=ot(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(ot(t)),n.m=null,n.P=!0,Ve(n,e)}function an(e){null!=e.C&&(r.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){an(e),sn(e),e.g=null;var i=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),i=1}if(0!=e.G)if(t.o)if(1==i){n=t.m?t.m.length:0,t=Date.now()-t.F;var r=e.B;ie(i=xe(),new Te(i,n)),Jt(e)}else nn(e);else if(3==(r=t.s)||0==r&&0<t.X||!(1==i&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ie(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==i&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),r){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),i=e.Xa;const t=!i;i=new st(i||"//www.google.com/images/cleardot.gif"),r.location&&"http"==r.location.protocol||at(i,"https"),ht(i),t?function(e,t){const n=new Pe;if(r.Image){const i=new Image;i.onload=u(Tt,n,"TestLoadImage: loaded",!0,t,i),i.onerror=u(Tt,n,"TestLoadImage: error",!1,t,i),i.onabort=u(Tt,n,"TestLoadImage: abort",!1,t,i),i.ontimeout=u(Tt,n,"TestLoadImage: timeout",!1,t,i),r.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=e}else t(!1)}(i.toString(),n):function(e,t){new Pe;const n=new AbortController,i=setTimeout(()=>{n.abort(),Tt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(i),e.ok?Tt(0,0,!0,t):Tt(0,0,!1,t)}).catch(()=>{clearTimeout(i),Tt(0,0,!1,t)})}(i.toString(),n)}else Se(2);e.G=0,e.l&&e.l.sa(t),hn(e),Xt(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var i=n instanceof st?ot(n):new st(n);if(""!=i.g)t&&(i.g=t+"."+i.g),lt(i,i.s);else{var s=r.location;i=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var o=new st(null);i&&at(o,i),t&&(o.g=t),s&&lt(o,s),n&&(o.l=n),i=o}return n=e.D,t=e.ya,n&&t&&ut(i,n,t),ut(i,"VER",e.la),en(e,i),i}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new jt(new Rt({eb:n})):new jt(e.pa)).Ha(e.J),t}function pn(){}function gn(){}function mn(e,t){ne.call(this),this.g=new Yt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new _n(this)}function vn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){_e.call(this),this.status=1}function _n(e){this.g=e}(e=jt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ne.g(),this.v=this.o?ge(this.o):ge(Ne),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Vt(this,o)}if(e=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)n.set(s,i[s]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const e of i.keys())n.set(e,i.get(e))}i=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=r.FormData&&e instanceof r.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||i||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,a]of n)this.g.setRequestHeader(r,a);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ht(this),this.u=!0,this.g.send(e),this.u=!1}catch(o){Vt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,ie(this,"complete"),ie(this,"abort"),Wt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wt(this,!0)),jt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Bt(this):this.bb())},e.bb=function(){Bt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<qt(this)?this.g.status:-1}catch(gt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(gt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Yt.prototype).la=8,e.G=1,e.connect=function(e,t,n,i){Se(0),this.W=e,this.H=t||{},n&&void 0!==i&&(this.H.OSID=n,this.H.OAID=i),this.F=this.X,this.I=dn(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const r=new Me(this,this.j,e);let s=this.o;if(this.S&&(s?(s=_(s),w(s,this.S)):s=this.S),null!==this.m||this.O||(r.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var i=this.i[n];if(void 0===(i="__data__"in i.map&&"string"===typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,r,t),ut(n=ot(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Mt(s)))+"&"+t:this.m&&Lt(n,this.m,s)),et(this.h,r),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),r.T=!0,Ue(r,n,null)):Ue(r,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Xe(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,on(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ie(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Se(10),$t(this),on(this))},e.Za=function(){null!=this.C&&(this.C=null,$t(this),rn(this),Se(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Se(2)):(this.j.info("Failed to ping google.com"),Se(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},gn.prototype.g=function(e,t){return new mn(e,t)},h(mn,ne),mn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mn.prototype.close=function(){Qt(this.g)},mn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Qe(t.Ya++,e)),3==t.G&&Jt(t)},mn.prototype.N=function(){this.g.l=null,delete this.j,Qt(this.g),delete this.g,mn.aa.N.call(this)},h(vn,ye),h(yn,_e),h(_n,pn),_n.prototype.ua=function(){ie(this.g,"a")},_n.prototype.ta=function(e){ie(this.g,new vn(e))},_n.prototype.sa=function(e){ie(this.g,new yn)},_n.prototype.ra=function(){ie(this.g,"b")},gn.prototype.createWebChannel=gn.prototype.g,mn.prototype.send=mn.prototype.o,mn.prototype.open=mn.prototype.m,mn.prototype.close=mn.prototype.close,wl=kl.createWebChannelTransport=function(){return new gn},bl=kl.getStatEventTarget=function(){return xe()},_l=kl.Event=be,yl=kl.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ae.NO_ERROR=0,Ae.TIMEOUT=8,Ae.HTTP_ERROR=6,vl=kl.ErrorCode=Ae,Oe.COMPLETE="complete",ml=kl.EventType=Oe,me.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,gl=kl.WebChannel=me,kl.FetchXmlHttpFactory=Rt,jt.prototype.listenOnce=jt.prototype.L,jt.prototype.getLastError=jt.prototype.Ka,jt.prototype.getLastErrorCode=jt.prototype.Ba,jt.prototype.getStatus=jt.prototype.Z,jt.prototype.getResponseJson=jt.prototype.Oa,jt.prototype.getResponseText=jt.prototype.oa,jt.prototype.send=jt.prototype.ea,jt.prototype.setWithCredentials=jt.prototype.Ha,pl=kl.XhrIo=jt}).apply("undefined"!==typeof xl?xl:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const El="@firebase/firestore",Cl="4.7.17";class Sl{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Sl.UNAUTHENTICATED=new Sl(null),Sl.GOOGLE_CREDENTIALS=new Sl("google-credentials-uid"),Sl.FIRST_PARTY=new Sl("first-party-uid"),Sl.MOCK_USER=new Sl("mock-user");let Tl="11.9.0";const Il=new Kt("@firebase/firestore");function Pl(){return Il.logLevel}function Rl(e){if(Il.logLevel<=zt.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(Ol);Il.debug("Firestore (".concat(Tl,"): ").concat(e),...r)}}function Nl(e){if(Il.logLevel<=zt.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(Ol);Il.error("Firestore (".concat(Tl,"): ").concat(e),...r)}}function Al(e){if(Il.logLevel<=zt.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(Ol);Il.warn("Firestore (".concat(Tl,"): ").concat(e),...r)}}function Ol(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Dl(e,t,n){let i="Unexpected state";"string"==typeof t?i=t:n=t,Ml(e,i,n)}function Ml(e,t,n){let i="FIRESTORE (".concat(Tl,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{i+=" CONTEXT: "+JSON.stringify(n)}catch(e){i+=" CONTEXT: "+n}throw Nl(i),new Error(i)}function Ll(e,t,n,i){let r="Unexpected state";"string"==typeof n?r=n:i=n,e||Ml(t,r,i)}function jl(e,t){return e}const Fl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ul extends pt{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Vl{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class zl{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Bl{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Sl.UNAUTHENTICATED))}shutdown(){}}class Wl{constructor(e){this.t=e,this.currentUser=Sl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ll(void 0===this.o,42304);let n=this.i;const i=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new Vl;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Vl,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const t=r;e.enqueueRetryable(async()=>{await t.promise,await i(this.currentUser)})},o=e=>{Rl("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Rl("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Vl)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Rl("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ll("string"==typeof t.accessToken,31837,{l:t}),new zl(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ll(null===e||"string"==typeof e,2055,{h:e}),new Sl(e)}}class Hl{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Sl.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ql{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Hl(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Sl.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Kl{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gl{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ll(void 0===this.o,3512);const n=e=>{null!=e.error&&Rl("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,Rl("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const i=e=>{Rl("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>i(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?i(e):Rl("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Kl(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Ll("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Kl(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Yl(){return new TextEncoder}function Ql(e,t){return e<t?-1:e>t?1:0}function $l(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=e.codePointAt(n),r=t.codePointAt(n);if(i!==r){if(i<128&&r<128)return Ql(i,r);{const s=Yl(),o=Jl(s.encode(Xl(e,n)),s.encode(Xl(t,n)));return 0!==o?o:Ql(i,r)}}n+=i>65535?2:1}return Ql(e.length,t.length)}function Xl(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Jl(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return Ql(e[n],t[n]);return Ql(e.length,t.length)}function Zl(e,t,n){return e.length===t.length&&e.every((e,i)=>n(e,t[i]))}const ec=-62135596800,tc=1e6;class nc{static now(){return nc.fromMillis(Date.now())}static fromDate(e){return nc.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*tc);return new nc(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ul(Fl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ul(Fl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ec)throw new Ul(Fl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ul(Fl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/tc}_compareTo(e){return this.seconds===e.seconds?Ql(this.nanoseconds,e.nanoseconds):Ql(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-ec;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class ic{static fromTimestamp(e){return new ic(e)}static min(){return new ic(new nc(0,0))}static max(){return new ic(new nc(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const rc="__name__";class sc{constructor(e,t,n){void 0===t?t=0:t>e.length&&Dl(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Dl(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===sc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof sc?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=sc.compareSegments(e.get(i),t.get(i));if(0!==n)return n}return Ql(e.length,t.length)}static compareSegments(e,t){const n=sc.isNumericId(e),i=sc.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?sc.extractNumericId(e).compare(sc.extractNumericId(t)):$l(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hl.fromString(e.substring(4,e.length-2))}}class oc extends sc{construct(e,t,n){return new oc(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n){if(r.indexOf("//")>=0)throw new Ul(Fl.INVALID_ARGUMENT,"Invalid segment (".concat(r,"). Paths must not contain // in them."));e.push(...r.split("/").filter(e=>e.length>0))}return new oc(e)}static emptyPath(){return new oc([])}}const ac=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lc extends sc{construct(e,t,n){return new lc(e,t,n)}static isValidIdentifier(e){return ac.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lc.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===rc}static keyField(){return new lc([rc])}static fromServerFormat(e){const t=[];let n="",i=0;const r=()=>{if(0===n.length)throw new Ul(Fl.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;i<e.length;){const t=e[i];if("\\"===t){if(i+1===e.length)throw new Ul(Fl.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[i+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Ul(Fl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,i+=2}else"`"===t?(s=!s,i++):"."!==t||s?(n+=t,i++):(r(),i++)}if(r(),s)throw new Ul(Fl.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lc(t)}static emptyPath(){return new lc([])}}class cc{constructor(e){this.path=e}static fromPath(e){return new cc(oc.fromString(e))}static fromName(e){return new cc(oc.fromString(e).popFirst(5))}static empty(){return new cc(oc.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===oc.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return oc.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new cc(new oc(e.slice()))}}const uc=-1;class hc{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}hc.UNKNOWN_ID=-1;function dc(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=ic.fromTimestamp(1e9===i?new nc(n+1,0):new nc(n,i));return new pc(r,cc.empty(),t)}function fc(e){return new pc(e.readTime,e.key,uc)}class pc{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new pc(ic.min(),cc.empty(),uc)}static max(){return new pc(ic.max(),cc.empty(),uc)}}function gc(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=cc.comparator(e.documentKey,t.documentKey),0!==n?n:Ql(e.largestBatchId,t.largestBatchId))}class mc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class vc{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Dl(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new vc((n,i)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,i)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof vc?t:vc.resolve(t)}catch(e){return vc.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):vc.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):vc.reject(t)}static resolve(e){return new vc((t,n)=>{t(e)})}static reject(e){return new vc((t,n)=>{n(e)})}static waitFor(e){return new vc((t,n)=>{let i=0,r=0,s=!1;e.forEach(e=>{++i,e.next(()=>{++r,s&&r===i&&t()},e=>n(e))}),s=!0,r===i&&t()})}static or(e){let t=vc.resolve(!1);for(const n of e)t=t.next(e=>e?vc.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,i)=>{n.push(t.call(this,e,i))}),this.waitFor(n)}static mapArray(e,t){return new vc((n,i)=>{const r=e.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const l=a;t(e[l]).next(e=>{s[l]=e,++o,o===r&&n(s)},e=>i(e))}})}static doWhile(e,t){return new vc((n,i)=>{const r=()=>{!0===e()?t().next(()=>{r()},i):n()};r()})}}function yc(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _c(e){return"IndexedDbTransactionError"===e.name}class bc{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ue(e),this.ce=e=>t.writeSequenceNumber(e))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}bc.le=-1;const wc=-1;function xc(e){return null==e}function kc(e){return 0===e&&1/e==-1/0}const Ec="remoteDocuments",Cc="owner",Sc="mutationQueues",Tc="mutations";const Ic="documentMutations",Pc="remoteDocumentsV14",Rc="remoteDocumentGlobal",Nc="targets",Ac="targetDocuments",Oc="targetGlobal",Dc="collectionParents",Mc="clientMetadata",Lc="bundles",jc="namedQueries",Fc="indexConfiguration",Uc="indexState",Vc="indexEntries",zc="documentOverlays",Bc="globals",Wc=[Sc,Tc,Ic,Ec,Nc,Cc,Oc,Ac,Mc,Rc,Dc,Lc,jc],Hc=[Sc,Tc,Ic,Pc,Nc,Cc,Oc,Ac,Mc,Rc,Dc,Lc,jc,zc],qc=Hc,Kc=[...qc,Fc,Uc,Vc];function Gc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Yc(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Qc(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class $c{constructor(e,t){this.comparator=e,this.root=t||Jc.EMPTY}insert(e,t){return new $c(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Jc.BLACK,null,null))}remove(e){return new $c(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Jc.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xc(this.root,e,this.comparator,!0)}}class Xc{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Jc{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:Jc.RED,this.left=null!=i?i:Jc.EMPTY,this.right=null!=r?r:Jc.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,r){return new Jc(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Jc.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return Jc.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Jc.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Jc.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Dl(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Dl(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Dl(27949);return e+(this.isRed()?0:1)}}Jc.EMPTY=null,Jc.RED=!0,Jc.BLACK=!1,Jc.EMPTY=new class{constructor(){this.size=0}get key(){throw Dl(57766)}get value(){throw Dl(16141)}get color(){throw Dl(16727)}get left(){throw Dl(29726)}get right(){throw Dl(36894)}copy(e,t,n,i,r){return this}insert(e,t,n){return new Jc(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Zc{constructor(e){this.comparator=e,this.data=new $c(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new eu(this.data.getIterator())}getIteratorFrom(e){return new eu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Zc))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Zc(this.comparator);return t.data=e,t}}class eu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class tu{constructor(e){this.fields=e,e.sort(lc.comparator)}static empty(){return new tu([])}unionWith(e){let t=new Zc(lc.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new tu(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Zl(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class nu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class iu{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new nu("Invalid base64 string: "+e):e}}(e);return new iu(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new iu(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ql(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}iu.EMPTY_BYTE_STRING=new iu("");const ru=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function su(e){if(Ll(!!e,39018),"string"==typeof e){let t=0;const n=ru.exec(e);if(Ll(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ou(e.seconds),nanos:ou(e.nanos)}}function ou(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function au(e){return"string"==typeof e?iu.fromBase64String(e):iu.fromUint8Array(e)}const lu="server_timestamp",cu="__type__",uu="__previous_value__",hu="__local_write_time__";function du(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[cu])||void 0===n?void 0:n.stringValue)===lu}function fu(e){const t=e.mapValue.fields[uu];return du(t)?fu(t):t}function pu(e){const t=su(e.mapValue.fields[hu].timestampValue);return new nc(t.seconds,t.nanos)}const gu="(default)";class mu{constructor(e,t){this.projectId=e,this.database=t||gu}static empty(){return new mu("","")}get isDefaultDatabase(){return this.database===gu}isEqual(e){return e instanceof mu&&e.projectId===this.projectId&&e.database===this.database}}const vu="__type__",yu="__max__",_u={mapValue:{fields:{__type__:{stringValue:yu}}}},bu="__vector__",wu="value";function xu(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?du(e)?4:Mu(e)?9007199254740991:Ou(e)?10:11:Dl(28295,{value:e})}function ku(e,t){if(e===t)return!0;const n=xu(e);if(n!==xu(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return pu(e).isEqual(pu(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=su(e.timestampValue),i=su(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return au(e.bytesValue).isEqual(au(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ou(e.geoPointValue.latitude)===ou(t.geoPointValue.latitude)&&ou(e.geoPointValue.longitude)===ou(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ou(e.integerValue)===ou(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ou(e.doubleValue),i=ou(t.doubleValue);return n===i?kc(n)===kc(i):isNaN(n)&&isNaN(i)}return!1}(e,t);case 9:return Zl(e.arrayValue.values||[],t.arrayValue.values||[],ku);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},i=t.mapValue.fields||{};if(Gc(n)!==Gc(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!ku(n[r],i[r])))return!1;return!0}(e,t);default:return Dl(52216,{left:e})}}function Eu(e,t){return void 0!==(e.values||[]).find(e=>ku(e,t))}function Cu(e,t){if(e===t)return 0;const n=xu(e),i=xu(t);if(n!==i)return Ql(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ql(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ou(e.integerValue||e.doubleValue),i=ou(t.integerValue||t.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(e,t);case 3:return Su(e.timestampValue,t.timestampValue);case 4:return Su(pu(e),pu(t));case 5:return $l(e.stringValue,t.stringValue);case 6:return function(e,t){const n=au(e),i=au(t);return n.compareTo(i)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),i=t.split("/");for(let r=0;r<n.length&&r<i.length;r++){const e=Ql(n[r],i[r]);if(0!==e)return e}return Ql(n.length,i.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ql(ou(e.latitude),ou(t.latitude));return 0!==n?n:Ql(ou(e.longitude),ou(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Tu(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,i,r,s;const o=e.fields||{},a=t.fields||{},l=null===(n=o[wu])||void 0===n?void 0:n.arrayValue,c=null===(i=a[wu])||void 0===i?void 0:i.arrayValue,u=Ql((null===(r=null==l?void 0:l.values)||void 0===r?void 0:r.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Tu(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===_u.mapValue&&t===_u.mapValue)return 0;if(e===_u.mapValue)return 1;if(t===_u.mapValue)return-1;const n=e.fields||{},i=Object.keys(n),r=t.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let o=0;o<i.length&&o<s.length;++o){const e=$l(i[o],s[o]);if(0!==e)return e;const t=Cu(n[i[o]],r[s[o]]);if(0!==t)return t}return Ql(i.length,s.length)}(e.mapValue,t.mapValue);default:throw Dl(23264,{Pe:n})}}function Su(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ql(e,t);const n=su(e),i=su(t),r=Ql(n.seconds,i.seconds);return 0!==r?r:Ql(n.nanos,i.nanos)}function Tu(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const e=Cu(n[r],i[r]);if(e)return e}return Ql(n.length,i.length)}function Iu(e){return Pu(e)}function Pu(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=su(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return au(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return cc.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const i of e.values||[])n?n=!1:t+=",",t+=Pu(i);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",i=!0;for(const r of t)i?i=!1:n+=",",n+="".concat(r,":").concat(Pu(e.fields[r]));return n+"}"}(e.mapValue):Dl(61005,{value:e})}function Ru(e){return!!e&&"integerValue"in e}function Nu(e){return!!e&&"arrayValue"in e}function Au(e){return!!e&&"mapValue"in e}function Ou(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[vu])||void 0===n?void 0:n.stringValue)===bu}function Du(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Yc(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Du(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Du(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Mu(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===yu}class Lu{constructor(e){this.value=e}static empty(){return new Lu({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Au(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Du(t)}setAll(e){let t=lc.emptyPath(),n={},i=[];e.forEach((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,n,i),n={},i=[],t=r.popLast()}e?n[r.lastSegment()]=Du(e):i.push(r.lastSegment())});const r=this.getFieldsMap(t);this.applyChanges(r,n,i)}delete(e){const t=this.field(e.popLast());Au(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ku(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];Au(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){Yc(t,(t,n)=>e[t]=n);for(const i of n)delete e[i]}clone(){return new Lu(Du(this.value))}}class ju{constructor(e,t,n,i,r,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(e){return new ju(e,0,ic.min(),ic.min(),ic.min(),Lu.empty(),0)}static newFoundDocument(e,t,n,i){return new ju(e,1,t,ic.min(),n,i,0)}static newNoDocument(e,t){return new ju(e,2,t,ic.min(),ic.min(),Lu.empty(),0)}static newUnknownDocument(e,t){return new ju(e,3,t,ic.min(),ic.min(),Lu.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ic.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Lu.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Lu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ic.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ju&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ju(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Fu{constructor(e,t){this.position=e,this.inclusive=t}}function Uu(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],o=e.position[r];if(i=s.field.isKeyField()?cc.comparator(cc.fromName(o.referenceValue),n.key):Cu(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function Vu(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ku(e.position[n],t.position[n]))return!1;return!0}class zu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Bu(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Wu{}class Hu extends Wu{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ju(e,t,n):"array-contains"===t?new nh(e,n):"in"===t?new ih(e,n):"not-in"===t?new rh(e,n):"array-contains-any"===t?new sh(e,n):new Hu(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Zu(e,n):new eh(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Cu(t,this.value)):null!==t&&xu(this.value)===xu(t)&&this.matchesComparison(Cu(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Dl(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qu extends Wu{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new qu(e,t)}matches(e){return Ku(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Te||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Ku(e){return"and"===e.op}function Gu(e){return Yu(e)&&Ku(e)}function Yu(e){for(const t of e.filters)if(t instanceof qu)return!1;return!0}function Qu(e){if(e instanceof Hu)return e.field.canonicalString()+e.op.toString()+Iu(e.value);if(Gu(e))return e.filters.map(e=>Qu(e)).join(",");{const t=e.filters.map(e=>Qu(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function $u(e,t){return e instanceof Hu?function(e,t){return t instanceof Hu&&e.op===t.op&&e.field.isEqual(t.field)&&ku(e.value,t.value)}(e,t):e instanceof qu?function(e,t){return t instanceof qu&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,i)=>e&&$u(n,t.filters[i]),!0)}(e,t):void Dl(19439)}function Xu(e){return e instanceof Hu?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Iu(e.value))}(e):e instanceof qu?function(e){return e.op.toString()+" {"+e.getFilters().map(Xu).join(" ,")+"}"}(e):"Filter"}class Ju extends Hu{constructor(e,t,n){super(e,t,n),this.key=cc.fromName(n.referenceValue)}matches(e){const t=cc.comparator(e.key,this.key);return this.matchesComparison(t)}}class Zu extends Hu{constructor(e,t){super(e,"in",t),this.keys=th("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class eh extends Hu{constructor(e,t){super(e,"not-in",t),this.keys=th("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function th(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>cc.fromName(e.referenceValue))}class nh extends Hu{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Nu(t)&&Eu(t.arrayValue,this.value)}}class ih extends Hu{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Eu(this.value.arrayValue,t)}}class rh extends Hu{constructor(e,t){super(e,"not-in",t)}matches(e){if(Eu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Eu(this.value.arrayValue,t)}}class sh extends Hu{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Nu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Eu(this.value.arrayValue,e))}}class oh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.Ie=null}}function ah(e){return new oh(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function lh(e){const t=jl(e);if(null===t.Ie){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Qu(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),xc(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Iu(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Iu(e)).join(",")),t.Ie=e}return t.Ie}function ch(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Bu(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!$u(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Vu(e.startAt,t.startAt)&&Vu(e.endAt,t.endAt)}class uh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function hh(e,t,n,i,r,s,o,a){return new uh(e,t,n,i,r,s,o,a)}function dh(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function fh(e){return null!==e.collectionGroup}function ph(e){const t=jl(e);if(null===t.Ee){t.Ee=[];const e=new Set;for(const r of t.explicitOrderBy)t.Ee.push(r),e.add(r.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",i=function(e){let t=new Zc(lc.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);i.forEach(i=>{e.has(i.canonicalString())||i.isKeyField()||t.Ee.push(new zu(i,n))}),e.has(lc.keyField().canonicalString())||t.Ee.push(new zu(lc.keyField(),n))}return t.Ee}function gh(e){const t=jl(e);return t.de||(t.de=mh(t,ph(e))),t.de}function mh(e,t){if("F"===e.limitType)return ah(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new zu(e.field,t)});const n=e.endAt?new Fu(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Fu(e.startAt.position,e.startAt.inclusive):null;return ah(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function vh(e,t,n){return new uh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function yh(e,t){return ch(gh(e),gh(t))&&e.limitType===t.limitType}function _h(e){return"".concat(lh(gh(e)),"|lt:").concat(e.limitType)}function bh(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Xu(e)).join(", "),"]")),xc(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Iu(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Iu(e)).join(",")),"Target(".concat(t,")")}(gh(e)),"; limitType=").concat(e.limitType,")")}function wh(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):cc.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of ph(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const i=Uu(e,t,n);return e.inclusive?i<=0:i<0}(e.startAt,ph(e),t))&&!(e.endAt&&!function(e,t,n){const i=Uu(e,t,n);return e.inclusive?i>=0:i>0}(e.endAt,ph(e),t))}(e,t)}function xh(e){return(t,n)=>{let i=!1;for(const r of ph(e)){const e=kh(r,t,n);if(0!==e)return e;i=i||r.field.isKeyField()}return 0}}function kh(e,t,n){const i=e.field.isKeyField()?cc.comparator(t.key,n.key):function(e,t,n){const i=t.data.field(e),r=n.data.field(e);return null!==i&&null!==r?Cu(i,r):Dl(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return Dl(19790,{direction:e.dir})}}class Eh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(void 0===i)return this.inner[n]=[[e,t]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Yc(this.inner,(t,n)=>{for(const[i,r]of n)e(i,r)})}isEmpty(){return Qc(this.inner)}size(){return this.innerSize}}const Ch=new $c(cc.comparator);function Sh(){return Ch}const Th=new $c(cc.comparator);function Ih(){let e=Th;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n)e=e.insert(r.key,r);return e}function Ph(e){let t=Th;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Rh(){return Ah()}function Nh(){return Ah()}function Ah(){return new Eh(e=>e.toString(),(e,t)=>e.isEqual(t))}new $c(cc.comparator);const Oh=new Zc(cc.comparator);function Dh(){let e=Oh;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n)e=e.add(r);return e}const Mh=new Zc(Ql);function Lh(){return Mh}function jh(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kc(t)?"-0":t}}function Fh(e){return{integerValue:""+e}}class Uh{constructor(){this._=void 0}}function Vh(e,t,n){return e instanceof Wh?function(e,t){const n={fields:{[cu]:{stringValue:lu},[hu]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&du(t)&&(t=fu(t)),t&&(n.fields[uu]=t),{mapValue:n}}(n,t):e instanceof Hh?qh(e,t):e instanceof Kh?Gh(e,t):function(e,t){const n=Bh(e,t),i=Qh(n)+Qh(e.Re);return Ru(n)&&Ru(e.Re)?Fh(i):jh(e.serializer,i)}(e,t)}function zh(e,t,n){return e instanceof Hh?qh(e,t):e instanceof Kh?Gh(e,t):n}function Bh(e,t){return e instanceof Yh?function(e){return Ru(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Wh extends Uh{}class Hh extends Uh{constructor(e){super(),this.elements=e}}function qh(e,t){const n=$h(t);for(const i of e.elements)n.some(e=>ku(e,i))||n.push(i);return{arrayValue:{values:n}}}class Kh extends Uh{constructor(e){super(),this.elements=e}}function Gh(e,t){let n=$h(t);for(const i of e.elements)n=n.filter(e=>!ku(e,i));return{arrayValue:{values:n}}}class Yh extends Uh{constructor(e,t){super(),this.serializer=e,this.Re=t}}function Qh(e){return ou(e.integerValue||e.doubleValue)}function $h(e){return Nu(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Xh{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Xh}static exists(e){return new Xh(void 0,e)}static updateTime(e){return new Xh(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jh(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Zh{}function ed(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new cd(e.key,Xh.none()):new rd(e.key,e.data,Xh.none());{const n=e.data,i=Lu.empty();let r=new Zc(lc.comparator);for(let e of t.fields)if(!r.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?i.delete(e):i.set(e,t),r=r.add(e)}return new sd(e.key,i,new tu(r.toArray()),Xh.none())}}function td(e,t,n){e instanceof rd?function(e,t,n){const i=e.value.clone(),r=ad(e.fieldTransforms,t,n.transformResults);i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):e instanceof sd?function(e,t,n){if(!Jh(e.precondition,t))return void t.convertToUnknownDocument(n.version);const i=ad(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(od(e)),r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function nd(e,t,n,i){return e instanceof rd?function(e,t,n,i){if(!Jh(e.precondition,t))return n;const r=e.value.clone(),s=ld(e.fieldTransforms,i,t);return r.setAll(s),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}(e,t,n,i):e instanceof sd?function(e,t,n,i){if(!Jh(e.precondition,t))return n;const r=ld(e.fieldTransforms,i,t),s=t.data;return s.setAll(od(e)),s.setAll(r),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,i):function(e,t,n){return Jh(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function id(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Zl(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Hh&&t instanceof Hh||e instanceof Kh&&t instanceof Kh?Zl(e.elements,t.elements,ku):e instanceof Yh&&t instanceof Yh?ku(e.Re,t.Re):e instanceof Wh&&t instanceof Wh}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class rd extends Zh{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class sd extends Zh{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function od(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function ad(e,t,n){const i=new Map;Ll(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let r=0;r<n.length;r++){const s=e[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,zh(o,a,n[r]))}return i}function ld(e,t,n){const i=new Map;for(const r of e){const e=r.transform,s=n.data.field(r.field);i.set(r.field,Vh(e,s,t))}return i}class cd extends Zh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ud{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const t=this.mutations[i];t.key.isEqual(e.key)&&td(t,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=nd(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=nd(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Nh();return this.mutations.forEach(i=>{const r=e.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=t.has(i.key)?null:o;const a=ed(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(ic.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Dh())}isEqual(e){return this.batchId===e.batchId&&Zl(this.mutations,e.mutations,(e,t)=>id(e,t))&&Zl(this.baseMutations,e.baseMutations,(e,t)=>id(e,t))}}class hd{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}var dd,fd;function pd(e){if(void 0===e)return Nl("GRPC error has no .code"),Fl.UNKNOWN;switch(e){case dd.OK:return Fl.OK;case dd.CANCELLED:return Fl.CANCELLED;case dd.UNKNOWN:return Fl.UNKNOWN;case dd.DEADLINE_EXCEEDED:return Fl.DEADLINE_EXCEEDED;case dd.RESOURCE_EXHAUSTED:return Fl.RESOURCE_EXHAUSTED;case dd.INTERNAL:return Fl.INTERNAL;case dd.UNAVAILABLE:return Fl.UNAVAILABLE;case dd.UNAUTHENTICATED:return Fl.UNAUTHENTICATED;case dd.INVALID_ARGUMENT:return Fl.INVALID_ARGUMENT;case dd.NOT_FOUND:return Fl.NOT_FOUND;case dd.ALREADY_EXISTS:return Fl.ALREADY_EXISTS;case dd.PERMISSION_DENIED:return Fl.PERMISSION_DENIED;case dd.FAILED_PRECONDITION:return Fl.FAILED_PRECONDITION;case dd.ABORTED:return Fl.ABORTED;case dd.OUT_OF_RANGE:return Fl.OUT_OF_RANGE;case dd.UNIMPLEMENTED:return Fl.UNIMPLEMENTED;case dd.DATA_LOSS:return Fl.DATA_LOSS;default:return Dl(39323,{code:e})}}(fd=dd||(dd={}))[fd.OK=0]="OK",fd[fd.CANCELLED=1]="CANCELLED",fd[fd.UNKNOWN=2]="UNKNOWN",fd[fd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fd[fd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fd[fd.NOT_FOUND=5]="NOT_FOUND",fd[fd.ALREADY_EXISTS=6]="ALREADY_EXISTS",fd[fd.PERMISSION_DENIED=7]="PERMISSION_DENIED",fd[fd.UNAUTHENTICATED=16]="UNAUTHENTICATED",fd[fd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fd[fd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fd[fd.ABORTED=10]="ABORTED",fd[fd.OUT_OF_RANGE=11]="OUT_OF_RANGE",fd[fd.UNIMPLEMENTED=12]="UNIMPLEMENTED",fd[fd.INTERNAL=13]="INTERNAL",fd[fd.UNAVAILABLE=14]="UNAVAILABLE",fd[fd.DATA_LOSS=15]="DATA_LOSS";new hl([4294967295,4294967295],0);Error;class gd{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function md(e){return Ll(!!e,49232),ic.fromTimestamp(function(e){const t=su(e);return new nc(t.seconds,t.nanos)}(e))}function vd(e,t){const n=function(e){return new oc(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function yd(e){const t=oc.fromString(e);return Ll(Ed(t),10190,{key:t.toString()}),t}function _d(e){const t=yd(e);return 4===t.length?oc.emptyPath():bd(t)}function bd(e){return Ll(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function wd(e){let t=_d(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ll(1===i,65062);const e=n.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=xd(e);return t instanceof qu&&Gu(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new zu(kd(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,xc(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Fu(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Fu(n,t)}(n.endAt)),hh(t,r,o,s,a,"F",l,c)}function xd(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=kd(e.unaryFilter.field);return Hu.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=kd(e.unaryFilter.field);return Hu.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=kd(e.unaryFilter.field);return Hu.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=kd(e.unaryFilter.field);return Hu.create(r,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Dl(61313);default:return Dl(60726)}}(e):void 0!==e.fieldFilter?function(e){return Hu.create(kd(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Dl(58110);default:return Dl(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return qu.create(e.compositeFilter.filters.map(e=>xd(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Dl(1026)}}(e.compositeFilter.op))}(e):Dl(30097,{filter:e})}function kd(e){return lc.fromServerFormat(e.fieldPath)}function Ed(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Cd{constructor(e){this.wt=e}}function Sd(e){const t=wd({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?vh(t,t.limit,"L"):t}class Td{constructor(){}vt(e,t){this.Ct(e,t),t.Ft()}Ct(e,t){if("nullValue"in e)this.Mt(t,5);else if("booleanValue"in e)this.Mt(t,10),t.xt(e.booleanValue?1:0);else if("integerValue"in e)this.Mt(t,15),t.xt(ou(e.integerValue));else if("doubleValue"in e){const n=ou(e.doubleValue);isNaN(n)?this.Mt(t,13):(this.Mt(t,15),kc(n)?t.xt(0):t.xt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Mt(t,20),"string"==typeof n&&(n=su(n)),t.Ot("".concat(n.seconds||"")),t.xt(n.nanos||0)}else if("stringValue"in e)this.Nt(e.stringValue,t),this.Bt(t);else if("bytesValue"in e)this.Mt(t,30),t.Lt(au(e.bytesValue)),this.Bt(t);else if("referenceValue"in e)this.kt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Mt(t,45),t.xt(n.latitude||0),t.xt(n.longitude||0)}else"mapValue"in e?Mu(e)?this.Mt(t,Number.MAX_SAFE_INTEGER):Ou(e)?this.qt(e.mapValue,t):(this.Qt(e.mapValue,t),this.Bt(t)):"arrayValue"in e?(this.$t(e.arrayValue,t),this.Bt(t)):Dl(19022,{Ut:e})}Nt(e,t){this.Mt(t,25),this.Kt(e,t)}Kt(e,t){t.Ot(e)}Qt(e,t){const n=e.fields||{};this.Mt(t,55);for(const i of Object.keys(n))this.Nt(i,t),this.Ct(n[i],t)}qt(e,t){var n,i;const r=e.fields||{};this.Mt(t,53);const s=wu,o=(null===(i=null===(n=r[s].arrayValue)||void 0===n?void 0:n.values)||void 0===i?void 0:i.length)||0;this.Mt(t,15),t.xt(ou(o)),this.Nt(s,t),this.Ct(r[s],t)}$t(e,t){const n=e.values||[];this.Mt(t,50);for(const i of n)this.Ct(i,t)}kt(e,t){this.Mt(t,37),cc.fromName(e).path.forEach(e=>{this.Mt(t,60),this.Kt(e,t)})}Mt(e,t){e.xt(t)}Bt(e){e.xt(2)}}Td.Wt=new Td;class Id{constructor(){this.Cn=new Pd}addToCollectionParentIndex(e,t){return this.Cn.add(t),vc.resolve()}getCollectionParents(e,t){return vc.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return vc.resolve()}deleteFieldIndex(e,t){return vc.resolve()}deleteAllFieldIndexes(e){return vc.resolve()}createTargetIndexes(e,t){return vc.resolve()}getDocumentsMatchingTarget(e,t){return vc.resolve(null)}getIndexType(e,t){return vc.resolve(0)}getFieldIndexes(e,t){return vc.resolve([])}getNextCollectionGroupToUpdate(e){return vc.resolve(null)}getMinOffset(e,t){return vc.resolve(pc.min())}getMinOffsetFromCollectionGroup(e,t){return vc.resolve(pc.min())}updateCollectionGroup(e,t,n){return vc.resolve()}updateIndexEntries(e,t){return vc.resolve()}}class Pd{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new Zc(oc.comparator),r=!i.has(n);return this.index[t]=i.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Zc(oc.comparator)).toArray()}}new Uint8Array(0);const Rd=41943040;class Nd{static withCacheSize(e){return new Nd(e,Nd.DEFAULT_COLLECTION_PERCENTILE,Nd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Nd.DEFAULT_COLLECTION_PERCENTILE=10,Nd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Nd.DEFAULT=new Nd(Rd,Nd.DEFAULT_COLLECTION_PERCENTILE,Nd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Nd.DISABLED=new Nd(-1,0,0);class Ad{constructor(e){this.ur=e}next(){return this.ur+=2,this.ur}static cr(){return new Ad(0)}static lr(){return new Ad(-1)}}const Od=1048576;class Dd{constructor(){this.changes=new Eh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ju.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?vc.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Md{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ld{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&nd(n.mutation,e,tu.empty(),nc.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Dh()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Dh();const i=Rh();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,n).next(e=>{let t=Ih();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Rh();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Dh()))}populateOverlays(e,t,n){const i=[];return n.forEach(e=>{t.has(e)||i.push(e)}),this.documentOverlayCache.getOverlays(e,i).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,i){let r=Sh();const s=Ah(),o=Ah();return t.forEach((e,t)=>{const o=n.get(t.key);i.has(t.key)&&(void 0===o||o.mutation instanceof sd)?r=r.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),nd(o.mutation,t,o.mutation.getFieldMask(),nc.now())):s.set(t.key,tu.empty())}),this.recalculateAndSaveOverlays(e,r).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new Md(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=Ah();let i=new $c((e,t)=>e-t),r=Dh();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const r of e)r.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||tu.empty();o=r.applyToLocalView(s,o),n.set(e,o);const a=(i.get(r.batchId)||Dh()).add(e);i=i.insert(r.batchId,a)})}).next(()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,l=i.value,c=Nh();l.forEach(e=>{if(!r.has(e)){const i=ed(t.get(e),n.get(e));null!==i&&c.set(e,i),r=r.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return vc.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,i){return function(e){return cc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):fh(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next(r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-r.size):vc.resolve(Rh());let o=uc,a=r;return s.next(t=>vc.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(t)?vc.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,r)).next(()=>this.computeViews(e,a,t,Dh())).next(e=>({batchId:o,changes:Ph(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new cc(t)).next(e=>{let t=Ih();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const r=t.collectionGroup;let s=Ih();return this.indexManager.getCollectionParents(e,r).next(o=>vc.forEach(o,o=>{const a=function(e,t){return new uh(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(r));return this.getDocumentsMatchingCollectionQuery(e,a,n,i).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r,i))).next(e=>{r.forEach((t,n)=>{const i=n.getKey();null===e.get(i)&&(e=e.insert(i,ju.newInvalidDocument(i)))});let n=Ih();return e.forEach((e,i)=>{const s=r.get(e);void 0!==s&&nd(s.mutation,i,tu.empty(),nc.now()),wh(t,i)&&(n=n.insert(e,i))}),n})}}class jd{constructor(e){this.serializer=e,this.kr=new Map,this.qr=new Map}getBundleMetadata(e,t){return vc.resolve(this.kr.get(t))}saveBundleMetadata(e,t){return this.kr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:md(e.createTime)}}(t)),vc.resolve()}getNamedQuery(e,t){return vc.resolve(this.qr.get(t))}saveNamedQuery(e,t){return this.qr.set(t.name,function(e){return{name:e.name,query:Sd(e.bundledQuery),readTime:md(e.readTime)}}(t)),vc.resolve()}}class Fd{constructor(){this.overlays=new $c(cc.comparator),this.Qr=new Map}getOverlay(e,t){return vc.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Rh();return vc.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,i)=>{this.St(e,t,i)}),vc.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.Qr.get(n);return void 0!==i&&(i.forEach(e=>this.overlays=this.overlays.remove(e)),this.Qr.delete(n)),vc.resolve()}getOverlaysForCollection(e,t,n){const i=Rh(),r=t.length+1,s=new cc(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===r&&e.largestBatchId>n&&i.set(e.getKey(),e)}return vc.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let r=new $c((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=r.get(e.largestBatchId);null===t&&(t=Rh(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Rh(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=i)););return vc.resolve(o)}St(e,t,n){const i=this.overlays.get(n.key);if(null!==i){const e=this.Qr.get(i.largestBatchId).delete(n.key);this.Qr.set(i.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new hd(t,n));let r=this.Qr.get(t);void 0===r&&(r=Dh(),this.Qr.set(t,r)),this.Qr.set(t,r.add(n.key))}}class Ud{constructor(){this.sessionToken=iu.EMPTY_BYTE_STRING}getSessionToken(e){return vc.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,vc.resolve()}}class Vd{constructor(){this.$r=new Zc(zd.Ur),this.Kr=new Zc(zd.Wr)}isEmpty(){return this.$r.isEmpty()}addReference(e,t){const n=new zd(e,t);this.$r=this.$r.add(n),this.Kr=this.Kr.add(n)}Gr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.zr(new zd(e,t))}jr(e,t){e.forEach(e=>this.removeReference(e,t))}Hr(e){const t=new cc(new oc([])),n=new zd(t,e),i=new zd(t,e+1),r=[];return this.Kr.forEachInRange([n,i],e=>{this.zr(e),r.push(e.key)}),r}Jr(){this.$r.forEach(e=>this.zr(e))}zr(e){this.$r=this.$r.delete(e),this.Kr=this.Kr.delete(e)}Yr(e){const t=new cc(new oc([])),n=new zd(t,e),i=new zd(t,e+1);let r=Dh();return this.Kr.forEachInRange([n,i],e=>{r=r.add(e.key)}),r}containsKey(e){const t=new zd(e,0),n=this.$r.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class zd{constructor(e,t){this.key=e,this.Zr=t}static Ur(e,t){return cc.comparator(e.key,t.key)||Ql(e.Zr,t.Zr)}static Wr(e,t){return Ql(e.Zr,t.Zr)||cc.comparator(e.key,t.key)}}class Bd{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nr=1,this.Xr=new Zc(zd.Ur)}checkEmpty(e){return vc.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,i){const r=this.nr;this.nr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new ud(r,t,n,i);this.mutationQueue.push(s);for(const o of i)this.Xr=this.Xr.add(new zd(o.key,r)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return vc.resolve(s)}lookupMutationBatch(e,t){return vc.resolve(this.ei(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.ti(n),r=i<0?0:i;return vc.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return vc.resolve(0===this.mutationQueue.length?wc:this.nr-1)}getAllMutationBatches(e){return vc.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new zd(t,0),i=new zd(t,Number.POSITIVE_INFINITY),r=[];return this.Xr.forEachInRange([n,i],e=>{const t=this.ei(e.Zr);r.push(t)}),vc.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Zc(Ql);return t.forEach(e=>{const t=new zd(e,0),i=new zd(e,Number.POSITIVE_INFINITY);this.Xr.forEachInRange([t,i],e=>{n=n.add(e.Zr)})}),vc.resolve(this.ni(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let r=n;cc.isDocumentKey(r)||(r=r.child(""));const s=new zd(new cc(r),0);let o=new Zc(Ql);return this.Xr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===i&&(o=o.add(e.Zr)),!0)},s),vc.resolve(this.ni(o))}ni(e){const t=[];return e.forEach(e=>{const n=this.ei(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Ll(0===this.ri(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Xr;return vc.forEach(t.mutations,i=>{const r=new zd(i.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Xr=n})}sr(e){}containsKey(e,t){const n=new zd(t,0),i=this.Xr.firstAfterOrEqual(n);return vc.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,vc.resolve()}ri(e,t){return this.ti(e)}ti(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ei(e){const t=this.ti(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Wd{constructor(e){this.ii=e,this.docs=new $c(cc.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),r=i?i.size:0,s=this.ii(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return vc.resolve(n?n.document.mutableCopy():ju.newInvalidDocument(t))}getEntries(e,t){let n=Sh();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ju.newInvalidDocument(e))}),vc.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let r=Sh();const s=t.path,o=new cc(s.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||gc(fc(o),n)<=0||(i.has(o.key)||wh(t,o))&&(r=r.insert(o.key,o.mutableCopy()))}return vc.resolve(r)}getAllFromCollectionGroup(e,t,n,i){Dl(9500)}si(e,t){return vc.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Hd(this)}getSize(e){return vc.resolve(this.size)}}class Hd extends Dd{constructor(e){super(),this.Br=e}applyChanges(e){const t=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?t.push(this.Br.addEntry(e,i)):this.Br.removeEntry(n)}),vc.waitFor(t)}getFromCache(e,t){return this.Br.getEntry(e,t)}getAllFromCache(e,t){return this.Br.getEntries(e,t)}}class qd{constructor(e){this.persistence=e,this.oi=new Eh(e=>lh(e),ch),this.lastRemoteSnapshotVersion=ic.min(),this.highestTargetId=0,this._i=0,this.ai=new Vd,this.targetCount=0,this.ui=Ad.cr()}forEachTarget(e,t){return this.oi.forEach((e,n)=>t(n)),vc.resolve()}getLastRemoteSnapshotVersion(e){return vc.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return vc.resolve(this._i)}allocateTargetId(e){return this.highestTargetId=this.ui.next(),vc.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this._i&&(this._i=t),vc.resolve()}Tr(e){this.oi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ui=new Ad(t),this.highestTargetId=t),e.sequenceNumber>this._i&&(this._i=e.sequenceNumber)}addTargetData(e,t){return this.Tr(t),this.targetCount+=1,vc.resolve()}updateTargetData(e,t){return this.Tr(t),vc.resolve()}removeTargetData(e,t){return this.oi.delete(t.target),this.ai.Hr(t.targetId),this.targetCount-=1,vc.resolve()}removeTargets(e,t,n){let i=0;const r=[];return this.oi.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.oi.delete(s),r.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),vc.waitFor(r).next(()=>i)}getTargetCount(e){return vc.resolve(this.targetCount)}getTargetData(e,t){const n=this.oi.get(t)||null;return vc.resolve(n)}addMatchingKeys(e,t,n){return this.ai.Gr(t,n),vc.resolve()}removeMatchingKeys(e,t,n){this.ai.jr(t,n);const i=this.persistence.referenceDelegate,r=[];return i&&t.forEach(t=>{r.push(i.markPotentiallyOrphaned(e,t))}),vc.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.ai.Hr(t),vc.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ai.Yr(t);return vc.resolve(n)}containsKey(e,t){return vc.resolve(this.ai.containsKey(t))}}class Kd{constructor(e,t){this.ci={},this.overlays={},this.li=new bc(0),this.hi=!1,this.hi=!0,this.Pi=new Ud,this.referenceDelegate=e(this),this.Ti=new qd(this),this.indexManager=new Id,this.remoteDocumentCache=function(e){return new Wd(e)}(e=>this.referenceDelegate.Ii(e)),this.serializer=new Cd(t),this.Ei=new jd(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.hi=!1,Promise.resolve()}get started(){return this.hi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Fd,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ci[e.toKey()];return n||(n=new Bd(t,this.referenceDelegate),this.ci[e.toKey()]=n),n}getGlobalsCache(){return this.Pi}getTargetCache(){return this.Ti}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ei}runTransaction(e,t,n){Rl("MemoryPersistence","Starting transaction:",e);const i=new Gd(this.li.next());return this.referenceDelegate.di(),n(i).next(e=>this.referenceDelegate.Ai(i).next(()=>e)).toPromise().then(e=>(i.raiseOnCommittedEvent(),e))}Ri(e,t){return vc.or(Object.values(this.ci).map(n=>()=>n.containsKey(e,t)))}}class Gd extends mc{constructor(e){super(),this.currentSequenceNumber=e}}class Yd{constructor(e){this.persistence=e,this.Vi=new Vd,this.mi=null}static fi(e){return new Yd(e)}get gi(){if(this.mi)return this.mi;throw Dl(60996)}addReference(e,t,n){return this.Vi.addReference(n,t),this.gi.delete(n.toString()),vc.resolve()}removeReference(e,t,n){return this.Vi.removeReference(n,t),this.gi.add(n.toString()),vc.resolve()}markPotentiallyOrphaned(e,t){return this.gi.add(t.toString()),vc.resolve()}removeTarget(e,t){this.Vi.Hr(t.targetId).forEach(e=>this.gi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.gi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}di(){this.mi=new Set}Ai(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return vc.forEach(this.gi,n=>{const i=cc.fromPath(n);return this.pi(e,i).next(e=>{e||t.removeEntry(i,ic.min())})}).next(()=>(this.mi=null,t.apply(e)))}updateLimboDocument(e,t){return this.pi(e,t).next(e=>{e?this.gi.delete(t.toString()):this.gi.add(t.toString())})}Ii(e){return 0}pi(e,t){return vc.or([()=>vc.resolve(this.Vi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ri(e,t)])}}class Qd{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.ds=n,this.As=i}static Rs(e,t){let n=Dh(),i=Dh();for(const r of t.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Qd(e,t.fromCache,n,i)}}class $d{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Xd{constructor(){this.Vs=!1,this.fs=!1,this.gs=100,this.ps=ht()?8:yc(st())>0?6:4}initialize(e,t){this.ys=e,this.indexManager=t,this.Vs=!0}getDocumentsMatchingQuery(e,t,n,i){const r={result:null};return this.ws(e,t).next(e=>{r.result=e}).next(()=>{if(!r.result)return this.bs(e,t,i,n).next(e=>{r.result=e})}).next(()=>{if(r.result)return;const n=new $d;return this.Ss(e,t,n).next(i=>{if(r.result=i,this.fs)return this.Ds(e,t,n,i.size)})}).next(()=>r.result)}Ds(e,t,n,i){return n.documentReadCount<this.gs?(Pl()<=zt.DEBUG&&Rl("QueryEngine","SDK will not create cache indexes for query:",bh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.gs,"documents"),vc.resolve()):(Pl()<=zt.DEBUG&&Rl("QueryEngine","Query:",bh(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.ps*i?(Pl()<=zt.DEBUG&&Rl("QueryEngine","The SDK decides to create cache indexes for query:",bh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,gh(t))):vc.resolve())}ws(e,t){if(dh(t))return vc.resolve(null);let n=gh(t);return this.indexManager.getIndexType(e,n).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=vh(t,null,"F"),n=gh(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const r=Dh(...i);return this.ys.getDocuments(e,r).next(i=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.vs(t,i);return this.Cs(t,s,r,n.readTime)?this.ws(e,vh(t,null,"F")):this.Fs(e,s,t,n)}))})))}bs(e,t,n,i){return dh(t)||i.isEqual(ic.min())?vc.resolve(null):this.ys.getDocuments(e,n).next(r=>{const s=this.vs(t,r);return this.Cs(t,s,n,i)?vc.resolve(null):(Pl()<=zt.DEBUG&&Rl("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),bh(t)),this.Fs(e,s,t,dc(i,uc)).next(e=>e))})}vs(e,t){let n=new Zc(xh(e));return t.forEach((t,i)=>{wh(e,i)&&(n=n.add(i))}),n}Cs(e,t,n,i){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ss(e,t,n){return Pl()<=zt.DEBUG&&Rl("QueryEngine","Using full collection scan to execute query:",bh(t)),this.ys.getDocumentsMatchingQuery(e,t,pc.min(),n)}Fs(e,t,n,i){return this.ys.getDocumentsMatchingQuery(e,n,i).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Jd="LocalStore";class Zd{constructor(e,t,n,i){this.persistence=e,this.Ms=t,this.serializer=i,this.xs=new $c(Ql),this.Os=new Eh(e=>lh(e),ch),this.Ns=new Map,this.Bs=e.getRemoteDocumentCache(),this.Ti=e.getTargetCache(),this.Ei=e.getBundleCache(),this.Ls(n)}Ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ld(this.Bs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Ms.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.xs))}}function ef(e,t,n,i){return new Zd(e,t,n,i)}async function tf(e,t){const n=jl(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let i;return n.mutationQueue.getAllMutationBatches(e).next(r=>(i=r,n.Ls(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const r=[],s=[];let o=Dh();for(const e of i){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({ks:e,removedBatchIds:r,addedBatchIds:s}))})})}class nf{constructor(){this.activeTargetIds=Lh()}js(e){this.activeTargetIds=this.activeTargetIds.add(e)}Hs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}zs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rf{constructor(){this.xo=new nf,this.Oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.xo.js(e),this.Oo[e]||"not-current"}updateQueryState(e,t,n){this.Oo[e]=t}removeLocalQueryTarget(e){this.xo.Hs(e)}isLocalQueryTarget(e){return this.xo.activeTargetIds.has(e)}clearQueryState(e){delete this.Oo[e]}getAllActiveQueryTargets(){return this.xo.activeTargetIds}isActiveQueryTarget(e){return this.xo.activeTargetIds.has(e)}start(){return this.xo=new nf,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class sf{No(e){}shutdown(){}}const of="ConnectivityMonitor";class af{constructor(){this.Bo=()=>this.Lo(),this.ko=()=>this.qo(),this.Qo=[],this.$o()}No(e){this.Qo.push(e)}shutdown(){window.removeEventListener("online",this.Bo),window.removeEventListener("offline",this.ko)}$o(){window.addEventListener("online",this.Bo),window.addEventListener("offline",this.ko)}Lo(){Rl(of,"Network connectivity changed: AVAILABLE");for(const e of this.Qo)e(0)}qo(){Rl(of,"Network connectivity changed: UNAVAILABLE");for(const e of this.Qo)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let lf=null;function cf(){return null===lf?lf=268435456+Math.round(2147483648*Math.random()):lf++,"0x"+lf.toString(16)}const uf="RestConnection",hf={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class df{get Uo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Ko=t+"://"+e.host,this.Wo="projects/".concat(n,"/databases/").concat(i),this.Go=this.databaseId.database===gu?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(i)}zo(e,t,n,i,r){const s=cf(),o=this.jo(e,t.toUriEncodedString());Rl(uf,"Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.Wo,"x-goog-request-params":this.Go};this.Ho(a,i,r);const{host:l}=new URL(o),c=Ze(l);return this.Jo(e,o,a,n,c).then(t=>(Rl(uf,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw Al(uf,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t})}Yo(e,t,n,i,r,s){return this.zo(e,t,n,i,r)}Ho(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Tl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}jo(e,t){const n=hf[e];return"".concat(this.Ko,"/v1/").concat(t,":").concat(n)}terminate(){}}class ff{constructor(e){this.Zo=e.Zo,this.Xo=e.Xo}e_(e){this.t_=e}n_(e){this.r_=e}i_(e){this.s_=e}onMessage(e){this.o_=e}close(){this.Xo()}send(e){this.Zo(e)}__(){this.t_()}a_(){this.r_()}u_(e){this.s_(e)}c_(e){this.o_(e)}}const pf="WebChannelConnection";class gf extends df{constructor(e){super(e),this.l_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,i,r){const s=cf();return new Promise((r,o)=>{const a=new pl;a.setWithCredentials(!0),a.listenOnce(ml.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case vl.NO_ERROR:const t=a.getResponseJson();Rl(pf,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(t)),r(t);break;case vl.TIMEOUT:Rl(pf,"RPC '".concat(e,"' ").concat(s," timed out")),o(new Ul(Fl.DEADLINE_EXCEEDED,"Request time out"));break;case vl.HTTP_ERROR:const n=a.getStatus();if(Rl(pf,"RPC '".concat(e,"' ").concat(s," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Fl).indexOf(t)>=0?t:Fl.UNKNOWN}(t.status);o(new Ul(e,t.message))}else o(new Ul(Fl.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Ul(Fl.UNAVAILABLE,"Connection failed."));break;default:Dl(9055,{h_:e,streamId:s,P_:a.getLastErrorCode(),T_:a.getLastError()})}}finally{Rl(pf,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(i);Rl(pf,"RPC '".concat(e,"' ").concat(s," sending request:"),i),a.send(t,"POST",l,n,15)})}I_(e,t,n){const i=cf(),r=[this.Ko,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=wl(),o=bl(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Ho(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=r.join("");Rl(pf,"Creating RPC '".concat(e,"' stream ").concat(i,": ").concat(c),a);const u=s.createWebChannel(c,a);this.E_(u);let h=!1,d=!1;const f=new ff({Zo:t=>{d?Rl(pf,"Not sending because RPC '".concat(e,"' stream ").concat(i," is closed:"),t):(h||(Rl(pf,"Opening RPC '".concat(e,"' stream ").concat(i," transport.")),u.open(),h=!0),Rl(pf,"RPC '".concat(e,"' stream ").concat(i," sending:"),t),u.send(t))},Xo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,gl.EventType.OPEN,()=>{d||(Rl(pf,"RPC '".concat(e,"' stream ").concat(i," transport opened.")),f.__())}),p(u,gl.EventType.CLOSE,()=>{d||(d=!0,Rl(pf,"RPC '".concat(e,"' stream ").concat(i," transport closed")),f.u_(),this.d_(u))}),p(u,gl.EventType.ERROR,t=>{d||(d=!0,Al(pf,"RPC '".concat(e,"' stream ").concat(i," transport errored. Name:"),t.name,"Message:",t.message),f.u_(new Ul(Fl.UNAVAILABLE,"The operation could not be completed")))}),p(u,gl.EventType.MESSAGE,t=>{var n;if(!d){const r=t.data[0];Ll(!!r,16349);const s=r,o=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Rl(pf,"RPC '".concat(e,"' stream ").concat(i," received error:"),o);const t=o.status;let n=function(e){const t=dd[e];if(void 0!==t)return pd(t)}(t),r=o.message;void 0===n&&(n=Fl.INTERNAL,r="Unknown error status: "+t+" with message "+o.message),d=!0,f.u_(new Ul(n,r)),u.close()}else Rl(pf,"RPC '".concat(e,"' stream ").concat(i," received:"),r),f.c_(r)}}),p(o,_l.STAT_EVENT,t=>{t.stat===yl.PROXY?Rl(pf,"RPC '".concat(e,"' stream ").concat(i," detected buffering proxy")):t.stat===yl.NOPROXY&&Rl(pf,"RPC '".concat(e,"' stream ").concat(i," detected no buffering proxy"))}),setTimeout(()=>{f.a_()},0),f}terminate(){this.l_.forEach(e=>e.close()),this.l_=[]}E_(e){this.l_.push(e)}d_(e){this.l_=this.l_.filter(t=>t===e)}}function mf(){return"undefined"!=typeof document?document:null}function vf(e){return new gd(e,!0)}class yf{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.xi=e,this.timerId=t,this.A_=n,this.R_=i,this.V_=r,this.m_=0,this.f_=null,this.g_=Date.now(),this.reset()}reset(){this.m_=0}p_(){this.m_=this.V_}y_(e){this.cancel();const t=Math.floor(this.m_+this.w_()),n=Math.max(0,Date.now()-this.g_),i=Math.max(0,t-n);i>0&&Rl("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.m_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.f_=this.xi.enqueueAfterDelay(this.timerId,i,()=>(this.g_=Date.now(),e())),this.m_*=this.R_,this.m_<this.A_&&(this.m_=this.A_),this.m_>this.V_&&(this.m_=this.V_)}b_(){null!==this.f_&&(this.f_.skipDelay(),this.f_=null)}cancel(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}w_(){return(Math.random()-.5)*this.m_}}class _f{}class bf extends _f{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.sa=!1}oa(){if(this.sa)throw new Ul(Fl.FAILED_PRECONDITION,"The client has already been terminated.")}zo(e,t,n,i){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(r=>{let[s,o]=r;return this.connection.zo(e,vd(t,n),i,s,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Fl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ul(Fl.UNKNOWN,e.toString())})}Yo(e,t,n,i,r){return this.oa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[o,a]=s;return this.connection.Yo(e,vd(t,n),i,o,a,r)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Fl.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Ul(Fl.UNKNOWN,e.toString())})}terminate(){this.sa=!0,this.connection.terminate()}}class wf{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this._a=0,this.aa=null,this.ua=!0}ca(){0===this._a&&(this.la("Unknown"),this.aa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.aa=null,this.ha("Backend didn't respond within 10 seconds."),this.la("Offline"),Promise.resolve())))}Pa(e){"Online"===this.state?this.la("Unknown"):(this._a++,this._a>=1&&(this.Ta(),this.ha("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.la("Offline")))}set(e){this.Ta(),this._a=0,"Online"===e&&(this.ua=!1),this.la(e)}la(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ha(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ua?(Nl(t),this.ua=!1):Rl("OnlineStateTracker",t)}Ta(){null!==this.aa&&(this.aa.cancel(),this.aa=null)}}const xf="RemoteStore";class kf{constructor(e,t,n,i,r){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ia=[],this.Ea=new Map,this.da=new Set,this.Aa=[],this.Ra=r,this.Ra.No(e=>{n.enqueueAndForget(async()=>{Sf(this)&&(Rl(xf,"Restarting streams for network reachability change."),await async function(e){const t=jl(e);t.da.add(4),await Cf(t),t.Va.set("Unknown"),t.da.delete(4),await Ef(t)}(this))})}),this.Va=new wf(n,i)}}async function Ef(e){if(Sf(e))for(const t of e.Aa)await t(!0)}async function Cf(e){for(const t of e.Aa)await t(!1)}function Sf(e){return 0===jl(e).da.size}async function Tf(e,t){const n=jl(e);t?(n.da.delete(2),await Ef(n)):t||(n.da.add(2),await Cf(n),n.Va.set("Unknown"))}class If{constructor(e,t,n,i,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Vl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,r){const s=Date.now()+n,o=new If(e,t,s,i,r);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ul(Fl.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}class Pf{constructor(){this.queries=Rf(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=jl(e),i=n.queries;n.queries=Rf(),i.forEach((e,n)=>{for(const i of n.Sa)i.onError(t)})}(this,new Ul(Fl.ABORTED,"Firestore shutting down"))}}function Rf(){return new Eh(e=>_h(e),yh)}function Nf(e){e.Ca.forEach(e=>{e.next()})}var Af,Of;(Of=Af||(Af={})).xa="default",Of.Cache="cache";const Df="SyncEngine";class Mf{constructor(e,t,n,i,r,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.lu={},this.hu=new Eh(e=>_h(e),yh),this.Pu=new Map,this.Tu=new Set,this.Iu=new $c(cc.comparator),this.Eu=new Map,this.du=new Vd,this.Au={},this.Ru=new Map,this.Vu=Ad.lr(),this.onlineState="Unknown",this.mu=void 0}get isPrimaryClient(){return!0===this.mu}}function Lf(e,t,n){const i=jl(e);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const e=[];i.hu.forEach((n,i)=>{const r=i.view.Fa(t);r.snapshot&&e.push(r.snapshot)}),function(e,t){const n=jl(e);n.onlineState=t;let i=!1;n.queries.forEach((e,n)=>{for(const r of n.Sa)r.Fa(t)&&(i=!0)}),i&&Nf(n)}(i.eventManager,t),e.length&&i.lu.Y_(e),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function jf(e,t,n){const i=jl(e),r=[],s=[],o=[];i.hu.isEmpty()||(i.hu.forEach((e,a)=>{o.push(i.fu(a,t,n).then(e=>{var t;if((e||n)&&i.isPrimaryClient){const r=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;i.sharedClientState.updateQueryState(a.targetId,r?"current":"not-current")}if(e){r.push(e);const t=Qd.Rs(a.targetId,e);s.push(t)}}))}),await Promise.all(o),i.lu.Y_(r),await async function(e,t){const n=jl(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>vc.forEach(t,t=>vc.forEach(t.ds,i=>n.persistence.referenceDelegate.addReference(e,t.targetId,i)).next(()=>vc.forEach(t.As,i=>n.persistence.referenceDelegate.removeReference(e,t.targetId,i)))))}catch(e){if(!_c(e))throw e;Rl(Jd,"Failed to update sequence numbers: "+e)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.xs.get(e),i=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(i);n.xs=n.xs.insert(e,r)}}}(i.localStore,s))}async function Ff(e,t){const n=jl(e);if(!n.currentUser.isEqual(t)){Rl(Df,"User change. New user:",t.toKey());const e=await tf(n.localStore,t);n.currentUser=t,function(e,t){e.Ru.forEach(e=>{e.forEach(e=>{e.reject(new Ul(Fl.CANCELLED,t))})}),e.Ru.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await jf(n,e.ks)}}class Uf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vf(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Su(e),await this.persistence.start(),this.localStore=this.Du(e),this.gcScheduler=this.vu(e,this.localStore),this.indexBackfillerScheduler=this.Cu(e,this.localStore)}vu(e,t){return null}Cu(e,t){return null}Du(e){return ef(this.persistence,new Xd,e.initialUser,this.serializer)}Su(e){return new Kd(Yd.fi,this.serializer)}bu(e){return new rf}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Uf.provider={build:()=>new Uf};class Vf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Lf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ff.bind(null,this.syncEngine),await Tf(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Pf}createDatastore(e){const t=vf(e.databaseInfo.databaseId),n=function(e){return new gf(e)}(e.databaseInfo);return function(e,t,n,i){return new bf(e,t,n,i)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,i,r){return new kf(e,t,n,i,r)}(this.localStore,this.datastore,e.asyncQueue,e=>Lf(this.syncEngine,e,0),af.C()?new af:new sf)}createSyncEngine(e,t){return function(e,t,n,i,r,s,o){const a=new Mf(e,t,n,i,r,s);return o&&(a.mu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=jl(e);Rl(xf,"RemoteStore shutting down."),t.da.add(5),await Cf(t),t.Ra.shutdown(),t.Va.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Vf.provider={build:()=>new Vf};function zf(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Bf=new Map;const Wf="firestore.googleapis.com",Hf=!0;class qf{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Ul(Fl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Wf,this.ssl=Hf}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Hf;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Rd;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Od)throw new Ul(Fl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,i){if(!0===t&&!0===i)throw new Ul(Fl.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zf(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Ul(Fl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Ul(Fl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Ul(Fl.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kf{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ul(Fl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ul(Fl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qf(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Bl;switch(e.type){case"firstParty":return new ql(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Ul(Fl.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Bf.get(e);t&&(Rl("ComponentProvider","Removing Datastore"),Bf.delete(e),t.terminate())}(this),Promise.resolve()}}const Gf="AsyncQueue";class Yf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Ju=[],this.Yu=!1,this.Zu=[],this.Xu=null,this.ec=!1,this.tc=!1,this.nc=[],this.x_=new yf(this,"async_queue_retry"),this.rc=()=>{const e=mf();e&&Rl(Gf,"Visibility state changed to "+e.visibilityState),this.x_.b_()},this.sc=e;const t=mf();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.rc)}get isShuttingDown(){return this.Yu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.oc(),this._c(e)}enterRestrictedMode(e){if(!this.Yu){this.Yu=!0,this.tc=e||!1;const t=mf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.rc)}}enqueue(e){if(this.oc(),this.Yu)return new Promise(()=>{});const t=new Vl;return this._c(()=>this.Yu&&this.tc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ju.push(e),this.ac()))}async ac(){if(0!==this.Ju.length){try{await this.Ju[0](),this.Ju.shift(),this.x_.reset()}catch(e){if(!_c(e))throw e;Rl(Gf,"Operation failed with retryable error: "+e)}this.Ju.length>0&&this.x_.y_(()=>this.ac())}}_c(e){const t=this.sc.then(()=>(this.ec=!0,e().catch(e=>{throw this.Xu=e,this.ec=!1,Nl("INTERNAL UNHANDLED ERROR: ",Qf(e)),e}).then(e=>(this.ec=!1,e))));return this.sc=t,t}enqueueAfterDelay(e,t,n){this.oc(),this.nc.indexOf(e)>-1&&(t=0);const i=If.createAndSchedule(this,e,t,n,e=>this.uc(e));return this.Zu.push(i),i}oc(){this.Xu&&Dl(47125,{cc:Qf(this.Xu)})}verifyOperationInProgress(){}async lc(){let e;do{e=this.sc,await e}while(e!==this.sc)}hc(e){for(const t of this.Zu)if(t.timerId===e)return!0;return!1}Pc(e){return this.lc().then(()=>{this.Zu.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.Zu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.lc()})}Tc(e){this.nc.push(e)}uc(e){const t=this.Zu.indexOf(e);this.Zu.splice(t,1)}}function Qf(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class $f extends Kf{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new Yf,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Yf(e),this._firestoreClient=void 0,await e}}}new RegExp("[~\\*/\\[\\]]");new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Tl=e}(Jn),Gn(new Lt("firestore",(e,n)=>{let{instanceIdentifier:i,options:r}=n;const s=e.getProvider("app").getImmediate(),o=new $f(new Wl(e.getProvider("auth-internal")),new Gl(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Ul(Fl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mu(e.options.projectId,t)}(s,i),s);return r=Object.assign({useFetchStreams:t},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),ti(El,Cl,e),ti(El,Cl,"esm2017")}();const Xf="firebasestorage.googleapis.com",Jf="storageBucket";class Zf extends pt{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(np(e),"Firebase Storage: ".concat(t," (").concat(np(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Zf.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return np(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var ep,tp;function np(e){return"storage/"+e}function ip(){return new Zf(ep.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function rp(){return new Zf(ep.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function sp(){return new Zf(ep.CANCELED,"User canceled the upload/download.")}function op(e){return new Zf(ep.INVALID_ARGUMENT,e)}function ap(){return new Zf(ep.APP_DELETED,"The Firebase app was deleted.")}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(ep||(ep={}));class lp{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=lp.makeFromUrl(e,t)}catch(r){return new lp(e,"")}if(""===n.path)return n;throw i=e,new Zf(ep.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.");var i}static makeFromUrl(e,t){let n=null;const i="([A-Za-z0-9.\\-_]+)";const r=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:r,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===Xf?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],i=t.regex.exec(e);if(i){const e=i[t.indices.bucket];let r=i[t.indices.path];r||(r=""),n=new lp(e,r),t.postModify(n);break}}if(null==n)throw function(e){return new Zf(ep.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class cp{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function up(e,t,n,i){if(i<t)throw op("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(i>n)throw op("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function hp(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){n=n+(t(i)+"="+t(e[i]))+"&"}return n=n.slice(0,-1),n}function dp(e,t){const n=e>=500&&e<600,i=-1!==[408,429].indexOf(e),r=-1!==t.indexOf(e);return n||i||r}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(tp||(tp={}));class fp{constructor(e,t,n,i,r,s,o,a,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],d=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=i,this.successCodes_=r,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.isUsingEmulator=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new pp(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const i=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(i),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(i),this.pendingConnection_=null;const t=n.getErrorCode()===tp.NO_ERROR,r=n.getStatus();if(!t||dp(r,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===tp.ABORT;return void e(!1,new pp(!1,null,t))}const s=-1!==this.successCodes_.indexOf(r);e(!0,new pp(s,n))})},t=(e,t)=>{const n=this.resolve_,i=this.reject_,r=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(r,r.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(s){i(s)}else if(null!==r){const e=ip();e.serverResponse=r.getErrorText(),this.errorCallback_?i(this.errorCallback_(r,e)):i(e)}else if(t.canceled){i(this.appDelete_?ap():sp())}else{i(rp())}};this.canceled_?t(0,new pp(!1,null,!0)):this.backoffId_=function(e,t,n){let i=1,r=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];t.apply(null,n)}}function h(t){r=setTimeout(()=>{r=null,e(f,l())},t)}function d(){s&&clearTimeout(s)}function f(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(e)return d(),void u.call(null,e,...n);if(l()||o)return d(),void u.call(null,e,...n);let s;i<64&&(i*=2),1===a?(a=2,s=0):s=1e3*(i+Math.random()),h(s)}let p=!1;function g(e){p||(p=!0,d(),c||(null!==r?(e||(a=2),clearTimeout(r),h(0)):e||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,g(!0)},n),g}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class pp{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function gp(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}class mp{constructor(e,t){this._service=e,this._location=t instanceof lp?t:lp.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new mp(e,t)}get root(){const e=new lp(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return gp(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new lp(this._location.bucket,e);return new mp(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Zf(ep.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function vp(e,t){const n=null===t||void 0===t?void 0:t[Jf];return null==n?null:lp.makeFromBucketSpec(n,e)}class yp{constructor(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=i,this._firebaseVersion=r,this._isUsingEmulator=s,this._bucket=null,this._host=Xf,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?lp.makeFromBucketSpec(i,this._host):vp(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=lp.makeFromBucketSpec(this._url,e):this._bucket=vp(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){up("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){up("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if(Qn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new mp(this,e)}_makeRequest(e,t,n,i){let r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new cp(ap());{const s=function(e,t,n,i,r,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const l=hp(e.urlParams),c=e.url+l,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,i),new fp(c,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,o,a)}(e,this._appId,n,i,t,this._firebaseVersion,r,this._isUsingEmulator);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,t){const[n,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,i).getPromise()}}const _p="@firebase/storage",bp="0.13.13",wp="storage";function xp(e,t){let{instanceIdentifier:n}=t;const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new yp(i,r,s,n,Jn)}Gn(new Lt(wp,xp,"PUBLIC").setMultipleInstances(!0)),ti(_p,bp,""),ti(_p,bp,"esm2017");const kp="@firebase/database",Ep="1.0.19";let Cp="";function Sp(e){Cp=e}class Tp{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),yt(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:vt(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Ip{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return bt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Pp=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new Tp(t)}}catch(t){}return new Ip},Rp=Pp("localStorage"),Np=Pp("sessionStorage"),Ap=new Kt("@firebase/database"),Op=function(){let e=1;return function(){return e++}}(),Dp=function(e){const t=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);if(r>=55296&&r<=56319){const t=r-55296;i++,Me(i<e.length,"Surrogate pair missing trail surrogate."),r=65536+(t<<10)+(e.charCodeAt(i)-56320)}r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):r<65536?(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t}(e),n=new Pt;n.update(t);const i=n.digest();return Fe.encodeByteArray(i)},Mp=function(){let e="";for(let t=0;t<arguments.length;t++){const n=t<0||arguments.length<=t?void 0:arguments[t];Array.isArray(n)||n&&"object"===typeof n&&"number"===typeof n.length?e+=Mp.apply(null,n):e+="object"===typeof n?yt(n):n,e+=" "}return e};let Lp=null,jp=!0;const Fp=function(e,t){Me(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(Ap.logLevel=zt.VERBOSE,Lp=Ap.log.bind(Ap),t&&Np.set("logging_enabled",!0)):"function"===typeof e?Lp=e:(Lp=null,Np.remove("logging_enabled"))},Up=function(){if(!0===jp&&(jp=!1,null===Lp&&!0===Np.get("logging_enabled")&&Fp(!0)),Lp){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=Mp.apply(null,t);Lp(i)}},Vp=function(e){return function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];Up(e,...n)}},zp=function(){const e="FIREBASE INTERNAL ERROR: "+Mp(...arguments);Ap.error(e)},Bp=function(){const e="FIREBASE FATAL ERROR: ".concat(Mp(...arguments));throw Ap.error(e),new Error(e)},Wp=function(){const e="FIREBASE WARNING: "+Mp(...arguments);Ap.warn(e)},Hp=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},qp="[MIN_NAME]",Kp="[MAX_NAME]",Gp=function(e,t){if(e===t)return 0;if(e===qp||t===Kp)return-1;if(t===qp||e===Kp)return 1;{const n=tg(e),i=tg(t);return null!==n?null!==i?n-i===0?e.length-t.length:n-i:-1:null!==i?1:e<t?-1:1}},Yp=function(e,t){return e===t?0:e<t?-1:1},Qp=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+yt(t))},$p=function(e){if("object"!==typeof e||null===e)return yt(e);const t=[];for(const i in e)t.push(i);t.sort();let n="{";for(let i=0;i<t.length;i++)0!==i&&(n+=","),n+=yt(t[i]),n+=":",n+=$p(e[t[i]]);return n+="}",n},Xp=function(e,t){const n=e.length;if(n<=t)return[e];const i=[];for(let r=0;r<n;r+=t)r+t>n?i.push(e.substring(r,n)):i.push(e.substring(r,r+t));return i};function Jp(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const Zp=function(e){Me(!Hp(e),"Invalid JSON number");const t=1023;let n,i,r,s,o;0===e?(i=0,r=0,n=1/e===-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),i=s+t,r=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(i=0,r=Math.round(e/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);a.push(n?1:0),a.reverse();const l=a.join("");let c="";for(o=0;o<64;o+=8){let e=parseInt(l.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),c+=e}return c.toLowerCase()};const eg=new RegExp("^-?(0*)\\d{1,10}$"),tg=function(e){if(eg.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},ng=function(e){try{e()}catch(t){setTimeout(()=>{const e=t.stack||"";throw Wp("Exception was thrown by user callback.",e),t},Math.floor(0))}},ig=function(e,t){const n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n};class rg{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Qn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=null===t||void 0===t?void 0:t.getImmediate({optional:!0}),this.appCheck||null===t||void 0===t||t.get().then(e=>this.appCheck=e)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){Wp('Provided AppCheck credentials for the app named "'.concat(this.appName,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}class sg{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&"auth/token-not-initialized"===e.code?(Up("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Wp(e)}}class og{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}og.OWNER="owner";const ag="5",lg=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,cg="ac",ug="websocket",hg="long_polling";class dg{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]&&arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;this.secure=t,this.namespace=n,this.webSocketOnly=i,this.nodeAdmin=r,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this.isUsingEmulator=a,this.emulatorOptions=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Rp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Rp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}function fg(e,t,n){let i;if(Me("string"===typeof t,"typeof type must == string"),Me("object"===typeof n,"typeof params must == object"),t===ug)i=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==hg)throw new Error("Unknown connection type: "+t);i=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const r=[];return Jp(n,(e,t)=>{r.push(e+"="+t)}),i+r.join("&")}class pg{constructor(){this.counters_={}}incrementCounter(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;bt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return We(this.counters_)}}const gg={},mg={};function vg(e){const t=e.toString();return gg[t]||(gg[t]=new pg),gg[t]}class yg{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&ng(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}const _g="start";class bg{constructor(e,t,n,i,r,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Vp(e),this.stats_=vg(t),this.urlFn=e=>(this.appCheckToken&&(e[cg]=this.appCheckToken),fg(t,hg,e))}open(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new yg(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if(ut()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new wg(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const[r,s,o,a,l]=t;if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,r===_g)n.id=s,n.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,()=>{n.onClosed_()})):n.onClosed_()}},function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const[r,s]=t;n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(r,s)},()=>{this.onClosed_()},this.urlFn);const e={};e[_g]="t",e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v=ag,this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e[cg]=this.appCheckToken),"undefined"!==typeof location&&location.hostname&&lg.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){bg.forceAllow_=!0}static forceDisallow(){bg.forceDisallow_=!0}static isAvailable(){return!ut()&&(!!bg.forceAllow_||!bg.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=yt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Ve(t),i=Xp(n,1840);for(let r=0;r<i.length;r++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[r]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if(ut())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=yt(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class wg{constructor(e,t,n,i){if(this.onDisconnect=n,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,ut())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Op(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=wg.createIFrame_();let n="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)){n='<script>document.domain="'+document.domain+'";<\/script>'}const i="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(r){Up("frame writing exception"),r.stack&&Up(r.stack),Up(r)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Up("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",i=0;for(;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;{const e=this.pendingSegs.shift();n=n+"&seg"+i+"="+e.seg+"&ts"+i+"="+e.ts+"&d"+i+"="+e.d,i++}}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(n,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),n()})}addTag(e,t){ut()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{Up("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}},Math.floor(1))}}let xg=null;"undefined"!==typeof MozWebSocket?xg=MozWebSocket:"undefined"!==typeof WebSocket&&(xg=WebSocket);class kg{constructor(e,t,n,i,r,s,o){this.connId=e,this.applicationId=n,this.appCheckToken=i,this.authToken=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Vp(this.connId),this.stats_=vg(t),this.connURL=kg.connectionURL_(t,s,o,i,n),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,n,i,r){const s={};return s.v=ag,!ut()&&"undefined"!==typeof location&&location.hostname&&lg.test(location.hostname)&&(s.r="f"),t&&(s.s=t),n&&(s.ls=n),i&&(s[cg]=i),r&&(s.p=r),fg(e,ug,s)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Rp.set("previous_websocket_failure",!0);try{let e;if(ut()){const t=this.nodeAdmin?"AdminNode":"Node";e={headers:{"User-Agent":"Firebase/".concat(ag,"/").concat(Cp,"/").concat(process.platform,"/").concat(t),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(e.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const n={NODE_ENV:"production",PUBLIC_URL:"/capacitiprojectbase",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},i=0===this.connURL.indexOf("wss://")?n.HTTPS_PROXY||n.https_proxy:n.HTTP_PROXY||n.http_proxy;i&&(e.proxy={origin:i})}this.mySock=new xg(this.connURL,[],e)}catch(n){this.log_("Error instantiating WebSocket.");const e=n.message||n.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){kg.forceDisallow_=!0}static isAvailable(){let e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,n=navigator.userAgent.match(t);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==xg&&!kg.forceDisallow_}static previouslyFailed(){return Rp.isInMemoryStorage||!0===Rp.get("previous_websocket_failure")}markConnectionHealthy(){Rp.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=vt(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(Me(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=yt(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=Xp(t,16384);n.length>1&&this.sendString_(String(n.length));for(let i=0;i<n.length;i++)this.sendString_(n[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}kg.responsesRequiredToBeHealthy=2,kg.healthyTimeout=3e4;class Eg{static get ALL_TRANSPORTS(){return[bg,kg]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=kg&&kg.isAvailable();let n=t&&!kg.previouslyFailed();if(e.webSocketOnly&&(t||Wp("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[kg];else{const e=this.transports_=[];for(const t of Eg.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t);Eg.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Eg.globalTransportInitialized_=!1;class Cg{constructor(e,t,n,i,r,s,o,a,l,c){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=i,this.authToken_=r,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=l,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Vp("c:"+this.id+":"),this.transportManager_=new Eg(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ig(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Qp("t",e),n=Qp("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Qp("t",e),n=Qp("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Qp("t",e);if("d"in e){const n=e.d;if("h"===t){const e=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(e.h=this.repoInfo_.host),this.onHandshake_(e)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?zp("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):zp("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),ag!==n&&Wp("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),ig(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ig(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Rp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Sg{put(e,t,n,i){}merge(e,t,n,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class Tg{constructor(e){this.allowedEvents_=e,this.listeners_={},Me(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(let e=0;e<r.length;e++)r[e].callback.apply(r[e].context,n)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const i=this.getInitialEvent(e);i&&t.apply(n,i)}off(e,t,n){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let r=0;r<i.length;r++)if(i[r].callback===t&&(!n||n===i[r].context))return void i.splice(r,1)}validateEventType_(e){Me(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Ig extends Tg{static getInstance(){return new Ig}constructor(){super(["online"]),this.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||ot()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return Me("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Pg{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Rg(){return new Pg("")}function Ng(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function Ag(e){return e.pieces_.length-e.pieceNum_}function Og(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new Pg(e.pieces_,t)}function Dg(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Mg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Lg(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new Pg(t,0)}function jg(e,t){const n=[];for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);if(t instanceof Pg)for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new Pg(n,0)}function Fg(e){return e.pieceNum_>=e.pieces_.length}function Ug(e,t){const n=Ng(e),i=Ng(t);if(null===n)return t;if(n===i)return Ug(Og(e),Og(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Vg(e,t){if(Ag(e)!==Ag(t))return!1;for(let n=e.pieceNum_,i=t.pieceNum_;n<=e.pieces_.length;n++,i++)if(e.pieces_[n]!==t.pieces_[i])return!1;return!0}function zg(e,t){let n=e.pieceNum_,i=t.pieceNum_;if(Ag(e)>Ag(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[i])return!1;++n,++i}return!0}class Bg{constructor(e,t){this.errorPrefix_=t,this.parts_=Mg(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Ot(this.parts_[n]);Wg(this)}}function Wg(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Hg(e))}function Hg(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class qg extends Tg{static getInstance(){return new qg}constructor(){let e,t;super(["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(t="visibilitychange",e="hidden"):"undefined"!==typeof document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):"undefined"!==typeof document.msHidden?(t="msvisibilitychange",e="msHidden"):"undefined"!==typeof document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}getInitialEvent(e){return Me("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Kg=1e3;class Gg extends Sg{constructor(e,t,n,i,r,s,o,a){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=n,this.onConnectStatus_=i,this.onServerInfoUpdate_=r,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.authOverride_=a,this.id=Gg.nextPersistentConnectionId_++,this.log_=Vp("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Kg,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a&&!ut())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");qg.getInstance().on("visible",this.onVisible_,this),-1===e.host.indexOf("fblocal")&&Ig.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const i=++this.requestNumber_,r={r:i,a:e,b:t};this.log_(yt(r)),Me(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(r),n&&(this.requestCBHash_[i]=n)}get(e){this.initConnection_();const t=new Je,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:e=>{const n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(i),t.promise}listen(e,t,n,i){this.initConnection_();const r=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+r),this.listens.has(s)||this.listens.set(s,new Map),Me(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Me(!this.listens.get(s).has(r),"listen() called twice for same path/queryId.");const o={onComplete:i,hashFn:t,query:e,tag:n};this.listens.get(s).set(r,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(e){const t=e.query,n=t._path.toString(),i=t._queryIdentifier;this.log_("Listen on "+n+" for "+i);const r={p:n};e.tag&&(r.q=t._queryObject,r.t=e.tag),r.h=e.hashFn(),this.sendRequest("q",r,r=>{const s=r.d,o=r.s;Gg.warnOnListenWarnings_(s,t);(this.listens.get(n)&&this.listens.get(n).get(i))===e&&(this.log_("listen response",r),"ok"!==o&&this.removeListen_(n,i),e.onComplete&&e.onComplete(o,s))})}static warnOnListenWarnings_(e,t){if(e&&"object"===typeof e&&bt(e,"w")){const n=wt(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();Wp("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(e," at ")+"".concat(n," to your security rules for better performance."))}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||function(e){const t=_t(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=function(e){const t=_t(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"===typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,t=>{const n=t.s,i=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,i))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){const n=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+i),Me(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query");this.removeListen_(n,i)&&this.connected_&&this.sendUnlisten_(n,i,e._queryObject,t)}sendUnlisten_(e,t,n,i){this.log_("Unlisten on "+e+" for "+t);const r={p:e};i&&(r.q=n,r.t=i),this.sendRequest("n",r)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,i){const r={p:t,d:n};this.log_("onDisconnect "+e,r),this.sendRequest(e,r,e=>{i&&setTimeout(()=>{i(e.s,e.d)},Math.floor(0))})}put(e,t,n,i){this.putInternal("p",e,t,n,i)}merge(e,t,n,i){this.putInternal("m",e,t,n,i)}putInternal(e,t,n,i,r){this.initConnection_();const s={p:t,d:n};void 0!==r&&(s.h=r),this.outstandingPuts_.push({action:e,request:s,onComplete:i}),this.outstandingPutCount_++;const o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),i&&i(n.s,n.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,e=>{if("ok"!==e.s){const t=e.d;this.log_("reportStats","Error sending stats: "+t)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+yt(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):zp("Unrecognized action received from server: "+yt(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){Me(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Kg,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Kg,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Kg),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();const e=Math.max(0,(new Date).getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Gg.nextConnectionId_++,r=this.lastSessionId;let s=!1,o=null;const a=function(){o?o.close():(s=!0,n())},l=function(e){Me(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(e)};this.realtime_={close:a,sendRequest:l};const c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[a,l]=await Promise.all([this.authTokenProvider_.getToken(c),this.appCheckTokenProvider_.getToken(c)]);s?Up("getToken() completed but was canceled"):(Up("getToken() completed. Creating connection."),this.authToken_=a&&a.accessToken,this.appCheckToken_=l&&l.token,o=new Cg(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,n,e=>{Wp(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")},r))}catch(zp){this.log_("Failed to get token: "+zp),s||(this.repoInfo_.nodeAdmin&&Wp(zp),a())}}}interrupt(e){Up("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Up("Resuming connection for reason: "+e),delete this.interruptReasons_[e],xt(this.interruptReasons_)&&(this.reconnectDelay_=Kg,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map(e=>$p(e)).join("$"):"default";const i=this.removeListen_(e,n);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,t){const n=new Pg(e).toString();let i;if(this.listens.has(n)){const e=this.listens.get(n);i=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else i=void 0;return i}onAuthRevoked_(e,t){Up("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Up("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";ut()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Cp.replace(/\./g,"-")]=1,ot()?e["framework.cordova"]=1:ct()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Ig.getInstance().currentlyOnline();return xt(this.interruptReasons_)&&e}}Gg.nextPersistentConnectionId_=0,Gg.nextConnectionId_=0;class Yg{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Yg(e,t)}}class Qg{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new Yg(qp,e),i=new Yg(qp,t);return 0!==this.compare(n,i)}minPost(){return Yg.MIN}}let $g;class Xg extends Qg{static get __EMPTY_NODE(){return $g}static set __EMPTY_NODE(e){$g=e}compare(e,t){return Gp(e.name,t.name)}isDefinedOn(e){throw Le("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Yg.MIN}maxPost(){return new Yg(Kp,$g)}makePost(e,t){return Me("string"===typeof e,"KeyIndex indexValue must always be a string."),new Yg(e,$g)}toString(){return".key"}}const Jg=new Xg;class Zg{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this.isReverse_=i,this.resultGenerator_=r,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,i&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class em{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:em.RED,this.left=null!=i?i:tm.EMPTY_NODE,this.right=null!=r?r:tm.EMPTY_NODE}copy(e,t,n,i,r){return new em(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return tm.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,i;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return tm.EMPTY_NODE;i=n.right.min_(),n=n.copy(i.key,i.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,em.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,em.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}em.RED=!0,em.BLACK=!1;class tm{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tm.EMPTY_NODE;this.comparator_=e,this.root_=t}insert(e,t){return new tm(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,em.BLACK,null,null))}remove(e){return new tm(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,em.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,i=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return i?i.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(i=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Zg(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Zg(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Zg(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Zg(this.root_,null,this.comparator_,!0,e)}}function nm(e,t){return Gp(e.name,t.name)}function im(e,t){return Gp(e,t)}let rm;tm.EMPTY_NODE=new class{copy(e,t,n,i,r){return this}insert(e,t,n){return new em(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const sm=function(e){return"number"===typeof e?"number:"+Zp(e):"string:"+e},om=function(e){if(e.isLeafNode()){const t=e.val();Me("string"===typeof t||"number"===typeof t||"object"===typeof t&&bt(t,".sv"),"Priority must be a string or number.")}else Me(e===rm||e.isEmpty(),"priority of unexpected type.");Me(e===rm||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let am,lm,cm;class um{static set __childrenNodeConstructor(e){am=e}static get __childrenNodeConstructor(){return am}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:um.__childrenNodeConstructor.EMPTY_NODE;this.value_=e,this.priorityNode_=t,this.lazyHash_=null,Me(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),om(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new um(this.value_,e)}getImmediateChild(e){return".priority"===e?this.priorityNode_:um.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Fg(e)?this:".priority"===Ng(e)?this.priorityNode_:um.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:um.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const n=Ng(e);return null===n?t:t.isEmpty()&&".priority"!==n?this:(Me(".priority"!==n||1===Ag(e),".priority must be the last token in a path"),this.updateImmediateChild(n,um.__childrenNodeConstructor.EMPTY_NODE.updateChild(Og(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+sm(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?Zp(this.value_):this.value_,this.lazyHash_=Dp(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===um.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof um.__childrenNodeConstructor?-1:(Me(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,n=typeof this.value_,i=um.VALUE_TYPE_ORDER.indexOf(t),r=um.VALUE_TYPE_ORDER.indexOf(n);return Me(i>=0,"Unknown leaf type: "+t),Me(r>=0,"Unknown leaf type: "+n),i===r?"object"===n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:r-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}um.VALUE_TYPE_ORDER=["object","boolean","number","string"];const hm=new class extends Qg{compare(e,t){const n=e.node.getPriority(),i=t.node.getPriority(),r=n.compareTo(i);return 0===r?Gp(e.name,t.name):r}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Yg.MIN}maxPost(){return new Yg(Kp,new um("[PRIORITY-POST]",cm))}makePost(e,t){const n=lm(e);return new Yg(t,new um("[PRIORITY-POST]",n))}toString(){return".priority"}},dm=Math.log(2);class fm{constructor(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/dm,10)),this.current_=this.count-1;const n=(i=this.count,parseInt(Array(i+1).join("1"),2));var i;this.bits_=e+1&n}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const pm=function(e,t,n,i){e.sort(t);const r=function(t,i){const s=i-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new em(a,o.node,em.BLACK,null,null);{const l=parseInt(s/2,10)+t,c=r(t,l),u=r(l+1,i);return o=e[l],a=n?n(o):o,new em(a,o.node,em.BLACK,c,u)}},s=function(t){let i=null,s=null,o=e.length;const a=function(t,i){const s=o-t,a=o;o-=t;const c=r(s+1,a),u=e[s],h=n?n(u):u;l(new em(h,u.node,i,null,c))},l=function(e){i?(i.left=e,i=e):(s=e,i=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),i=Math.pow(2,t.count-(e+1));n?a(i,em.BLACK):(a(i,em.BLACK),a(i,em.RED))}return s}(new fm(e.length));return new tm(i||t,s)};let gm;const mm={};class vm{static get Default(){return Me(mm&&hm,"ChildrenNode.ts has not been loaded"),gm=gm||new vm({".priority":mm},{".priority":hm}),gm}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=wt(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof tm?t:null}hasIndex(e){return bt(this.indexSet_,e.toString())}addIndex(e,t){Me(e!==Jg,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let i=!1;const r=t.getIterator(Yg.Wrap);let s,o=r.getNext();for(;o;)i=i||e.isDefinedOn(o.node),n.push(o),o=r.getNext();s=i?pm(n,e.getCompare()):mm;const a=e.toString(),l=Object.assign({},this.indexSet_);l[a]=e;const c=Object.assign({},this.indexes_);return c[a]=s,new vm(c,l)}addToIndexes(e,t){const n=kt(this.indexes_,(n,i)=>{const r=wt(this.indexSet_,i);if(Me(r,"Missing index implementation for "+i),n===mm){if(r.isDefinedOn(e.node)){const n=[],i=t.getIterator(Yg.Wrap);let s=i.getNext();for(;s;)s.name!==e.name&&n.push(s),s=i.getNext();return n.push(e),pm(n,r.getCompare())}return mm}{const i=t.get(e.name);let r=n;return i&&(r=r.remove(new Yg(e.name,i))),r.insert(e,e.node)}});return new vm(n,this.indexSet_)}removeFromIndexes(e,t){const n=kt(this.indexes_,n=>{if(n===mm)return n;{const i=t.get(e.name);return i?n.remove(new Yg(e.name,i)):n}});return new vm(n,this.indexSet_)}}let ym;class _m{static get EMPTY_NODE(){return ym||(ym=new _m(new tm(im),null,vm.Default))}constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&om(this.priorityNode_),this.children_.isEmpty()&&Me(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ym}updatePriority(e){return this.children_.isEmpty()?this:new _m(this.children_,e,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?ym:t}}getChild(e){const t=Ng(e);return null===t?this:this.getImmediateChild(t).getChild(Og(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(e,t){if(Me(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);{const n=new Yg(e,t);let i,r;t.isEmpty()?(i=this.children_.remove(e),r=this.indexMap_.removeFromIndexes(n,this.children_)):(i=this.children_.insert(e,t),r=this.indexMap_.addToIndexes(n,this.children_));const s=i.isEmpty()?ym:this.priorityNode_;return new _m(i,s,r)}}updateChild(e,t){const n=Ng(e);if(null===n)return t;{Me(".priority"!==Ng(e)||1===Ag(e),".priority must be the last token in a path");const i=this.getImmediateChild(n).updateChild(Og(e),t);return this.updateImmediateChild(n,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let n=0,i=0,r=!0;if(this.forEachChild(hm,(s,o)=>{t[s]=o.val(e),n++,r&&_m.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):r=!1}),!e&&r&&i<2*n){const e=[];for(const n in t)e[n]=t[n];return e}return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+sm(this.getPriority().val())+":"),this.forEachChild(hm,(t,n)=>{const i=n.hash();""!==i&&(e+=":"+t+":"+i)}),this.lazyHash_=""===e?"":Dp(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const i=this.resolveIndex_(n);if(i){const n=i.getPredecessorKey(new Yg(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Yg(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Yg(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,e=>e);{const n=this.children_.getIteratorFrom(e.name,Yg.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)<0;)n.getNext(),i=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,e=>e);{const n=this.children_.getReverseIteratorFrom(e.name,Yg.Wrap);let i=n.peek();for(;null!=i&&t.compare(i,e)>0;)n.getNext(),i=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===bm?-1:0}withIndex(e){if(e===Jg||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new _m(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===Jg||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(hm),n=t.getIterator(hm);let i=e.getNext(),r=n.getNext();for(;i&&r;){if(i.name!==r.name||!i.node.equals(r.node))return!1;i=e.getNext(),r=n.getNext()}return null===i&&null===r}return!1}return!1}}resolveIndex_(e){return e===Jg?null:this.indexMap_.get(e.toString())}}_m.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;const bm=new class extends _m{constructor(){super(new tm(im),_m.EMPTY_NODE,vm.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return _m.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Yg,{MIN:{value:new Yg(qp,_m.EMPTY_NODE)},MAX:{value:new Yg(Kp,bm)}}),Xg.__EMPTY_NODE=_m.EMPTY_NODE,um.__childrenNodeConstructor=_m,rm=bm,function(e){cm=e}(bm);function wm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return _m.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Me(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){return new um(e,wm(t))}if(e instanceof Array){let n=_m.EMPTY_NODE;return Jp(e,(t,i)=>{if(bt(e,t)&&"."!==t.substring(0,1)){const e=wm(i);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}}),n.updatePriority(wm(t))}{const n=[];let i=!1;if(Jp(e,(e,t)=>{if("."!==e.substring(0,1)){const r=wm(t);r.isEmpty()||(i=i||!r.getPriority().isEmpty(),n.push(new Yg(e,r)))}}),0===n.length)return _m.EMPTY_NODE;const r=pm(n,nm,e=>e.name,im);if(i){const e=pm(n,hm.getCompare());return new _m(r,wm(t),new vm({".priority":e},{".priority":hm}))}return new _m(r,wm(t),vm.Default)}}!function(e){lm=e}(wm);class xm extends Qg{constructor(e){super(),this.indexPath_=e,Me(!Fg(e)&&".priority"!==Ng(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),i=this.extractChild(t.node),r=n.compareTo(i);return 0===r?Gp(e.name,t.name):r}makePost(e,t){const n=wm(e),i=_m.EMPTY_NODE.updateChild(this.indexPath_,n);return new Yg(t,i)}maxPost(){const e=_m.EMPTY_NODE.updateChild(this.indexPath_,bm);return new Yg(Kp,e)}toString(){return Mg(this.indexPath_,0).join("/")}}const km=new class extends Qg{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?Gp(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Yg.MIN}maxPost(){return Yg.MAX}makePost(e,t){const n=wm(e);return new Yg(t,n)}toString(){return".value"}};function Em(e){return{type:"value",snapshotNode:e}}function Cm(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function Sm(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Tm(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class Im{constructor(e){this.index_=e}updateChild(e,t,n,i,r,s){Me(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const o=e.getImmediateChild(t);return o.getChild(i).equals(n.getChild(i))&&o.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(Sm(t,o)):Me(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):o.isEmpty()?s.trackChildChange(Cm(t,n)):s.trackChildChange(Tm(t,n,o))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(hm,(e,i)=>{t.hasChild(e)||n.trackChildChange(Sm(e,i))}),t.isLeafNode()||t.forEachChild(hm,(t,i)=>{if(e.hasChild(t)){const r=e.getImmediateChild(t);r.equals(i)||n.trackChildChange(Tm(t,i,r))}else n.trackChildChange(Cm(t,i))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?_m.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Pm{constructor(e){this.indexedFilter_=new Im(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Pm.getStartPost_(e),this.endPost_=Pm.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,n=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&n}updateChild(e,t,n,i,r,s){return this.matches(new Yg(t,n))||(n=_m.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,i,r,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=_m.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(_m.EMPTY_NODE);const r=this;return t.forEachChild(hm,(e,t)=>{r.matches(new Yg(e,t))||(i=i.updateImmediateChild(e,_m.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Rm{constructor(e){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=e=>{const t=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Pm(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,n,i,r,s){return this.rangedFilter_.matches(new Yg(t,n))||(n=_m.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,i,r,s):this.fullLimitUpdateChild_(e,t,n,r,s)}updateFullNode(e,t,n){let i;if(t.isLeafNode()||t.isEmpty())i=_m.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;i=_m.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();if(this.withinDirectionalStart(t)){if(!this.withinDirectionalEnd(t))break;i=i.updateImmediateChild(t.name,t.node),n++}}}else{let e;i=t.withIndex(this.index_),i=i.updatePriority(_m.EMPTY_NODE),e=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let n=0;for(;e.hasNext();){const t=e.getNext();n<this.limit_&&this.withinDirectionalStart(t)&&this.withinDirectionalEnd(t)?n++:i=i.updateImmediateChild(t.name,_m.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,i,r){let s;if(this.reverse_){const e=this.index_.getCompare();s=(t,n)=>e(n,t)}else s=this.index_.getCompare();const o=e;Me(o.numChildren()===this.limit_,"");const a=new Yg(t,n),l=this.reverse_?o.getFirstChild(this.index_):o.getLastChild(this.index_),c=this.rangedFilter_.matches(a);if(o.hasChild(t)){const e=o.getImmediateChild(t);let u=i.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=u&&(u.name===t||o.hasChild(u.name));)u=i.getChildAfterChild(this.index_,u,this.reverse_);const h=null==u?1:s(u,a);if(c&&!n.isEmpty()&&h>=0)return null!=r&&r.trackChildChange(Tm(t,n,e)),o.updateImmediateChild(t,n);{null!=r&&r.trackChildChange(Sm(t,e));const n=o.updateImmediateChild(t,_m.EMPTY_NODE);return null!=u&&this.rangedFilter_.matches(u)?(null!=r&&r.trackChildChange(Cm(u.name,u.node)),n.updateImmediateChild(u.name,u.node)):n}}return n.isEmpty()?e:c&&s(l,a)>=0?(null!=r&&(r.trackChildChange(Sm(l.name,l.node)),r.trackChildChange(Cm(t,n))),o.updateImmediateChild(t,n).updateImmediateChild(l.name,_m.EMPTY_NODE)):e}}class Nm{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=hm}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return Me(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return Me(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:qp}hasEnd(){return this.endSet_}getIndexEndValue(){return Me(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return Me(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Kp}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return Me(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===hm}copy(){const e=new Nm;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Am(e,t,n){const i=e.copy();return i.startSet_=!0,void 0===t&&(t=null),i.indexStartValue_=t,null!=n?(i.startNameSet_=!0,i.indexStartName_=n):(i.startNameSet_=!1,i.indexStartName_=""),i}function Om(e,t,n){const i=e.copy();return i.endSet_=!0,void 0===t&&(t=null),i.indexEndValue_=t,void 0!==n?(i.endNameSet_=!0,i.indexEndName_=n):(i.endNameSet_=!1,i.indexEndName_=""),i}function Dm(e,t){const n=e.copy();return n.index_=t,n}function Mm(e){const t={};if(e.isDefault())return t;let n;if(e.index_===hm?n="$priority":e.index_===km?n="$value":e.index_===Jg?n="$key":(Me(e.index_ instanceof xm,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=yt(n),e.startSet_){const n=e.startAfterSet_?"startAfter":"startAt";t[n]=yt(e.indexStartValue_),e.startNameSet_&&(t[n]+=","+yt(e.indexStartName_))}if(e.endSet_){const n=e.endBeforeSet_?"endBefore":"endAt";t[n]=yt(e.indexEndValue_),e.endNameSet_&&(t[n]+=","+yt(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function Lm(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==hm&&(t.i=e.index_.toString()),t}class jm extends Sg{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:(Me(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,n,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=i,this.log_=Vp("p:rest:"),this.listens_={}}listen(e,t,n,i){const r=e._path.toString();this.log_("Listen called for "+r+" "+e._queryIdentifier);const s=jm.getListenId_(e,n),o={};this.listens_[s]=o;const a=Mm(e._queryParams);this.restRequest_(r+".json",a,(e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(r,a,!1,n),wt(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",i(t,null)}})}unlisten(e,t){const n=jm.getListenId_(e,t);delete this.listens_[n]}get(e){const t=Mm(e._queryParams),n=e._path.toString(),i=new Je;return this.restRequest_(n+".json",t,(e,t)=>{let r=t;404===e&&(r=null,e=null),null===e?(this.onDataUpdate_(n,r,!1,null),i.resolve(r)):i.reject(new Error(r))}),i.promise}refreshAuthToken(e){}restRequest_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(i=>{let[r,s]=i;r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+St(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let t=null;if(a.status>=200&&a.status<300){try{t=vt(a.responseText)}catch(e){Wp("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&Wp("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()})}}class Fm{constructor(){this.rootNode_=_m.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Um(){return{value:null,children:new Map}}function Vm(e,t,n){if(Fg(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const i=Ng(t);e.children.has(i)||e.children.set(i,Um());Vm(e.children.get(i),t=Og(t),n)}}function zm(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((e,n)=>{t(n,e)})}(e,(e,i)=>{zm(i,new Pg(t.toString()+"/"+e),n)})}class Bm{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Jp(this.last_,(e,n)=>{t[e]=t[e]-n}),this.last_=e,t}}class Wm{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Bm(e);const n=1e4+2e4*Math.random();ig(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;Jp(e,(e,i)=>{i>0&&bt(this.statsToReport_,e)&&(t[e]=i,n=!0)}),n&&this.server_.reportStats(t),ig(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Hm;function qm(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Hm||(Hm={}));class Km{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Hm.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Fg(this.path)){if(null!=this.affectedTree.value)return Me(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Pg(e));return new Km(Rg(),t,this.revert)}}return Me(Ng(this.path)===e,"operationForChild called for unrelated child."),new Km(Og(this.path),this.affectedTree,this.revert)}}class Gm{constructor(e,t){this.source=e,this.path=t,this.type=Hm.LISTEN_COMPLETE}operationForChild(e){return Fg(this.path)?new Gm(this.source,Rg()):new Gm(this.source,Og(this.path))}}class Ym{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Hm.OVERWRITE}operationForChild(e){return Fg(this.path)?new Ym(this.source,Rg(),this.snap.getImmediateChild(e)):new Ym(this.source,Og(this.path),this.snap)}}class Qm{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Hm.MERGE}operationForChild(e){if(Fg(this.path)){const t=this.children.subtree(new Pg(e));return t.isEmpty()?null:t.value?new Ym(this.source,Rg(),t.value):new Qm(this.source,Rg(),t)}return Me(Ng(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Qm(this.source,Og(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class $m{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Fg(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ng(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Xm{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Jm(e,t,n,i,r,s){const o=i.filter(e=>e.type===n);o.sort((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw Le("Should only compare child_ events.");const i=new Yg(t.childName,t.snapshotNode),r=new Yg(n.childName,n.snapshotNode);return e.index_.compare(i,r)}(e,t,n)),o.forEach(n=>{const i=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);r.forEach(r=>{r.respondsTo(n.type)&&t.push(r.createEvent(i,e.query_))})})}function Zm(e,t){return{eventCache:e,serverCache:t}}function ev(e,t,n,i){return Zm(new $m(t,n,i),e.serverCache)}function tv(e,t,n,i){return Zm(e.eventCache,new $m(t,n,i))}function nv(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function iv(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let rv;class sv{static fromObject(e){let t=new sv(null);return Jp(e,(e,n)=>{t=t.set(new Pg(e),n)}),t}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(rv||(rv=new tm(Yp)),rv);this.value=e,this.children=t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Rg(),value:this.value};if(Fg(e))return null;{const n=Ng(e),i=this.children.get(n);if(null!==i){const r=i.findRootMostMatchingPathAndValue(Og(e),t);if(null!=r){return{path:jg(new Pg(n),r.path),value:r.value}}return null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Fg(e))return this;{const t=Ng(e),n=this.children.get(t);return null!==n?n.subtree(Og(e)):new sv(null)}}set(e,t){if(Fg(e))return new sv(t,this.children);{const n=Ng(e),i=(this.children.get(n)||new sv(null)).set(Og(e),t),r=this.children.insert(n,i);return new sv(this.value,r)}}remove(e){if(Fg(e))return this.children.isEmpty()?new sv(null):new sv(null,this.children);{const t=Ng(e),n=this.children.get(t);if(n){const i=n.remove(Og(e));let r;return r=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&r.isEmpty()?new sv(null):new sv(this.value,r)}return this}}get(e){if(Fg(e))return this.value;{const t=Ng(e),n=this.children.get(t);return n?n.get(Og(e)):null}}setTree(e,t){if(Fg(e))return t;{const n=Ng(e),i=(this.children.get(n)||new sv(null)).setTree(Og(e),t);let r;return r=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),new sv(this.value,r)}}fold(e){return this.fold_(Rg(),e)}fold_(e,t){const n={};return this.children.inorderTraversal((i,r)=>{n[i]=r.fold_(jg(e,i),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,Rg(),t)}findOnPath_(e,t,n){const i=!!this.value&&n(t,this.value);if(i)return i;if(Fg(e))return null;{const i=Ng(e),r=this.children.get(i);return r?r.findOnPath_(Og(e),jg(t,i),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Rg(),t)}foreachOnPath_(e,t,n){if(Fg(e))return this;{this.value&&n(t,this.value);const i=Ng(e),r=this.children.get(i);return r?r.foreachOnPath_(Og(e),jg(t,i),n):new sv(null)}}foreach(e){this.foreach_(Rg(),e)}foreach_(e,t){this.children.inorderTraversal((n,i)=>{i.foreach_(jg(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}}class ov{constructor(e){this.writeTree_=e}static empty(){return new ov(new sv(null))}}function av(e,t,n){if(Fg(t))return new ov(new sv(n));{const i=e.writeTree_.findRootMostValueAndPath(t);if(null!=i){const r=i.path;let s=i.value;const o=Ug(r,t);return s=s.updateChild(o,n),new ov(e.writeTree_.set(r,s))}{const i=new sv(n),r=e.writeTree_.setTree(t,i);return new ov(r)}}}function lv(e,t,n){let i=e;return Jp(n,(e,n)=>{i=av(i,jg(t,e),n)}),i}function cv(e,t){if(Fg(t))return ov.empty();{const n=e.writeTree_.setTree(t,new sv(null));return new ov(n)}}function uv(e,t){return null!=hv(e,t)}function hv(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Ug(n.path,t)):null}function dv(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(hm,(e,n)=>{t.push(new Yg(e,n))}):e.writeTree_.children.inorderTraversal((e,n)=>{null!=n.value&&t.push(new Yg(e,n.value))}),t}function fv(e,t){if(Fg(t))return e;{const n=hv(e,t);return new ov(null!=n?new sv(n):e.writeTree_.subtree(t))}}function pv(e){return e.writeTree_.isEmpty()}function gv(e,t){return mv(Rg(),e.writeTree_,t)}function mv(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let i=null;return t.children.inorderTraversal((t,r)=>{".priority"===t?(Me(null!==r.value,"Priority writes must always be leaf nodes"),i=r.value):n=mv(jg(e,t),r,n)}),n.getChild(e).isEmpty()||null===i||(n=n.updateChild(jg(e,".priority"),i)),n}}function vv(e,t){return Rv(t,e)}function yv(e,t){const n=e.allWrites.findIndex(e=>e.writeId===t);Me(n>=0,"removeWrite called with nonexistent writeId.");const i=e.allWrites[n];e.allWrites.splice(n,1);let r=i.visible,s=!1,o=e.allWrites.length-1;for(;r&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&_v(t,i.path)?r=!1:zg(i.path,t.path)&&(s=!0)),o--}if(r){if(s)return function(e){e.visibleWrites=wv(e.allWrites,bv,Rg()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;if(i.snap)e.visibleWrites=cv(e.visibleWrites,i.path);else{Jp(i.children,t=>{e.visibleWrites=cv(e.visibleWrites,jg(i.path,t))})}return!0}return!1}function _v(e,t){if(e.snap)return zg(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&zg(jg(e.path,n),t))return!0;return!1}function bv(e){return e.visible}function wv(e,t,n){let i=ov.empty();for(let r=0;r<e.length;++r){const s=e[r];if(t(s)){const e=s.path;let t;if(s.snap)zg(n,e)?(t=Ug(n,e),i=av(i,t,s.snap)):zg(e,n)&&(t=Ug(e,n),i=av(i,Rg(),s.snap.getChild(t)));else{if(!s.children)throw Le("WriteRecord should have .snap or .children");if(zg(n,e))t=Ug(n,e),i=lv(i,t,s.children);else if(zg(e,n))if(t=Ug(e,n),Fg(t))i=lv(i,Rg(),s.children);else{const e=wt(s.children,Ng(t));if(e){const n=e.getChild(Og(t));i=av(i,Rg(),n)}}}}}return i}function xv(e,t,n,i,r){if(i||r){const s=fv(e.visibleWrites,t);if(!r&&pv(s))return n;if(r||null!=n||uv(s,Rg())){const s=function(e){return(e.visible||r)&&(!i||!~i.indexOf(e.writeId))&&(zg(e.path,t)||zg(t,e.path))};return gv(wv(e.allWrites,s,t),n||_m.EMPTY_NODE)}return null}{const i=hv(e.visibleWrites,t);if(null!=i)return i;{const i=fv(e.visibleWrites,t);if(pv(i))return n;if(null!=n||uv(i,Rg())){return gv(i,n||_m.EMPTY_NODE)}return null}}}function kv(e,t,n,i){return xv(e.writeTree,e.treePath,t,n,i)}function Ev(e,t){return function(e,t,n){let i=_m.EMPTY_NODE;const r=hv(e.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(hm,(e,t)=>{i=i.updateImmediateChild(e,t)}),i;if(n){const r=fv(e.visibleWrites,t);return n.forEachChild(hm,(e,t)=>{const n=gv(fv(r,new Pg(e)),t);i=i.updateImmediateChild(e,n)}),dv(r).forEach(e=>{i=i.updateImmediateChild(e.name,e.node)}),i}return dv(fv(e.visibleWrites,t)).forEach(e=>{i=i.updateImmediateChild(e.name,e.node)}),i}(e.writeTree,e.treePath,t)}function Cv(e,t,n,i){return function(e,t,n,i,r){Me(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=jg(t,n);if(uv(e.visibleWrites,s))return null;{const t=fv(e.visibleWrites,s);return pv(t)?r.getChild(n):gv(t,r.getChild(n))}}(e.writeTree,e.treePath,t,n,i)}function Sv(e,t){return function(e,t){return hv(e.visibleWrites,t)}(e.writeTree,jg(e.treePath,t))}function Tv(e,t,n,i,r,s){return function(e,t,n,i,r,s,o){let a;const l=fv(e.visibleWrites,t),c=hv(l,Rg());if(null!=c)a=c;else{if(null==n)return[];a=gv(l,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(i,o):a.getIteratorFrom(i,o);let l=n.getNext();for(;l&&e.length<r;)0!==t(l,i)&&e.push(l),l=n.getNext();return e}}(e.writeTree,e.treePath,t,n,i,r,s)}function Iv(e,t,n){return function(e,t,n,i){const r=jg(t,n),s=hv(e.visibleWrites,r);if(null!=s)return s;if(i.isCompleteForChild(n))return gv(fv(e.visibleWrites,r),i.getNode().getImmediateChild(n));return null}(e.writeTree,e.treePath,t,n)}function Pv(e,t){return Rv(jg(e.treePath,t),e.writeTree)}function Rv(e,t){return{treePath:e,writeTree:t}}class Nv{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;Me("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Me(".priority"!==n,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(n);if(i){const r=i.type;if("child_added"===t&&"child_removed"===r)this.changeMap.set(n,Tm(n,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===r)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===r)this.changeMap.set(n,Sm(n,i.oldSnap));else if("child_changed"===t&&"child_added"===r)this.changeMap.set(n,Cm(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==r)throw Le("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(n,Tm(n,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const Av=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class Ov{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new $m(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Iv(this.writes_,e,t)}}getChildAfterChild(e,t,n){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:iv(this.viewCache_),r=Tv(this.writes_,i,t,1,n,e);return 0===r.length?null:r[0]}}function Dv(e,t,n,i,r){const s=new Nv;let o,a;if(n.type===Hm.OVERWRITE){const l=n;l.source.fromUser?o=jv(e,t,l.path,l.snap,i,r,s):(Me(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered()&&!Fg(l.path),o=Lv(e,t,l.path,l.snap,i,r,a,s))}else if(n.type===Hm.MERGE){const l=n;l.source.fromUser?o=function(e,t,n,i,r,s,o){let a=t;return i.foreach((i,l)=>{const c=jg(n,i);Fv(t,Ng(c))&&(a=jv(e,a,c,l,r,s,o))}),i.foreach((i,l)=>{const c=jg(n,i);Fv(t,Ng(c))||(a=jv(e,a,c,l,r,s,o))}),a}(e,t,l.path,l.children,i,r,s):(Me(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.serverCache.isFiltered(),o=Vv(e,t,l.path,l.children,i,r,a,s))}else if(n.type===Hm.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,i,r,s){let o;if(null!=Sv(i,n))return t;{const a=new Ov(i,t,r),l=t.eventCache.getNode();let c;if(Fg(n)||".priority"===Ng(n)){let n;if(t.serverCache.isFullyInitialized())n=kv(i,iv(t));else{const e=t.serverCache.getNode();Me(e instanceof _m,"serverChildren would be complete if leaf node"),n=Ev(i,e)}c=e.filter.updateFullNode(l,n,s)}else{const r=Ng(n);let u=Iv(i,r,t.serverCache);null==u&&t.serverCache.isCompleteForChild(r)&&(u=l.getImmediateChild(r)),c=null!=u?e.filter.updateChild(l,r,u,Og(n),a,s):t.eventCache.getNode().hasChild(r)?e.filter.updateChild(l,r,_m.EMPTY_NODE,Og(n),a,s):l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=kv(i,iv(t)),o.isLeafNode()&&(c=e.filter.updateFullNode(c,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=Sv(i,Rg()),ev(t,c,o,e.filter.filtersNodes())}}(e,t,a.path,i,r,s):function(e,t,n,i,r,s,o){if(null!=Sv(r,n))return t;const a=t.serverCache.isFiltered(),l=t.serverCache;if(null!=i.value){if(Fg(n)&&l.isFullyInitialized()||l.isCompleteForPath(n))return Lv(e,t,n,l.getNode().getChild(n),r,s,a,o);if(Fg(n)){let i=new sv(null);return l.getNode().forEachChild(Jg,(e,t)=>{i=i.set(new Pg(e),t)}),Vv(e,t,n,i,r,s,a,o)}return t}{let c=new sv(null);return i.foreach((e,t)=>{const i=jg(n,e);l.isCompleteForPath(i)&&(c=c.set(e,l.getNode().getChild(i)))}),Vv(e,t,n,c,r,s,a,o)}}(e,t,a.path,a.affectedTree,i,r,s)}else{if(n.type!==Hm.LISTEN_COMPLETE)throw Le("Unknown operation type: "+n.type);o=function(e,t,n,i,r){const s=t.serverCache,o=tv(t,s.getNode(),s.isFullyInitialized()||Fg(n),s.isFiltered());return Mv(e,o,n,i,Av,r)}(e,t,n.path,i,s)}const l=s.getChanges();return function(e,t,n){const i=t.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=nv(e);(n.length>0||!e.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&n.push(Em(nv(t)))}}(t,o,l),{viewCache:o,changes:l}}function Mv(e,t,n,i,r,s){const o=t.eventCache;if(null!=Sv(i,n))return t;{let a,l;if(Fg(n))if(Me(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=iv(t),r=Ev(i,n instanceof _m?n:_m.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),r,s)}else{const n=kv(i,iv(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const c=Ng(n);if(".priority"===c){Me(1===Ag(n),"Can't have a priority with additional path components");const r=o.getNode();l=t.serverCache.getNode();const s=Cv(i,n,r,l);a=null!=s?e.filter.updatePriority(r,s):o.getNode()}else{const u=Og(n);let h;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();const e=Cv(i,n,o.getNode(),l);h=null!=e?o.getNode().getImmediateChild(c).updateChild(u,e):o.getNode().getImmediateChild(c)}else h=Iv(i,c,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),c,h,u,r,s):o.getNode()}}return ev(t,a,o.isFullyInitialized()||Fg(n),e.filter.filtersNodes())}}function Lv(e,t,n,i,r,s,o,a){const l=t.serverCache;let c;const u=o?e.filter:e.filter.getIndexedFilter();if(Fg(n))c=u.updateFullNode(l.getNode(),i,null);else if(u.filtersNodes()&&!l.isFiltered()){const e=l.getNode().updateChild(n,i);c=u.updateFullNode(l.getNode(),e,null)}else{const e=Ng(n);if(!l.isCompleteForPath(n)&&Ag(n)>1)return t;const r=Og(n),s=l.getNode().getImmediateChild(e).updateChild(r,i);c=".priority"===e?u.updatePriority(l.getNode(),s):u.updateChild(l.getNode(),e,s,r,Av,null)}const h=tv(t,c,l.isFullyInitialized()||Fg(n),u.filtersNodes());return Mv(e,h,n,r,new Ov(r,h,s),a)}function jv(e,t,n,i,r,s,o){const a=t.eventCache;let l,c;const u=new Ov(r,t,s);if(Fg(n))c=e.filter.updateFullNode(t.eventCache.getNode(),i,o),l=ev(t,c,!0,e.filter.filtersNodes());else{const r=Ng(n);if(".priority"===r)c=e.filter.updatePriority(t.eventCache.getNode(),i),l=ev(t,c,a.isFullyInitialized(),a.isFiltered());else{const s=Og(n),c=a.getNode().getImmediateChild(r);let h;if(Fg(s))h=i;else{const e=u.getCompleteChild(r);h=null!=e?".priority"===Dg(s)&&e.getChild(Lg(s)).isEmpty()?e:e.updateChild(s,i):_m.EMPTY_NODE}if(c.equals(h))l=t;else{l=ev(t,e.filter.updateChild(a.getNode(),r,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}}return l}function Fv(e,t){return e.eventCache.isCompleteForChild(t)}function Uv(e,t,n){return n.foreach((e,n)=>{t=t.updateChild(e,n)}),t}function Vv(e,t,n,i,r,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l,c=t;l=Fg(n)?i:new sv(null).setTree(n,i);const u=t.serverCache.getNode();return l.children.inorderTraversal((n,i)=>{if(u.hasChild(n)){const l=Uv(0,t.serverCache.getNode().getImmediateChild(n),i);c=Lv(e,c,new Pg(n),l,r,s,o,a)}}),l.children.inorderTraversal((n,i)=>{const l=!t.serverCache.isCompleteForChild(n)&&null===i.value;if(!u.hasChild(n)&&!l){const l=Uv(0,t.serverCache.getNode().getImmediateChild(n),i);c=Lv(e,c,new Pg(n),l,r,s,o,a)}}),c}class zv{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,i=new Im(n.getIndex()),r=(s=n).loadsAllData()?new Im(s.getIndex()):s.hasLimit()?new Rm(s):new Pm(s);var s;this.processor_=function(e){return{filter:e}}(r);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode(_m.EMPTY_NODE,o.getNode(),null),c=r.updateFullNode(_m.EMPTY_NODE,a.getNode(),null),u=new $m(l,o.isFullyInitialized(),i.filtersNodes()),h=new $m(c,a.isFullyInitialized(),r.filtersNodes());this.viewCache_=Zm(h,u),this.eventGenerator_=new Xm(this.query_)}get query(){return this.query_}}function Bv(e,t){const n=iv(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Fg(t)&&!n.getImmediateChild(Ng(t)).isEmpty())?n.getChild(t):null}function Wv(e){return 0===e.eventRegistrations_.length}function Hv(e,t,n){const i=[];if(n){Me(null==t,"A cancel should cancel all event registrations.");const r=e.query._path;e.eventRegistrations_.forEach(e=>{const t=e.createCancelEvent(n,r);t&&i.push(t)})}if(t){let n=[];for(let i=0;i<e.eventRegistrations_.length;++i){const r=e.eventRegistrations_[i];if(r.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(i+1));break}}else n.push(r)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return i}function qv(e,t,n,i){t.type===Hm.MERGE&&null!==t.source.queryId&&(Me(iv(e.viewCache_),"We should always have a full cache before handling merges"),Me(nv(e.viewCache_),"Missing event cache, even though we have a server cache"));const r=e.viewCache_,s=Dv(e.processor_,r,t,n,i);var o,a;return o=e.processor_,a=s.viewCache,Me(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Me(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Me(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,Kv(e,s.changes,s.viewCache.eventCache.getNode(),null)}function Kv(e,t,n,i){const r=i?[i]:e.eventRegistrations_;return function(e,t,n,i){const r=[],s=[];return t.forEach(t=>{var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))}),Jm(e,r,"child_removed",t,i,n),Jm(e,r,"child_added",t,i,n),Jm(e,r,"child_moved",s,i,n),Jm(e,r,"child_changed",t,i,n),Jm(e,r,"value",t,i,n),r}(e.eventGenerator_,t,n,r)}let Gv,Yv;class Qv{constructor(){this.views=new Map}}function $v(e,t,n,i){const r=t.source.queryId;if(null!==r){const s=e.views.get(r);return Me(null!=s,"SyncTree gave us an op for an invalid query."),qv(s,t,n,i)}{let r=[];for(const s of e.views.values())r=r.concat(qv(s,t,n,i));return r}}function Xv(e,t,n,i,r){const s=t._queryIdentifier,o=e.views.get(s);if(!o){let e=kv(n,r?i:null),s=!1;e?s=!0:i instanceof _m?(e=Ev(n,i),s=!1):(e=_m.EMPTY_NODE,s=!1);const o=Zm(new $m(e,s,!1),new $m(i,r,!1));return new zv(t,o)}return o}function Jv(e,t,n,i,r,s){const o=Xv(e,t,i,r,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,i=[];n.getNode().isLeafNode()||n.getNode().forEachChild(hm,(e,t)=>{i.push(Cm(e,t))});return n.isFullyInitialized()&&i.push(Em(n.getNode())),Kv(e,i,n.getNode(),t)}(o,n)}function Zv(e,t,n,i){const r=t._queryIdentifier,s=[];let o=[];const a=ry(e);if("default"===r)for(const[l,c]of e.views.entries())o=o.concat(Hv(c,n,i)),Wv(c)&&(e.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const t=e.views.get(r);t&&(o=o.concat(Hv(t,n,i)),Wv(t)&&(e.views.delete(r),t.query._queryParams.loadsAllData()||s.push(t.query)))}return a&&!ry(e)&&s.push(new(Me(Gv,"Reference.ts has not been loaded"),Gv)(t._repo,t._path)),{removed:s,events:o}}function ey(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function ty(e,t){let n=null;for(const i of e.views.values())n=n||Bv(i,t);return n}function ny(e,t){if(t._queryParams.loadsAllData())return sy(e);{const n=t._queryIdentifier;return e.views.get(n)}}function iy(e,t){return null!=ny(e,t)}function ry(e){return null!=sy(e)}function sy(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let oy=1;class ay{constructor(e){this.listenProvider_=e,this.syncPointTree_=new sv(null),this.pendingWriteTree_={visibleWrites:ov.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ly(e,t,n,i,r){return function(e,t,n,i,r){Me(i>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),e.allWrites.push({path:t,snap:n,writeId:i,visible:r}),r&&(e.visibleWrites=av(e.visibleWrites,t,n)),e.lastWriteId=i}(e.pendingWriteTree_,t,n,i,r),r?my(e,new Ym({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function cy(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=function(e,t){for(let n=0;n<e.allWrites.length;n++){const i=e.allWrites[n];if(i.writeId===t)return i}return null}(e.pendingWriteTree_,t);if(yv(e.pendingWriteTree_,t)){let t=new sv(null);return null!=i.snap?t=t.set(Rg(),!0):Jp(i.children,e=>{t=t.set(new Pg(e),!0)}),my(e,new Km(i.path,t,n))}return[]}function uy(e,t,n){return my(e,new Ym({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function hy(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=t._path,o=e.syncPointTree_.get(s);let a=[];if(o&&("default"===t._queryIdentifier||iy(o,t))){const l=Zv(o,t,n,i);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!r){const n=-1!==c.findIndex(e=>e._queryParams.loadsAllData()),r=e.syncPointTree_.findOnPath(s,(e,t)=>ry(t));if(n&&!r){const t=e.syncPointTree_.subtree(s);if(!t.isEmpty()){const n=function(e){return e.fold((e,t,n)=>{if(t&&ry(t)){return[sy(t)]}{let e=[];return t&&(e=ey(t)),Jp(n,(t,n)=>{e=e.concat(n)}),e}})}(t);for(let t=0;t<n.length;++t){const i=n[t],r=i.query,s=_y(e,i);e.listenProvider_.startListening(Cy(r),by(e,r),s.hashFn,s.onComplete)}}}if(!r&&c.length>0&&!i)if(n){const n=null;e.listenProvider_.stopListening(Cy(t),n)}else c.forEach(t=>{const n=e.queryToTagMap.get(wy(t));e.listenProvider_.stopListening(Cy(t),n)})}!function(e,t){for(let n=0;n<t.length;++n){const i=t[n];if(!i._queryParams.loadsAllData()){const t=wy(i),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,c)}return a}function dy(e,t,n,i){const r=xy(e,i);if(null!=r){const i=ky(r),s=i.path,o=i.queryId,a=Ug(s,t);return Ey(e,s,new Ym(qm(o),a,n))}return[]}function fy(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=t._path;let s=null,o=!1;e.syncPointTree_.foreachOnPath(r,(e,t)=>{const n=Ug(e,r);s=s||ty(t,n),o=o||ry(t)});let a,l=e.syncPointTree_.get(r);if(l?(o=o||ry(l),s=s||ty(l,Rg())):(l=new Qv,e.syncPointTree_=e.syncPointTree_.set(r,l)),null!=s)a=!0;else{a=!1,s=_m.EMPTY_NODE;e.syncPointTree_.subtree(r).foreachChild((e,t)=>{const n=ty(t,Rg());n&&(s=s.updateImmediateChild(e,n))})}const c=iy(l,t);if(!c&&!t._queryParams.loadsAllData()){const n=wy(t);Me(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const i=oy++;e.queryToTagMap.set(n,i),e.tagToQueryMap.set(i,n)}let u=Jv(l,t,n,vv(e.pendingWriteTree_,r),s,a);if(!c&&!o&&!i){const n=ny(l,t);u=u.concat(function(e,t,n){const i=t._path,r=by(e,t),s=_y(e,n),o=e.listenProvider_.startListening(Cy(t),r,s.hashFn,s.onComplete),a=e.syncPointTree_.subtree(i);if(r)Me(!ry(a.value),"If we're adding a query, it shouldn't be shadowed");else{const t=a.fold((e,t,n)=>{if(!Fg(e)&&t&&ry(t))return[sy(t).query];{let e=[];return t&&(e=e.concat(ey(t).map(e=>e.query))),Jp(n,(t,n)=>{e=e.concat(n)}),e}});for(let n=0;n<t.length;++n){const i=t[n];e.listenProvider_.stopListening(Cy(i),by(e,i))}}return o}(e,t,n))}return u}function py(e,t,n){const i=e.pendingWriteTree_,r=e.syncPointTree_.findOnPath(t,(e,n)=>{const i=ty(n,Ug(e,t));if(i)return i});return xv(i,t,r,n,!0)}function gy(e,t){const n=t._path;let i=null;e.syncPointTree_.foreachOnPath(n,(e,t)=>{const r=Ug(e,n);i=i||ty(t,r)});let r=e.syncPointTree_.get(n);r?i=i||ty(r,Rg()):(r=new Qv,e.syncPointTree_=e.syncPointTree_.set(n,r));const s=null!=i,o=s?new $m(i,!0,!1):null;return function(e){return nv(e.viewCache_)}(Xv(r,t,vv(e.pendingWriteTree_,t._path),s?o.getNode():_m.EMPTY_NODE,s))}function my(e,t){return vy(t,e.syncPointTree_,null,vv(e.pendingWriteTree_,Rg()))}function vy(e,t,n,i){if(Fg(e.path))return yy(e,t,n,i);{const r=t.get(Rg());null==n&&null!=r&&(n=ty(r,Rg()));let s=[];const o=Ng(e.path),a=e.operationForChild(o),l=t.children.get(o);if(l&&a){const e=n?n.getImmediateChild(o):null,t=Pv(i,o);s=s.concat(vy(a,l,e,t))}return r&&(s=s.concat($v(r,e,i,n))),s}}function yy(e,t,n,i){const r=t.get(Rg());null==n&&null!=r&&(n=ty(r,Rg()));let s=[];return t.children.inorderTraversal((t,r)=>{const o=n?n.getImmediateChild(t):null,a=Pv(i,t),l=e.operationForChild(t);l&&(s=s.concat(yy(l,r,o,a)))}),r&&(s=s.concat($v(r,e,i,n))),s}function _y(e,t){const n=t.query,i=by(e,n);return{hashFn:()=>{const e=function(e){return e.viewCache_.serverCache.getNode()}(t)||_m.EMPTY_NODE;return e.hash()},onComplete:t=>{if("ok"===t)return i?function(e,t,n){const i=xy(e,n);if(i){const n=ky(i),r=n.path,s=n.queryId,o=Ug(r,t);return Ey(e,r,new Gm(qm(s),o))}return[]}(e,n._path,i):function(e,t){return my(e,new Gm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const i=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const i=new Error(e+" at "+t._path.toString()+": "+n);return i.code=e.toUpperCase(),i}(t,n);return hy(e,n,null,i)}}}}function by(e,t){const n=wy(t);return e.queryToTagMap.get(n)}function wy(e){return e._path.toString()+"$"+e._queryIdentifier}function xy(e,t){return e.tagToQueryMap.get(t)}function ky(e){const t=e.indexOf("$");return Me(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new Pg(e.substr(0,t))}}function Ey(e,t,n){const i=e.syncPointTree_.get(t);Me(i,"Missing sync point for query tag that we're tracking");return $v(i,n,vv(e.pendingWriteTree_,t),null)}function Cy(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new(Me(Yv,"Reference.ts has not been loaded"),Yv)(e._repo,e._path):e}class Sy{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Sy(t)}node(){return this.node_}}class Ty{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=jg(this.path_,e);return new Ty(this.syncTree_,t)}node(){return py(this.syncTree_,this.path_)}}const Iy=function(e,t,n){return e&&"object"===typeof e?(Me(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Py(e[".sv"],t,n):"object"===typeof e[".sv"]?Ry(e[".sv"],t):void Me(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Py=function(e,t,n){if("timestamp"===e)return n.timestamp;Me(!1,"Unexpected server value: "+e)},Ry=function(e,t,n){e.hasOwnProperty("increment")||Me(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const i=e.increment;"number"!==typeof i&&Me(!1,"Unexpected increment value: "+i);const r=t.node();if(Me(null!==r&&"undefined"!==typeof r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const s=r.getValue();return"number"!==typeof s?i:s+i},Ny=function(e,t,n,i){return Oy(t,new Ty(n,e),i)},Ay=function(e,t,n){return Oy(e,new Sy(t),n)};function Oy(e,t,n){const i=e.getPriority().val(),r=Iy(i,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const i=e,s=Iy(i.getValue(),t,n);return s!==i.getValue()||r!==i.getPriority().val()?new um(s,wm(r)):e}{const i=e;return s=i,r!==i.getPriority().val()&&(s=s.updatePriority(new um(r))),i.forEachChild(hm,(e,i)=>{const r=Oy(i,t.getImmediateChild(e),n);r!==i&&(s=s.updateImmediateChild(e,r))}),s}}class Dy{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};this.name=e,this.parent=t,this.node=n}}function My(e,t){let n=t instanceof Pg?t:new Pg(t),i=e,r=Ng(n);for(;null!==r;){const e=wt(i.node.children,r)||{children:{},childCount:0};i=new Dy(r,i,e),n=Og(n),r=Ng(n)}return i}function Ly(e){return e.node.value}function jy(e,t){e.node.value=t,By(e)}function Fy(e){return e.node.childCount>0}function Uy(e,t){Jp(e.node.children,(n,i)=>{t(new Dy(n,e,i))})}function Vy(e,t,n,i){n&&!i&&t(e),Uy(e,e=>{Vy(e,t,!0,i)}),n&&i&&t(e)}function zy(e){return new Pg(null===e.parent?e.name:zy(e.parent)+"/"+e.name)}function By(e){null!==e.parent&&function(e,t,n){const i=function(e){return void 0===Ly(e)&&!Fy(e)}(n),r=bt(e.node.children,t);i&&r?(delete e.node.children[t],e.node.childCount--,By(e)):i||r||(e.node.children[t]=n.node,e.node.childCount++,By(e))}(e.parent,e.name,e)}const Wy=/[\[\].#$\/\u0000-\u001F\u007F]/,Hy=/[\[\].#$\u0000-\u001F\u007F]/,qy=10485760,Ky=function(e){return"string"===typeof e&&0!==e.length&&!Wy.test(e)},Gy=function(e){return"string"===typeof e&&0!==e.length&&!Hy.test(e)},Yy=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!Hp(e)||e&&"object"===typeof e&&bt(e,".sv")},Qy=function(e,t,n,i){i&&void 0===t||$y(At(e,"value"),t,n)},$y=function(e,t,n){const i=n instanceof Pg?new Bg(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Hg(i));if("function"===typeof t)throw new Error(e+"contains a function "+Hg(i)+" with contents = "+t.toString());if(Hp(t))throw new Error(e+"contains "+t.toString()+" "+Hg(i));if("string"===typeof t&&t.length>qy/3&&Ot(t)>qy)throw new Error(e+"contains a string greater than "+qy+" utf8 bytes "+Hg(i)+" ('"+t.substring(0,50)+"...')");if(t&&"object"===typeof t){let n=!1,r=!1;if(Jp(t,(t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(r=!0,!Ky(t)))throw new Error(e+" contains an invalid key ("+t+") "+Hg(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Ot(t),Wg(e)}(i,t),$y(e,s,i),function(e){const t=e.parts_.pop();e.byteLength_-=Ot(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)}),n&&r)throw new Error(e+' contains ".value" child '+Hg(i)+" in addition to actual children.")}},Xy=function(e,t,n,i){if((!i||void 0!==n)&&!Ky(n))throw new Error(At(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Jy=function(e,t,n,i){if((!i||void 0!==n)&&!Gy(n))throw new Error(At(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Zy=function(e,t){if(".info"===Ng(t))throw new Error(e+" failed = Can't modify data under /.info/")},e_=function(e,t){const n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!Ky(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Gy(e)}(n))throw new Error(At(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class t_{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function n_(e,t){let n=null;for(let i=0;i<t.length;i++){const r=t[i],s=r.getPath();null===n||Vg(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(r)}n&&e.eventLists_.push(n)}function i_(e,t,n){n_(e,n),s_(e,e=>Vg(e,t))}function r_(e,t,n){n_(e,n),s_(e,e=>zg(e,t)||zg(t,e))}function s_(e,t){e.recursionDepth_++;let n=!0;for(let i=0;i<e.eventLists_.length;i++){const r=e.eventLists_[i];if(r){t(r.path)?(o_(e.eventLists_[i]),e.eventLists_[i]=null):n=!1}}n&&(e.eventLists_=[]),e.recursionDepth_--}function o_(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const i=n.getEventRunner();Lp&&Up("event: "+n.toString()),ng(i)}}}const a_="repo_interrupt";class l_{constructor(e,t,n,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new t_,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Um(),this.transactionQueueTree_=new Dy,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function c_(e,t,n){if(e.stats_=vg(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new jm(e.repoInfo_,(t,n,i,r)=>{d_(e,t,n,i,r)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>f_(e,!0),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{yt(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}e.persistentConnection_=new Gg(e.repoInfo_,t,(t,n,i,r)=>{d_(e,t,n,i,r)},t=>{f_(e,t)},t=>{!function(e,t){Jp(t,(t,n)=>{p_(e,t,n)})}(e,t)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=function(e,t){const n=e.toString();return mg[n]||(mg[n]=t()),mg[n]}(e.repoInfo_,()=>new Wm(e.stats_,e.server_)),e.infoData_=new Fm,e.infoSyncTree_=new ay({startListening:(t,n,i,r)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=uy(e.infoSyncTree_,t._path,o),setTimeout(()=>{r("ok")},0)),s},stopListening:()=>{}}),p_(e,"connected",!1),e.serverSyncTree_=new ay({startListening:(t,n,i,r)=>(e.server_.listen(t,i,n,(n,i)=>{const s=r(n,i);r_(e.eventQueue_,t._path,s)}),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}function u_(e){const t=e.infoData_.getNode(new Pg(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function h_(e){return(t=(t={timestamp:u_(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function d_(e,t,n,i,r){e.dataUpdateCount++;const s=new Pg(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(r)if(i){const t=kt(n,e=>wm(e));o=function(e,t,n,i){const r=xy(e,i);if(r){const i=ky(r),s=i.path,o=i.queryId,a=Ug(s,t),l=sv.fromObject(n);return Ey(e,s,new Qm(qm(o),a,l))}return[]}(e.serverSyncTree_,s,t,r)}else{const t=wm(n);o=dy(e.serverSyncTree_,s,t,r)}else if(i){const t=kt(n,e=>wm(e));o=function(e,t,n){const i=sv.fromObject(n);return my(e,new Qm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,i))}(e.serverSyncTree_,s,t)}else{const t=wm(n);o=uy(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=k_(e,s)),r_(e.eventQueue_,a,o)}function f_(e,t){p_(e,"connected",t),!1===t&&function(e){__(e,"onDisconnectEvents");const t=h_(e),n=Um();zm(e.onDisconnect_,Rg(),(i,r)=>{const s=Ny(i,r,e.serverSyncTree_,t);Vm(n,i,s)});let i=[];zm(n,Rg(),(t,n)=>{i=i.concat(uy(e.serverSyncTree_,t,n));const r=I_(e,t);k_(e,r)}),e.onDisconnect_=Um(),r_(e.eventQueue_,Rg(),i)}(e)}function p_(e,t,n){const i=new Pg("/.info/"+t),r=wm(n);e.infoData_.updateSnapshot(i,r);const s=uy(e.infoSyncTree_,i,r);r_(e.eventQueue_,i,s)}function g_(e){return e.nextWriteId_++}function m_(e,t,n,i,r){__(e,"set",{path:t.toString(),value:n,priority:i});const s=h_(e),o=wm(n,i),a=py(e.serverSyncTree_,t),l=Ay(o,a,s),c=g_(e),u=ly(e.serverSyncTree_,t,l,c,!0);n_(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),(n,i)=>{const s="ok"===n;s||Wp("set at "+t+" failed: "+n);const o=cy(e.serverSyncTree_,c,!s);r_(e.eventQueue_,t,o),b_(e,r,n,i)});const h=I_(e,t);k_(e,h),r_(e.eventQueue_,h,[])}function v_(e,t,n){let i;i=".info"===Ng(t._path)?hy(e.infoSyncTree_,t,n):hy(e.serverSyncTree_,t,n),i_(e.eventQueue_,t._path,i)}function y_(e){e.persistentConnection_&&e.persistentConnection_.interrupt(a_)}function __(e){let t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];Up(t,...i)}function b_(e,t,n,i){t&&ng(()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let r=e;i&&(r+=": "+i);const s=new Error(r);s.code=e,t(s)}})}function w_(e,t,n){return py(e.serverSyncTree_,t,n)||_m.EMPTY_NODE}function x_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||T_(e,t),Ly(t)){const n=C_(e,t);Me(n.length>0,"Sending zero length transaction queue");n.every(e=>0===e.status)&&function(e,t,n){const i=n.map(e=>e.currentWriteId),r=w_(e,t,i);let s=r;const o=r.hash();for(let c=0;c<n.length;c++){const e=n[c];Me(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const i=Ug(t,e.path);s=s.updateChild(i,e.currentOutputSnapshotRaw)}const a=s.val(!0),l=t;e.server_.put(l.toString(),a,i=>{__(e,"transaction put response",{path:l.toString(),status:i});let r=[];if("ok"===i){const i=[];for(let t=0;t<n.length;t++)n[t].status=2,r=r.concat(cy(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&i.push(()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)),n[t].unwatcher();T_(e,My(e.transactionQueueTree_,t)),x_(e,e.transactionQueueTree_),r_(e.eventQueue_,t,r);for(let e=0;e<i.length;e++)ng(i[e])}else{if("datastale"===i)for(let e=0;e<n.length;e++)3===n[e].status?n[e].status=4:n[e].status=0;else{Wp("transaction at "+l.toString()+" failed: "+i);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=i}k_(e,t)}},o)}(e,zy(t),n)}else Fy(t)&&Uy(t,t=>{x_(e,t)})}function k_(e,t){const n=E_(e,t),i=zy(n);return function(e,t,n){if(0===t.length)return;const i=[];let r=[];const s=t.filter(e=>0===e.status),o=s.map(e=>e.currentWriteId);for(let a=0;a<t.length;a++){const s=t[a],l=Ug(n,s.path);let c,u=!1;if(Me(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===s.status)u=!0,c=s.abortReason,r=r.concat(cy(e.serverSyncTree_,s.currentWriteId,!0));else if(0===s.status)if(s.retryCount>=25)u=!0,c="maxretry",r=r.concat(cy(e.serverSyncTree_,s.currentWriteId,!0));else{const n=w_(e,s.path,o);s.currentInputSnapshot=n;const i=t[a].update(n.val());if(void 0!==i){$y("transaction failed: Data returned ",i,s.path);let t=wm(i);"object"===typeof i&&null!=i&&bt(i,".priority")||(t=t.updatePriority(n.getPriority()));const a=s.currentWriteId,l=h_(e),c=Ay(t,n,l);s.currentOutputSnapshotRaw=t,s.currentOutputSnapshotResolved=c,s.currentWriteId=g_(e),o.splice(o.indexOf(a),1),r=r.concat(ly(e.serverSyncTree_,s.path,c,s.currentWriteId,s.applyLocally)),r=r.concat(cy(e.serverSyncTree_,a,!0))}else u=!0,c="nodata",r=r.concat(cy(e.serverSyncTree_,s.currentWriteId,!0))}r_(e.eventQueue_,n,r),r=[],u&&(t[a].status=2,function(e){setTimeout(e,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&("nodata"===c?i.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):i.push(()=>t[a].onComplete(new Error(c),!1,null))))}T_(e,e.transactionQueueTree_);for(let a=0;a<i.length;a++)ng(i[a]);x_(e,e.transactionQueueTree_)}(e,C_(e,n),i),i}function E_(e,t){let n,i=e.transactionQueueTree_;for(n=Ng(t);null!==n&&void 0===Ly(i);)i=My(i,n),n=Ng(t=Og(t));return i}function C_(e,t){const n=[];return S_(e,t,n),n.sort((e,t)=>e.order-t.order),n}function S_(e,t,n){const i=Ly(t);if(i)for(let r=0;r<i.length;r++)n.push(i[r]);Uy(t,t=>{S_(e,t,n)})}function T_(e,t){const n=Ly(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,jy(t,n.length>0?n:void 0)}Uy(t,t=>{T_(e,t)})}function I_(e,t){const n=zy(E_(e,t)),i=My(e.transactionQueueTree_,t);return function(e,t,n){let i=n?e:e.parent;for(;null!==i;){if(t(i))return!0;i=i.parent}}(i,t=>{P_(e,t)}),P_(e,i),Vy(i,t=>{P_(e,t)}),n}function P_(e,t){const n=Ly(t);if(n){const i=[];let r=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?(Me(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):(Me(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),r=r.concat(cy(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&i.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?jy(t,void 0):n.length=s+1,r_(e.eventQueue_,zy(t),r);for(let e=0;e<i.length;e++)ng(i[e])}}const R_=function(e,t){const n=N_(e),i=n.namespace;"firebase.com"===n.domain&&Bp(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),i&&"undefined"!==i||"localhost"===n.domain||Bp("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Wp("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");const r="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new dg(n.host,n.secure,i,r,t,"",i!==n.subdomain),path:new Pg(n.pathString)}},N_=function(e){let t="",n="",i="",r="",s="",o=!0,a="https",l=443;if("string"===typeof e){let c=e.indexOf("//");c>=0&&(a=e.substring(0,c-1),e=e.substring(c+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(r=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(i){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const i=n.split("=");2===i.length?t[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Wp("Invalid query segment '".concat(n,"' in query '").concat(e,"'"))}return t}(e.substring(Math.min(e.length,h)));c=t.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(t.substring(c+1),10)):c=t.length;const f=t.slice(0,c);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");i=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=i}"ns"in d&&(s=d.ns)}return{host:t,port:l,domain:n,subdomain:i,secure:o,scheme:a,pathString:r,namespace:s}},A_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz";!function(){let e=0;const t=[]}();class O_{constructor(e,t,n,i){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+yt(this.snapshot.exportVal())}}class D_{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class M_{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return Me(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class L_{constructor(e,t,n,i){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=i}get key(){return Fg(this._path)?null:Dg(this._path)}get ref(){return new V_(this._repo,this._path)}get _queryIdentifier(){const e=Lm(this._queryParams),t=$p(e);return"{}"===t?"default":t}get _queryObject(){return Lm(this._queryParams)}isEqual(e){if(!((e=Mt(e))instanceof L_))return!1;const t=this._repo===e._repo,n=Vg(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return t&&n&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function j_(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function F_(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Jg){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==qp)throw new Error(i);if("string"!==typeof t)throw new Error(r)}if(e.hasEnd()){if(e.getIndexEndName()!==Kp)throw new Error(i);if("string"!==typeof n)throw new Error(r)}}else if(e.getIndex()===hm){if(null!=t&&!Yy(t)||null!=n&&!Yy(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Me(e.getIndex()instanceof xm||e.getIndex()===km,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function U_(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class V_ extends L_{constructor(e,t){super(e,t,new Nm,!1)}get parent(){const e=Lg(this._path);return null===e?null:new V_(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class z_{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Pg(e),n=W_(this.ref,e);return new z_(this._node.getChild(t),n,hm)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){if(this._node.isLeafNode())return!1;return!!this._node.forEachChild(this._index,(t,n)=>e(new z_(n,W_(this.ref,t),hm)))}hasChild(e){const t=new Pg(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function B_(e,t){return(e=Mt(e))._checkNotDeleted("ref"),void 0!==t?W_(e._root,t):e._root}function W_(e,t){var n,i,r,s;return null===Ng((e=Mt(e))._path)?(n="child",i="path",s=!1,(r=t)&&(r=r.replace(/^\/*\.info(\/|$)/,"/")),Jy(n,i,r,s)):Jy("child","path",t,!1),new V_(e._repo,jg(e._path,t))}function H_(e,t){e=Mt(e),Zy("set",e._path),Qy("set",t,e._path,!1);const n=new Je;return m_(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function q_(e){e=Mt(e);const t=new M_(()=>{}),n=new K_(t);return function(e,t,n){const i=gy(e.serverSyncTree_,t);return null!=i?Promise.resolve(i):e.server_.get(t).then(i=>{const r=wm(i).withIndex(t._queryParams.getIndex());let s;if(fy(e.serverSyncTree_,t,n,!0),t._queryParams.loadsAllData())s=uy(e.serverSyncTree_,t._path,r);else{const n=by(e.serverSyncTree_,t);s=dy(e.serverSyncTree_,t._path,r,n)}return r_(e.eventQueue_,t._path,s),hy(e.serverSyncTree_,t,n,null,!0),r},n=>(__(e,"get for query "+yt(t)+" failed: "+n),Promise.reject(new Error(n))))}(e._repo,e,n).then(t=>new z_(t,new V_(e._repo,e._path),e._queryParams.getIndex()))}class K_{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new O_("value",this,new z_(e.snapshotNode,new V_(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new D_(this,e,t):null}matches(e){return e instanceof K_&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class G_{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new D_(this,e,t):null}createEvent(e,t){Me(null!=e.childName,"Child events should have a childName.");const n=W_(new V_(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new O_(e.type,this,new z_(e.snapshotNode,n,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof G_&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))}hasAnyCallback(){return!!this.callbackContext}}function Y_(e,t,n,i,r){let s;if("object"===typeof i&&(s=void 0,r=i),"function"===typeof i&&(s=i),r&&r.onlyOnce){const t=n,i=(n,i)=>{v_(e._repo,e,a),t(n,i)};i.userCallback=n.userCallback,i.context=n.context,n=i}const o=new M_(n,s||void 0),a="value"===t?new K_(o):new G_(t,o);return function(e,t,n){let i;i=".info"===Ng(t._path)?fy(e.infoSyncTree_,t,n):fy(e.serverSyncTree_,t,n),i_(e.eventQueue_,t._path,i)}(e._repo,e,a),()=>v_(e._repo,e,a)}function Q_(e,t,n,i){return Y_(e,"value",t,n,i)}class $_{}class X_ extends $_{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){Qy("endAt",this._value,e._path,!0);const t=Om(e._queryParams,this._value,this._key);if(U_(t),F_(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new L_(e._repo,e._path,t,e._orderByCalled)}}class J_ extends $_{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){Qy("startAt",this._value,e._path,!0);const t=Am(e._queryParams,this._value,this._key);if(U_(t),F_(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new L_(e._repo,e._path,t,e._orderByCalled)}}class Z_ extends $_{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){j_(e,"orderByChild");const t=new Pg(this._path);if(Fg(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new xm(t),i=Dm(e._queryParams,n);return F_(i),new L_(e._repo,e._path,i,!0)}}class eb extends $_{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(Qy("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new X_(this._value,this._key)._apply(new J_(this._value,this._key)._apply(e))}}!function(e){Me(!Gv,"__referenceConstructor has already been defined"),Gv=e}(V_),function(e){Me(!Yv,"__referenceConstructor has already been defined"),Yv=e}(V_);const tb={};let nb=!1;function ib(e,t,n,i,r){let s=i||e.options.databaseURL;void 0===s&&(e.options.projectId||Bp("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Up("Using default host for project ",e.options.projectId),s="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));let o,a,l=R_(s,r),c=l.repoInfo;"undefined"!==typeof process&&(a={NODE_ENV:"production",PUBLIC_URL:"/capacitiprojectbase",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s="http://".concat(a,"?ns=").concat(c.namespace),l=R_(s,r),c=l.repoInfo):o=!l.repoInfo.secure;const u=r&&o?new og(og.OWNER):new sg(e.name,e.options,t);e_("Invalid Firebase Database URL",l),Fg(l.path)||Bp("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,i){let r=tb[t.name];r||(r={},tb[t.name]=r);let s=r[e.toURLString()];s&&Bp("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return s=new l_(e,nb,n,i),r[e.toURLString()]=s,s}(c,e,u,new rg(e,n));return new rb(h,e)}class rb{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(c_(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new V_(this._repo,Rg())),this._rootInternal}_delete(){return null!==this._rootInternal&&(!function(e,t){const n=tb[t];n&&n[e.key]===e||Bp("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),y_(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Bp("Cannot call "+e+" on a deleted database.")}}Gg.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Gg.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){Sp(Jn),Gn(new Lt("database",(e,t)=>{let{instanceIdentifier:n}=t;return ib(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)},"PUBLIC").setMultipleInstances(!0)),ti(kp,Ep,e),ti(kp,Ep,"esm2017")}();const sb=Zn({apiKey:"AIzaSyBDefXftbk3Ib3MK0Ohq6CgTAtPKfHyF4M",authDomain:"digital-resource-system.firebaseapp.com",projectId:"digital-resource-system",storageBucket:"digital-resource-system.firebasestorage.app",messagingSenderId:"937020358229",appId:"1:937020358229:web:7f5466bddccea8a9449edc",measurementId:"G-PR1QZHR7E8",databaseURL:"https://digital-resource-system-default-rtdb.europe-west1.firebasedatabase.app"}),ob=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ei();e=Mt(e);const t=Yn(e,tr);t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Yn(e,tr);if(n.isInitialized()){const e=n.getImmediate();if(Et(t,n.getOptions()))return e;throw rr.create("already-initialized")}const i=n.initialize({options:t})}(e)}(sb),function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ei();const t=Yn(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Yn(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Et(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Ur(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:il,persistence:[fa,Go,Jo]}),i=Xe("authTokenSyncURL");if(i&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(i,location.origin);if(location.origin===e.origin){const t=(r=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>al)return;const i=null===t||void 0===t?void 0:t.token;ll!==i&&(ll=i,await fetch(r,{method:i?"POST":"DELETE",headers:i?{Authorization:"Bearer ".concat(i)}:{}}))});!function(e,t,n){Mt(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,i){Mt(e).onIdTokenChanged(t,n,i)}(n,e=>t(e))}}var r;const s=Ye("auth");return s&&oo(n,"http://".concat(s)),n}(sb)),ab=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ei(),t=arguments.length>1?arguments[1]:void 0;const n=Yn(e,"database").getImmediate({identifier:t});if(!n._instanceStarted){const e=Qe("database");e&&function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Mt(e),e._checkNotDeleted("useEmulator");const r="".concat(t,":").concat(n),s=e._repoInternal;if(e._instanceStarted){if(r===e._repoInternal.repoInfo_.host&&Et(i,s.repoInfo_.emulatorOptions))return;Bp("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let o;if(s.repoInfo_.nodeAdmin)i.mockUserToken&&Bp('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new og(og.OWNER);else if(i.mockUserToken){const t="string"===typeof i.mockUserToken?i.mockUserToken:tt(i.mockUserToken,e.app.options.projectId);o=new og(t)}Ze(t)&&(et(t),rt("Database",!0));!function(e,t,n,i){const r=t.lastIndexOf(":"),s=Ze(t.substring(0,r));e.repoInfo_=new dg(t,s,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams,!0,n),i&&(e.authTokenProvider_=i)}(s,r,i,o)}(n,...e)}return n}(sb),lb=(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ei(),t=arguments.length>1?arguments[1]:void 0;e=Mt(e);const n=Yn(e,wp).getImmediate({identifier:t}),i=Qe("storage");i&&function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n);const r=Ze(t);r&&(et("https://".concat(e.host,"/b")),rt("Storage",!0)),e._isUsingEmulator=!0,e._protocol=r?"https":"http";const{mockUserToken:s}=i;s&&(e._overrideAuthToken="string"===typeof s?s:tt(s,e.app.options.projectId))}(e,t,n,i)}(n,...i)}(sb),async(e,t,n,i)=>{const{email:r,password:s,username:o,adminCode:a}=t;try{if(n){const e=await async function(e,t,n){if(Qn(e.app))return Promise.reject(Br(e));const i=Ys(e),r=ro(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Po,"EMAIL_PASSWORD_PROVIDER"),s=await r.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Uo(e),t}),o=await Ro._fromIdTokenResponse(i,"signIn",s);return await i._updateCurrentUser(o.user),o}(ob,r,s),t=e.user,n=i&&"Adm1@"===a?"admin":"user";await Vo(t);const l={name:o,role:n,email:r,createdAt:(new Date).toISOString(),emailVerified:!1};return await H_(B_(ab,"users/".concat(t.uid)),l),await H_(B_(ab,"userDownloads/".concat(t.uid)),{}),alert("Registered! Please verify your email."),await ob.signOut(),null}{const e=await function(e,t,n){return Qn(e.app)?Promise.reject(Br(e)):jo(Mt(e),xo.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Uo(e),t})}(ob,r,s),t=e.user;if(!t.emailVerified)return await ob.signOut(),alert("Verify your email before logging in."),null;const n=(await q_(B_(ab,"users/".concat(t.uid)))).val();return(null===n||void 0===n?void 0:n.role)||"user"}}catch(l){return"auth/account-exists-with-different-credential"===l.code?alert("This email is linked to a different sign-in method. Try signing in with Google."):alert(l.message),console.error("Auth error:",l.code,l.message),null}}),cb=async()=>{const e=new So;try{const t=await async function(e,t,n){if(Qn(e.app))return Promise.reject(Vr(e,"operation-not-supported-in-this-environment"));const i=Ys(e);Wr(e,t,ko);const r=_a(i,n);return new Sa(i,"signInViaPopup",t,r).executeNotNull()}(ob,e),n=t.user;(await q_(B_(ab,"users/".concat(n.uid)))).exists()||(await H_(B_(ab,"users/".concat(n.uid)),{name:n.displayName||"No name",email:n.email,role:"user",createdAt:(new Date).toISOString(),emailVerified:n.emailVerified}),await H_(B_(ab,"userDownloads/".concat(n.uid)),{}));const i=(await q_(B_(ab,"users/".concat(n.uid)))).val();return(null===i||void 0===i?void 0:i.role)||"user"}catch(zp){return"auth/popup-closed-by-user"===zp.code?alert("Popup closed before completing sign in."):alert(zp.message),console.error("Google Sign-In Error:",zp.code,zp.message),null}},ub=e=>{let t=0;return e.length>=8&&t++,/[A-Z]/.test(e)&&t++,/\d/.test(e)&&t++,/[!@#$%^&*]/.test(e)&&t++,t},hb=e=>{let{password:t}=e;const n=ub(t);return(0,ke.jsxs)("div",{className:"password-strength-wrapper",children:[(0,ke.jsx)("div",{className:"password-strength-bar",children:(0,ke.jsx)("div",{style:{width:"".concat(n/4*100,"%"),height:"0.5rem",background:(i=n,["linear-gradient(to right, #ccc, #ccc)","linear-gradient(to right, #ff6666, #ff9999)","linear-gradient(to right, #ff9966, #ffcc66)","linear-gradient(to right, #ffcc66, #ccff66)","linear-gradient(to right, #66cc66, #00cc66)"][i]),borderRadius:"0.25rem",transition:"width 0.3s ease, background 0.3s ease"}})}),(0,ke.jsx)("div",{className:"password-strength-label",style:{color:(e=>["#cfcfcf","#ff8484","#ffb647","#dada3b","#3fc03f"][e])(n)},children:(e=>["Too Short","Weak","Fair","Good","Strong"][e])(n)})]});var i},db=e=>{let{isSignUp:n,isAdmin:i,setIsSignUp:r,setShowForgotPassword:s}=e;const[o,a]=(0,t.useState)({username:"",email:"",password:"",adminCode:"",rememberMe:!1}),[l,u]=(0,t.useState)(!1),h=e=>{a(c(c({},o),{},{[e.target.name]:e.target.value}))};return(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsxs)("form",{onSubmit:e=>{e.preventDefault(),lb(0,o,n,i)},className:"auth-form",children:[n&&(0,ke.jsx)("input",{type:"text",name:"username",placeholder:"Enter username",value:o.username,onChange:h,required:!0}),(0,ke.jsx)("input",{type:"email",name:"email",placeholder:"Enter email",value:o.email,onChange:h,required:!0}),(0,ke.jsxs)("div",{className:"password-wrapper",children:[(0,ke.jsx)("input",{type:l?"text":"password",name:"password",placeholder:"Password",value:o.password,onChange:h,required:!0,className:"password-input"}),(0,ke.jsx)("span",{className:"toggle-password-icon",onClick:()=>{u(e=>!e)},role:"button","aria-label":"Toggle password visibility"})]}),(0,ke.jsx)(hb,{password:o.password}),i&&(0,ke.jsx)("input",{type:"text",name:"adminCode",placeholder:"Admin Code",value:o.adminCode,onChange:h}),(0,ke.jsx)("button",{type:"submit",className:"auth-button",children:n?"Register":"Login"}),(0,ke.jsx)("p",{className:"toggle-form-text",onClick:()=>r(!n),children:n?"Already have an account? Login":"Don\u2019t have an account? Register"})]}),!n&&(0,ke.jsx)("p",{className:"forgot-password-text",onClick:()=>s(!0),children:"Forgot Password?"})]})},fb=e=>{let{setShowForgotPassword:n}=e;const[i,r]=(0,t.useState)("");return(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await async function(e,t,n){const i=Ys(e),r={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Fo(i,r,n),await ro(i,r,"getOobCode",po,"EMAIL_PASSWORD_PROVIDER")}(ob,i),alert("Password reset email sent."),n(!1)}catch(zp){alert(zp.message)}},className:"auth-form",children:[(0,ke.jsx)("input",{type:"email",placeholder:"Enter your email",value:i,onChange:e=>r(e.target.value),required:!0}),(0,ke.jsx)("button",{type:"submit",className:"auth-button",children:"Reset Password"})]}),(0,ke.jsx)("p",{className:"back-to-login-text",onClick:()=>n(!1),children:"Back to Login"})]})},pb=()=>{const[e,n]=(0,t.useState)(!1),[i,r]=(0,t.useState)(!1),[s,o]=(0,t.useState)(!1),a=ie();return(0,ke.jsxs)("div",{className:"auth-container",children:[(0,ke.jsx)(Pe,{}),s?(0,ke.jsx)(fb,{setShowForgotPassword:o}):(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)(Ne,{isAdmin:i,setIsAdmin:r}),(0,ke.jsx)(db,{isSignUp:e,isAdmin:i,setIsSignUp:n,setShowForgotPassword:o,onSubmit:async t=>{const n=await lb(0,t,e,i);n&&a("admin"===n?"/admin-dashboard":"/dashboard")}}),(0,ke.jsxs)("div",{className:"google-signin-wrapper",children:[(0,ke.jsx)("div",{className:"divider",children:"OR"}),(0,ke.jsxs)("button",{className:"google-signin-btn",onClick:async()=>{const e=await cb();e&&a("admin"===e?"/admin-dashboard":"/dashboard")},children:[(0,ke.jsx)("img",{src:"https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg",alt:"Google",className:"google-icon"}),"Continue with Google"]})]})]})]})};var gb=n(950),mb=n.t(gb,2);function vb(){return vb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},vb.apply(this,arguments)}function yb(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const _b=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(mI){}new Map;const bb=i.startTransition;mb.flushSync,i.useId;function wb(e){let{basename:n,children:i,future:r,window:s}=e,o=t.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),y(function(e,t){let{pathname:n,search:i,hash:r}=e.location;return g("",{pathname:n,search:i,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:m(t)},null,a)));let l=o.current,[c,u]=t.useState({action:l.action,location:l.location}),{v7_startTransition:h}=r||{},d=t.useCallback(e=>{h&&bb?bb(()=>u(e)):u(e)},[u,h]);return t.useLayoutEffect(()=>l.listen(d),[l,d]),t.useEffect(()=>ve(r),[r]),t.createElement(_e,{basename:n,children:i,location:c.location,navigationType:c.action,navigator:l,future:r})}const xb="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,kb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Eb=t.forwardRef(function(e,n){let i,{onClick:r,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:u,preventScrollReset:h,viewTransition:f}=e,p=yb(e,_b),{basename:g}=t.useContext($),v=!1;if("string"===typeof u&&kb.test(u)&&(i=u,xb))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=M(t.pathname,g);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:v=!0}catch(mI){}let y=function(e,n){let{relative:i}=void 0===n?{}:n;ee()||d(!1);let{basename:r,navigator:s}=t.useContext($),{hash:o,pathname:a,search:l}=re(e,{relative:i}),c=a;return"/"!==r&&(c="/"===a?r:V([r,a])),s.createHref({pathname:c,search:l,hash:o})}(u,{relative:s}),_=function(e,n){let{target:i,replace:r,state:s,preventScrollReset:o,relative:a,viewTransition:l}=void 0===n?{}:n,c=ie(),u=te(),h=re(e,{relative:a});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();let n=void 0!==r?r:m(u)===m(h);c(e,{replace:n,state:s,preventScrollReset:o,relative:a,viewTransition:l})}},[u,c,h,r,s,i,e,o,a,l])}(u,{replace:a,state:l,target:c,preventScrollReset:h,relative:s,viewTransition:f});return t.createElement("a",vb({},p,{href:i||y,onClick:v||o?r:function(e){r&&r(e),e.defaultPrevented||_(e)},ref:n,target:c}))});var Cb,Sb;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Cb||(Cb={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Sb||(Sb={}));function Tb(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}const Ib=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var Pb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Rb=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],Nb=(0,t.forwardRef)((e,n)=>{let{color:i="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:l,iconNode:u}=e,h=Tb(e,Rb);return(0,t.createElement)("svg",c(c({ref:n},Pb),{},{width:r,height:r,stroke:i,strokeWidth:o?24*Number(s)/Number(r):s,className:Ib("lucide",a)},h),[...u.map(e=>{let[n,i]=e;return(0,t.createElement)(n,i)}),...Array.isArray(l)?l:[l]])}),Ab=["className"],Ob=(e,n)=>{const i=(0,t.forwardRef)((i,r)=>{let{className:s}=i,o=Tb(i,Ab);return(0,t.createElement)(Nb,c({ref:r,iconNode:n,className:Ib("lucide-".concat((a=e,a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),s)},o));var a});return i.displayName="".concat(e),i},Db=Ob("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),Mb=Ob("Bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),Lb=Ob("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),jb=e=>{let{user:t,unreadCount:n,onProfileClick:i,onLogout:r,toggleNotifications:s}=e;const o=ie();return(0,ke.jsxs)("header",{className:"header",children:[(0,ke.jsx)("div",{className:"header-left",children:(0,ke.jsxs)(Eb,{to:"/",className:"logo-title-link",children:[(0,ke.jsx)("img",{src:xe,alt:"CAPACITI logo",className:"logo"}),(0,ke.jsx)("h1",{className:"title",children:"Resource Hub"})]})}),(0,ke.jsxs)("div",{className:"user-controls",children:[(0,ke.jsx)("button",{className:"notification-button",onClick:()=>o("/"),children:(0,ke.jsx)(Db,{size:24})}),(0,ke.jsxs)("button",{className:"notification-button",onClick:s,children:[(0,ke.jsx)(Mb,{size:24}),n>0&&(0,ke.jsx)("span",{className:"notification-count",children:n})]}),(0,ke.jsxs)("button",{className:"user-button",onClick:i,children:[(0,ke.jsx)(Lb,{size:24}),(0,ke.jsxs)("p",{children:["Username: ",t.name]})]}),(0,ke.jsx)("button",{onClick:r,className:"logout-button",children:"Logout"})]})]})},Fb=e=>{let{searchQuery:t,setSearchQuery:n,filter:i,setFilter:r}=e;return(0,ke.jsxs)("div",{className:"search-container",children:[(0,ke.jsx)("div",{className:"search-left",children:(0,ke.jsx)("input",{type:"text",value:t,onChange:e=>n(e.target.value),placeholder:"Search resources...",className:"search-input"})}),(0,ke.jsx)("div",{className:"search-right",children:(0,ke.jsxs)("select",{value:i,onChange:e=>r(e.target.value),className:"type-filter",children:[(0,ke.jsx)("option",{value:"all",children:"All"}),(0,ke.jsx)("option",{value:"pdf",children:"PDF"}),(0,ke.jsx)("option",{value:"training",children:"Training"}),(0,ke.jsx)("option",{value:"course",children:"Course"})]})})]})},Ub=e=>{let{activeTab:t,setActiveTab:n,availableCount:i,myResourcesCount:r,libraryCount:s}=e;return(0,ke.jsxs)("div",{className:"tabs",children:[(0,ke.jsxs)("button",{className:"tab ".concat("available"===t?"tab-active":""),onClick:()=>n("available"),children:["Available (",i,")"]}),(0,ke.jsxs)("button",{className:"tab ".concat("myResources"===t?"tab-active":""),onClick:()=>n("myResources"),children:["My Resources (",r,")"]}),(0,ke.jsxs)("button",{className:"tab ".concat("myLibrary"===t?"tab-active":""),onClick:()=>n("myLibrary"),children:["My Library (",s,")"]})]})},Vb=e=>{let{resource:t,notifications:n,tab:i,handleRequest:r,handleCancelRequest:s,handleDownloadOrAccess:o}=e;const a=n.find(e=>e.resourceId===t.id),l=a?a.status:t.status;return(0,ke.jsxs)("tr",{children:[(0,ke.jsx)("td",{children:t.title}),(0,ke.jsx)("td",{children:t.description}),(0,ke.jsx)("td",{children:t.type}),(0,ke.jsx)("td",{children:l}),(0,ke.jsx)("td",{children:(()=>{if("available"===i)return(0,ke.jsx)("button",{className:"action-button request",onClick:()=>r(t.id),children:"Request"});if("myResources"===i){if("pending"===(null===a||void 0===a?void 0:a.status))return(0,ke.jsx)("button",{className:"action-button cancel-button",onClick:()=>s(a.id,t.id),children:"Cancel"});if("approved"===(null===a||void 0===a?void 0:a.status))return(0,ke.jsx)("button",{className:"action-button download-button",onClick:()=>o(t),children:"Download"})}else if("myLibrary"===i)return(0,ke.jsx)("button",{className:"action-button view-button",onClick:()=>o(t),children:"View"});return null})()})]})},zb=e=>{let{activeTab:t,resources:n,notifications:i,downloads:r,searchQuery:s,filter:o,handleRequest:a,handleCancelRequest:l,handleDownloadOrAccess:c}=e;const u=e=>e.title.toLowerCase().includes(s.toLowerCase())&&("all"===o||e.type===o),h={available:n.filter(e=>"available"===e.status&&u(e)),myResources:n.filter(u),myLibrary:r.filter(u)},d="available"===t?h.available:"myLibrary"===t?h.myLibrary:h.myResources;return(0,ke.jsx)("div",{className:"resources-table",children:(0,ke.jsxs)("table",{children:[(0,ke.jsx)("thead",{children:(0,ke.jsxs)("tr",{children:[(0,ke.jsx)("th",{children:"Title"}),(0,ke.jsx)("th",{children:"Description"}),(0,ke.jsx)("th",{children:"Type"}),(0,ke.jsx)("th",{children:"Status"}),(0,ke.jsx)("th",{children:"Action"})]})}),(0,ke.jsx)("tbody",{children:d.map(e=>(0,ke.jsx)(Vb,{resource:e,notifications:i,tab:t,handleRequest:a,handleCancelRequest:l,handleDownloadOrAccess:c},e.id))})]})})},Bb=e=>{let{totalItems:t,currentPage:n,setPage:i,pageSize:r}=e;const s=Math.ceil(t/r);return s<=1?null:(0,ke.jsxs)("div",{className:"pagination",children:[(0,ke.jsx)("button",{onClick:()=>i(n-1),disabled:n<=1,children:"Prev"}),[...Array(s)].map((e,t)=>(0,ke.jsx)("button",{onClick:()=>i(t+1),className:n===t+1?"active":"",children:t+1},t)),(0,ke.jsx)("button",{onClick:()=>i(n+1),disabled:n>=s,children:"Next"})]})},Wb=Ob("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Hb=e=>{let{notifications:t,dismissNotification:n,close:i}=e;return(0,ke.jsxs)("div",{className:"notification-dropdown",children:[(0,ke.jsxs)("div",{className:"notification-header",children:[(0,ke.jsx)("h3",{children:"Notifications"}),(0,ke.jsx)("button",{onClick:i,children:(0,ke.jsx)(Wb,{size:16})})]}),t.length?t.map(e=>(0,ke.jsxs)("div",{className:"notification-item",children:[(0,ke.jsx)("span",{children:e.message}),e.dismissible&&(0,ke.jsx)("button",{onClick:()=>n(e.id),children:(0,ke.jsx)(Wb,{size:16})})]},e.id)):(0,ke.jsx)("div",{children:"No notifications"})]})},qb=e=>{let{content:t,onClose:n}=e;return(0,ke.jsx)("div",{className:"modal-overlay",children:(0,ke.jsxs)("div",{className:"modal-content",children:[(0,ke.jsx)("button",{onClick:n,className:"close-button",children:"Close"}),(0,ke.jsx)("h3",{children:t.title}),"pdf"===t.type?(0,ke.jsx)("iframe",{src:t.content,title:t.title,width:"100%",height:"600px"}):(0,ke.jsx)("a",{href:t.content,target:"_blank",rel:"noreferrer",children:"Open Link"})]})})},Kb=e=>{let{user:n}=e;const i=ie(),[r,s]=(0,t.useState)([]),[o,a]=(0,t.useState)([]),[l,u]=(0,t.useState)([]),[h,d]=(0,t.useState)(null),[f,p]=(0,t.useState)(!0),[g,m]=(0,t.useState)(""),[v,y]=(0,t.useState)("all"),[_,b]=(0,t.useState)("available"),[w,x]=(0,t.useState)(0),[k,E]=(0,t.useState)(!1),[C,S]=(0,t.useState)(!1),[T,I]=(0,t.useState)(null),[P,R]=(0,t.useState)(1),[N,A]=(0,t.useState)(1);(0,t.useEffect)(()=>{if(null===n||void 0===n||!n.uid)return i("/auth");let e=0;const t=()=>{e+=1,3===e&&p(!1)},r=Q_(B_(ab,"resources"),e=>{const n=e.val(),i=n?Object.entries(n).map(e=>{let[t,n]=e;return c({id:t},n)}):[];s(i),t()}),o=function(e){let t=Mt(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];for(const s of i)t=s._apply(t);return t}(B_(ab,"requests"),function(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Jy("orderByChild","path",e,!1),new Z_(e)}("userId"),(l=n.uid,Xy("equalTo","key",h,!0),new eb(l,h)));var l,h;const d=Q_(o,e=>{const n=e.val(),i=n?Object.entries(n).map(e=>{let[t,n]=e;return c({id:t},n)}):[],r=i.map(e=>({id:e.id,resourceId:e.resourceId,status:e.status,message:"".concat("approved"===e.status?"\u2705":"rejected"===e.status?"\u274c":"\u23f3",' Request for "').concat(e.resourceId,'"'),dismissible:!0}));a(r),x(r.length),t()}),f=Q_(B_(ab,"userDownloads/".concat(n.uid)),e=>{const n=e.val(),i=n?Object.entries(n).map(e=>{let[t,n]=e;return c({id:t},n)}):[];u(i),t()});return()=>{r(),d(),f()}},[null===n||void 0===n?void 0:n.uid,i]);return(0,ke.jsxs)("div",{className:"dashboard-container",children:[(0,ke.jsx)(jb,{user:n,unreadCount:w,onProfileClick:()=>i("/profile"),onLogout:async()=>{await Bo(ob),i("/auth")},toggleNotifications:()=>E(!k)}),k&&(0,ke.jsx)(Hb,{notifications:o,dismissNotification:e=>a(t=>t.filter(t=>t.id!==e)),close:()=>E(!1)}),(0,ke.jsx)(Fb,{searchQuery:g,setSearchQuery:m,filter:v,setFilter:y}),(0,ke.jsx)(Ub,{activeTab:_,setActiveTab:b,availableCount:r.length,libraryCount:l.length,myResourcesCount:o.length}),(0,ke.jsx)(zb,{activeTab:_,resources:r,notifications:o,downloads:l,searchQuery:g,filter:v,handleRequest:()=>{},handleCancelRequest:()=>{},handleDownloadOrAccess:e=>{I(e),S(!0)}}),(0,ke.jsx)(Bb,{currentPage:"myLibrary"===_?N:P,setPage:"myLibrary"===_?A:R,totalItems:"myLibrary"===_?l.length:r.length,pageSize:5}),C&&(0,ke.jsx)(qb,{content:T,onClose:()=>S(!1)})]})},Gb=e=>{let{activeTab:t,setActiveTab:n}=e;return(0,ke.jsxs)("div",{className:"tabs",children:[(0,ke.jsx)("div",{className:"tab ".concat("pending-requests"===t?"tab-active":""),onClick:()=>n("pending-requests"),children:"Pending Requests"}),(0,ke.jsx)("div",{className:"tab ".concat("manage-resources"===t?"tab-active":""),onClick:()=>n("manage-resources"),children:"Manage Resources"}),(0,ke.jsx)("div",{className:"tab ".concat("downloads"===t?"tab-active":""),onClick:()=>n("downloads"),children:"Downloads"}),(0,ke.jsx)("div",{className:"tab ".concat("analytics-section"===t?"tab-active":""),onClick:()=>n("analytics-section"),children:"Analytics"})]})},Yb=e=>{let{editResourceId:t,resourceName:n,setResourceName:i,resourceDetails:r,setResourceDetails:s,resourceType:o,setResourceType:a,handleFileChange:l,file:c,contentUrl:u,handleUrlChange:h,handleAddResource:d,handleSaveEdit:f,handleClearForm:p,setEditResourceId:g,handleRecommendSearch:m,recommendSearch:v,setRecommendSearch:y,recommendations:_=[],handleAutoFill:b,filteredResources:w=[],searchTerm:x,setSearchTerm:k,paginatedResources:E=[],handleEditResource:C,handleDeleteResource:S,pageSize:T,resourcePage:I,setResourcePage:P,endResourceIndex:R}=e;return(0,ke.jsxs)("div",{className:"manage-resources",children:[(0,ke.jsx)("h1",{children:t?"Edit Resource":"Manage Resources"}),(0,ke.jsxs)("div",{className:"admin-controls",children:[(0,ke.jsx)("input",{type:"text",value:n,onChange:e=>i(e.target.value),placeholder:"Resource Name"}),(0,ke.jsx)("input",{type:"text",value:r,onChange:e=>s(e.target.value),placeholder:"Description"}),(0,ke.jsxs)("select",{value:o,onChange:e=>a(e.target.value),children:[(0,ke.jsx)("option",{value:"pdf",children:"PDF"}),(0,ke.jsx)("option",{value:"training",children:"Training"}),(0,ke.jsx)("option",{value:"course",children:"Course"})]}),"pdf"===o?(0,ke.jsx)("input",{type:"file",onChange:l,accept:".pdf"}):(0,ke.jsx)("input",{type:"text",value:u,onChange:h,placeholder:"Enter URL"}),(0,ke.jsx)("button",{onClick:t?f:d,children:t?"Save Changes":"Add Resource"}),(0,ke.jsx)("button",{onClick:p,className:"clear-button",children:"Clear Form"}),t&&(0,ke.jsx)("button",{onClick:()=>g(null),children:"Cancel Edit"})]}),(0,ke.jsx)("h3",{children:"Find Resources to Add"}),(0,ke.jsxs)("form",{onSubmit:m,className:"recommend-search-form",children:[(0,ke.jsx)("input",{type:"text",value:v,onChange:e=>y(e.target.value),placeholder:"Search for resource ideas..."}),(0,ke.jsx)("button",{type:"submit",children:"Search"})]}),_.length>0&&(0,ke.jsxs)("div",{className:"recommendations-list",children:[(0,ke.jsx)("h4",{children:"Suggested Resources"}),(0,ke.jsx)("ul",{children:_.map((e,t)=>(0,ke.jsxs)("li",{children:[(0,ke.jsx)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",children:e.title}),(0,ke.jsx)("p",{children:e.snippet}),(0,ke.jsx)("button",{onClick:()=>b(e),children:"Use This"})]},t))})]}),(0,ke.jsxs)("div",{className:"resources-table",children:[(0,ke.jsxs)("h2",{children:["Resources (",w.length," total)"]}),(0,ke.jsx)("input",{type:"text",value:x,onChange:e=>k(e.target.value),placeholder:"Search resources..."}),(0,ke.jsxs)("table",{children:[(0,ke.jsx)("thead",{children:(0,ke.jsxs)("tr",{children:[(0,ke.jsx)("th",{children:"Title"}),(0,ke.jsx)("th",{children:"Type"}),(0,ke.jsx)("th",{children:"Status"}),(0,ke.jsx)("th",{children:"Content"}),(0,ke.jsx)("th",{children:"Actions"})]})}),(0,ke.jsx)("tbody",{children:E.map(e=>(0,ke.jsxs)("tr",{children:[(0,ke.jsx)("td",{children:e.title}),(0,ke.jsx)("td",{children:e.type}),(0,ke.jsx)("td",{children:e.status}),(0,ke.jsx)("td",{children:"pdf"===e.type?(0,ke.jsx)("a",{href:e.content,download:!0,children:e.title}):(0,ke.jsx)("a",{href:e.content,target:"_blank",rel:"noopener noreferrer",children:"Access"})}),(0,ke.jsxs)("td",{children:[(0,ke.jsx)("button",{onClick:()=>C(e),children:"Edit"}),(0,ke.jsx)("button",{onClick:()=>S(e.id),children:"Delete"})]})]},e.id))})]}),w.length>T&&(0,ke.jsxs)("div",{className:"pagination-controls",children:[(0,ke.jsx)("button",{disabled:1===I,onClick:()=>P(e=>e-1),children:"Previous"}),(0,ke.jsxs)("span",{children:["Page ",I," of ",Math.ceil(w.length/T)]}),(0,ke.jsx)("button",{disabled:R>=w.length,onClick:()=>P(e=>e+1),children:"Next"})]})]})]})},Qb=e=>{let{paginatedRequests:t=[],allRequests:n=[],users:i={},pageSize:r=5,requestPage:s,setRequestPage:o,endRequestIndex:a,handleUserProfileClick:l,handleApprove:c,handleRejectClick:u}=e;return(0,ke.jsxs)("div",{className:"pending-requests",children:[(0,ke.jsx)("h1",{children:"Pending Requests"}),(0,ke.jsxs)("table",{children:[(0,ke.jsx)("thead",{children:(0,ke.jsxs)("tr",{children:[(0,ke.jsx)("th",{children:"User"}),(0,ke.jsx)("th",{children:"Resource"}),(0,ke.jsx)("th",{children:"Status"}),(0,ke.jsx)("th",{children:"Rejection Reason"}),(0,ke.jsx)("th",{children:"Actions"})]})}),(0,ke.jsx)("tbody",{children:0===t.length?(0,ke.jsx)("tr",{children:(0,ke.jsx)("td",{colSpan:"5",children:"No requests to display."})}):t.map(e=>{var t;return(0,ke.jsxs)("tr",{children:[(0,ke.jsx)("td",{children:(0,ke.jsx)("button",{onClick:()=>l(e.userId),className:"user-link",children:(null===(t=i[e.userId])||void 0===t?void 0:t.name)||e.userId})}),(0,ke.jsx)("td",{children:e.resourceTitle}),(0,ke.jsx)("td",{children:e.status}),(0,ke.jsx)("td",{children:e.rejectionReason||"-"}),(0,ke.jsx)("td",{children:(0,ke.jsx)("div",{className:"resource-actions",children:"pending"===e.status?(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)("button",{onClick:()=>c(e.id,e.userId,e.resourceId),children:"Approve"}),(0,ke.jsx)("button",{onClick:()=>u(e.id,e.userId,e.resourceId),children:"Reject"})]}):e.status})})]},e.id)})})]}),n.length>r&&(0,ke.jsxs)("div",{className:"pagination-controls",children:[(0,ke.jsx)("button",{disabled:1===s,onClick:()=>o(e=>e-1),children:"Previous"}),(0,ke.jsxs)("span",{children:["Page ",s," of ",Math.ceil(n.length/r)]}),(0,ke.jsx)("button",{disabled:a>=n.length,onClick:()=>o(e=>e+1),children:"Next"})]})]})},$b=e=>{let{downloads:t=[],users:n={},paginatedDownloads:i=[],pageSize:r=5,downloadPage:s=1,setDownloadPage:o=()=>{},endDownloadIndex:a=0,handleUserProfileClick:l=()=>{}}=e;return(0,ke.jsxs)("div",{className:"downloads",children:[(0,ke.jsxs)("h1",{children:["Downloads (",t.length||0," total)"]}),(0,ke.jsxs)("table",{children:[(0,ke.jsx)("thead",{children:(0,ke.jsxs)("tr",{children:[(0,ke.jsx)("th",{children:"User"}),(0,ke.jsx)("th",{children:"Resource"}),(0,ke.jsx)("th",{children:"Timestamp"})]})}),(0,ke.jsx)("tbody",{children:0===i.length?(0,ke.jsx)("tr",{children:(0,ke.jsx)("td",{colSpan:"3",children:"No downloads to show."})}):i.map(e=>{var t;return(0,ke.jsxs)("tr",{children:[(0,ke.jsx)("td",{children:(0,ke.jsx)("button",{onClick:()=>l(e.userId),className:"user-link",children:(null===(t=n[e.userId])||void 0===t?void 0:t.name)||e.userId})}),(0,ke.jsx)("td",{children:e.title}),(0,ke.jsx)("td",{children:e.timestamp})]},e.id)})})]}),t.length>r&&(0,ke.jsxs)("div",{className:"pagination-controls",children:[(0,ke.jsx)("button",{disabled:1===s,onClick:()=>o(e=>e-1),children:"Previous"}),(0,ke.jsxs)("span",{children:["Page ",s," of ",Math.ceil(t.length/r)]}),(0,ke.jsx)("button",{disabled:a>=t.length,onClick:()=>o(e=>e+1),children:"Next"})]})]})};function Xb(e){return e+.5|0}const Jb=(e,t,n)=>Math.max(Math.min(e,n),t);function Zb(e){return Jb(Xb(2.55*e),0,255)}function ew(e){return Jb(Xb(255*e),0,255)}function tw(e){return Jb(Xb(e/2.55)/100,0,1)}function nw(e){return Jb(Xb(100*e),0,100)}const iw={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},rw=[..."0123456789ABCDEF"],sw=e=>rw[15&e],ow=e=>rw[(240&e)>>4]+rw[15&e],aw=e=>(240&e)>>4===(15&e);function lw(e){var t=(e=>aw(e.r)&&aw(e.g)&&aw(e.b)&&aw(e.a))(e)?sw:ow;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const cw=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function uw(e,t,n){const i=t*Math.min(n,1-n),r=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-i*Math.max(Math.min(r-3,9-r,1),-1)};return[r(0),r(8),r(4)]}function hw(e,t,n){const i=function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(i+e/60)%6;return n-n*t*Math.max(Math.min(r,4-r,1),0)};return[i(5),i(3),i(1)]}function dw(e,t,n){const i=uw(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)i[r]*=1-t-n,i[r]+=t;return i}function fw(e){const t=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(t,n,i),s=Math.min(t,n,i),o=(r+s)/2;let a,l,c;return r!==s&&(c=r-s,l=o>.5?c/(2-r-s):c/(r+s),a=function(e,t,n,i,r){return e===r?(t-n)/i+(t<n?6:0):t===r?(n-e)/i+2:(e-t)/i+4}(t,n,i,c,r),a=60*a+.5),[0|a,l||0,o]}function pw(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(ew)}function gw(e,t,n){return pw(uw,e,t,n)}function mw(e){return(e%360+360)%360}function vw(e){const t=cw.exec(e);let n,i=255;if(!t)return;t[5]!==n&&(i=t[6]?Zb(+t[5]):ew(+t[5]));const r=mw(+t[2]),s=+t[3]/100,o=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return pw(dw,e,t,n)}(r,s,o):"hsv"===t[1]?function(e,t,n){return pw(hw,e,t,n)}(r,s,o):gw(r,s,o),{r:n[0],g:n[1],b:n[2],a:i}}const yw={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},_w={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let bw;function ww(e){bw||(bw=function(){const e={},t=Object.keys(_w),n=Object.keys(yw);let i,r,s,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,yw[s]);s=parseInt(_w[o],16),e[a]=[s>>16&255,s>>8&255,255&s]}return e}(),bw.transparent=[0,0,0,0]);const t=bw[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const xw=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const kw=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,Ew=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Cw(e,t,n){if(e){let i=fw(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,0===t?360:1)),i=gw(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function Sw(e,t){return e?Object.assign(t||{},e):e}function Tw(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=ew(e[3]))):(t=Sw(e,{r:0,g:0,b:0,a:1})).a=ew(t.a),t}function Iw(e){return"r"===e.charAt(0)?function(e){const t=xw.exec(e);let n,i,r,s=255;if(t){if(t[7]!==n){const e=+t[7];s=t[8]?Zb(e):Jb(255*e,0,255)}return n=+t[1],i=+t[3],r=+t[5],n=255&(t[2]?Zb(n):Jb(n,0,255)),i=255&(t[4]?Zb(i):Jb(i,0,255)),r=255&(t[6]?Zb(r):Jb(r,0,255)),{r:n,g:i,b:r,a:s}}}(e):vw(e)}class Pw{constructor(e){if(e instanceof Pw)return e;const t=typeof e;let n;"object"===t?n=Tw(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*iw[e[1]],g:255&17*iw[e[2]],b:255&17*iw[e[3]],a:5===n?17*iw[e[4]]:255}:7!==n&&9!==n||(t={r:iw[e[1]]<<4|iw[e[2]],g:iw[e[3]]<<4|iw[e[4]],b:iw[e[5]]<<4|iw[e[6]],a:9===n?iw[e[7]]<<4|iw[e[8]]:255})),t}(e)||ww(e)||Iw(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=Sw(this._rgb);return e&&(e.a=tw(e.a)),e}set rgb(e){this._rgb=Tw(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(tw(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0;var e}hexString(){return this._valid?lw(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=fw(e),n=t[0],i=nw(t[1]),r=nw(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(i,"%, ").concat(r,"%, ").concat(tw(e.a),")"):"hsl(".concat(n,", ").concat(i,"%, ").concat(r,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,i=e.rgb;let r;const s=t===r?.5:t,o=2*s-1,a=n.a-i.a,l=((o*a===-1?o:(o+a)/(1+o*a))+1)/2;r=1-l,n.r=255&l*n.r+r*i.r+.5,n.g=255&l*n.g+r*i.g+.5,n.b=255&l*n.b+r*i.b+.5,n.a=s*n.a+(1-s)*i.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const i=Ew(tw(e.r)),r=Ew(tw(e.g)),s=Ew(tw(e.b));return{r:ew(kw(i+n*(Ew(tw(t.r))-i))),g:ew(kw(r+n*(Ew(tw(t.g))-r))),b:ew(kw(s+n*(Ew(tw(t.b))-s))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new Pw(this.rgb)}alpha(e){return this._rgb.a=ew(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=Xb(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Cw(this._rgb,2,e),this}darken(e){return Cw(this._rgb,2,-e),this}saturate(e){return Cw(this._rgb,1,e),this}desaturate(e){return Cw(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=fw(e);n[0]=mw(n[0]+t),n=gw(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function Rw(){}const Nw=(()=>{let e=0;return()=>e++})();function Aw(e){return null===e||void 0===e}function Ow(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function Dw(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function Mw(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function Lw(e,t){return Mw(e)?e:t}function jw(e,t){return"undefined"===typeof e?t:e}const Fw=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Uw(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function Vw(e,t,n,i){let r,s,o;if(Ow(e))if(s=e.length,i)for(r=s-1;r>=0;r--)t.call(n,e[r],r);else for(r=0;r<s;r++)t.call(n,e[r],r);else if(Dw(e))for(o=Object.keys(e),s=o.length,r=0;r<s;r++)t.call(n,e[o[r]],o[r])}function zw(e,t){let n,i,r,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(r=e[n],s=t[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Bw(e){if(Ow(e))return e.map(Bw);if(Dw(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let r=0;for(;r<i;++r)t[n[r]]=Bw(e[n[r]]);return t}return e}function Ww(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function Hw(e,t,n,i){if(!Ww(e))return;const r=t[e],s=n[e];Dw(r)&&Dw(s)?qw(r,s,i):t[e]=Bw(s)}function qw(e,t,n){const i=Ow(t)?t:[t],r=i.length;if(!Dw(e))return e;const s=(n=n||{}).merger||Hw;let o;for(let a=0;a<r;++a){if(o=i[a],!Dw(o))continue;const t=Object.keys(o);for(let i=0,r=t.length;i<r;++i)s(t[i],e,o,n)}return e}function Kw(e,t){return qw(e,t,{merger:Gw})}function Gw(e,t,n){if(!Ww(e))return;const i=t[e],r=n[e];Dw(i)&&Dw(r)?Kw(i,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Bw(r))}const Yw={"":e=>e,x:e=>e.x,y:e=>e.y};function Qw(e,t){const n=Yw[t]||(Yw[t]=function(e){const t=function(e){const t=e.split("."),n=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function $w(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Xw=e=>"undefined"!==typeof e,Jw=e=>"function"===typeof e,Zw=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const ex=Math.PI,tx=2*ex,nx=tx+ex,ix=Number.POSITIVE_INFINITY,rx=ex/180,sx=ex/2,ox=ex/4,ax=2*ex/3,lx=Math.log10,cx=Math.sign;function ux(e,t,n){return Math.abs(e-t)<n}function hx(e){const t=Math.round(e);e=ux(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(lx(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function dx(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function fx(e,t,n){let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function px(e){return e*(ex/180)}function gx(e){return e*(180/ex)}function mx(e){if(!Mw(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function vx(e,t){const n=t.x-e.x,i=t.y-e.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*ex&&(s+=tx),{angle:s,distance:r}}function yx(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function _x(e,t){return(e-t+nx)%tx-ex}function bx(e){return(e%tx+tx)%tx}function wx(e,t,n,i){const r=bx(e),s=bx(t),o=bx(n),a=bx(s-r),l=bx(o-r),c=bx(r-s),u=bx(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function xx(e,t,n){return Math.max(t,Math.min(n,e))}function kx(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function Ex(e,t,n){n=n||(n=>e[n]<t);let i,r=e.length-1,s=0;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const Cx=(e,t,n,i)=>Ex(e,n,i?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),Sx=(e,t,n)=>Ex(e,n,i=>e[i][t]>=n);const Tx=["push","pop","shift","splice","unshift"];function Ix(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(t);-1!==r&&i.splice(r,1),i.length>0||(Tx.forEach(t=>{delete e[t]}),delete e._chartjs)}function Px(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const Rx="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function Nx(e,t){let n=[],i=!1;return function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];n=s,i||(i=!0,Rx.call(window,()=>{i=!1,e.apply(t,n)}))}}const Ax=e=>"start"===e?"left":"end"===e?"right":"center",Ox=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function Dx(e,t,n){const i=t.length;let r=0,s=i;if(e._sorted){const{iScale:o,vScale:a,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=o.axis,{min:h,max:d,minDefined:f,maxDefined:p}=o.getUserBounds();if(f){if(r=Math.min(Cx(l,u,h).lo,n?i:Cx(t,u,o.getPixelForValue(h)).lo),c){const e=l.slice(0,r+1).reverse().findIndex(e=>!Aw(e[a.axis]));r-=Math.max(0,e)}r=xx(r,0,i-1)}if(p){let e=Math.max(Cx(l,o.axis,d,!0).hi+1,n?0:Cx(t,u,o.getPixelForValue(d),!0).hi+1);if(c){const t=l.slice(e-1).findIndex(e=>!Aw(e[a.axis]));e+=Math.max(0,t)}s=xx(e,r,i)-r}else s=i-r}return{start:r,count:s}}function Mx(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=r,!0;const s=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const Lx=e=>0===e||1===e,jx=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*tx/n),Fx=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*tx/n)+1,Ux={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*sx),easeOutSine:e=>Math.sin(e*sx),easeInOutSine:e=>-.5*(Math.cos(ex*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>Lx(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>Lx(e)?e:jx(e,.075,.3),easeOutElastic:e=>Lx(e)?e:Fx(e,.075,.3),easeInOutElastic(e){const t=.1125;return Lx(e)?e:e<.5?.5*jx(2*e,t,.45):.5+.5*Fx(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-Ux.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*Ux.easeInBounce(2*e):.5*Ux.easeOutBounce(2*e-1)+.5};function Vx(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function zx(e){return Vx(e)?e:new Pw(e)}function Bx(e){return Vx(e)?e:new Pw(e).saturate(.5).darken(.1).hexString()}const Wx=["x","y","borderWidth","radius","tension"],Hx=["color","borderColor","backgroundColor"];const qx=new Map;function Kx(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let i=qx.get(n);return i||(i=new Intl.NumberFormat(e,t),qx.set(n,i)),i}(t,n).format(e)}const Gx={values:e=>Ow(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const i=this.chart.options.locale;let r,s=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(r="scientific"),s=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const o=lx(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Kx(e,i,l)},logarithmic(e,t,n){if(0===e)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(lx(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?Gx.numeric.call(this,e,t,n):""}};var Yx={formatters:Gx};const Qx=Object.create(null),$x=Object.create(null);function Xx(e,t){if(!t)return e;const n=t.split(".");for(let i=0,r=n.length;i<r;++i){const t=n[i];e=e[t]||(e[t]=Object.create(null))}return e}function Jx(e,t,n){return"string"===typeof t?qw(Xx(e,t),n):qw(Xx(e,""),t)}class Zx{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>Bx(t.backgroundColor),this.hoverBorderColor=(e,t)=>Bx(t.borderColor),this.hoverColor=(e,t)=>Bx(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return Jx(this,e,t)}get(e){return Xx(this,e)}describe(e,t){return Jx($x,e,t)}override(e,t){return Jx(Qx,e,t)}route(e,t,n,i){const r=Xx(this,e),s=Xx(this,n),o="_"+t;Object.defineProperties(r,{[o]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[o],t=s[i];return Dw(e)?Object.assign({},t,e):jw(e,t)},set(e){this[o]=e}}})}apply(e){e.forEach(e=>e(this))}}var ek=new Zx({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:Hx},numbers:{type:"number",properties:Wx}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Yx.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function tk(e,t,n,i,r){let s=t[r];return s||(s=t[r]=e.measureText(r).width,n.push(r)),s>i&&(i=s),i}function nk(e,t,n,i){let r=(i=i||{}).data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},s=i.garbageCollect=[],i.font=t),e.save(),e.font=t;let o=0;const a=n.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=n[l],void 0===h||null===h||Ow(h)){if(Ow(h))for(c=0,u=h.length;c<u;c++)d=h[c],void 0===d||null===d||Ow(d)||(o=tk(e,r,s,o,d))}else o=tk(e,r,s,o,h);e.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete r[s[l]];s.splice(0,f)}return o}function ik(e,t,n){const i=e.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((t-r)*i)/i+r}function rk(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function sk(e,t,n,i){ok(e,t,n,i,null)}function ok(e,t,n,i,r){let s,o,a,l,c,u,h,d;const f=t.pointStyle,p=t.rotation,g=t.radius;let m=(p||0)*rx;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(n,i),e.rotate(m),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(g)||g<=0)){switch(e.beginPath(),f){default:r?e.ellipse(n,i,r/2,g,0,0,tx):e.arc(n,i,g,0,tx),e.closePath();break;case"triangle":u=r?r/2:g,e.moveTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=ax,e.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=ax,e.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),e.closePath();break;case"rectRounded":c=.516*g,l=g-c,o=Math.cos(m+ox)*l,h=Math.cos(m+ox)*(r?r/2-c:l),a=Math.sin(m+ox)*l,d=Math.sin(m+ox)*(r?r/2-c:l),e.arc(n-h,i-a,c,m-ex,m-sx),e.arc(n+d,i-o,c,m-sx,m),e.arc(n+h,i+a,c,m,m+sx),e.arc(n-d,i+o,c,m+sx,m+ex),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=r?r/2:l,e.rect(n-u,i-l,2*u,2*l);break}m+=ox;case"rectRot":h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),e.moveTo(n-h,i-a),e.lineTo(n+d,i-o),e.lineTo(n+h,i+a),e.lineTo(n-d,i+o),e.closePath();break;case"crossRot":m+=ox;case"cross":h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),e.moveTo(n-h,i-a),e.lineTo(n+h,i+a),e.moveTo(n+d,i-o),e.lineTo(n-d,i+o);break;case"star":h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),e.moveTo(n-h,i-a),e.lineTo(n+h,i+a),e.moveTo(n+d,i-o),e.lineTo(n-d,i+o),m+=ox,h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),e.moveTo(n-h,i-a),e.lineTo(n+h,i+a),e.moveTo(n+d,i-o),e.lineTo(n-d,i+o);break;case"line":o=r?r/2:Math.cos(m)*g,a=Math.sin(m)*g,e.moveTo(n-o,i-a),e.lineTo(n+o,i+a);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(m)*(r?r/2:g),i+Math.sin(m)*g);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function ak(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function lk(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function ck(e){e.restore()}function uk(e,t,n,i,r){if(!t)return e.lineTo(n.x,n.y);if("middle"===r){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else"after"===r!==!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function hk(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function dk(e,t,n,i,r){if(r.strikethrough||r.underline){const s=e.measureText(i),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(o,u),e.lineTo(a,u),e.stroke()}}function fk(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function pk(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=Ow(t)?t:[t],a=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=r.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Aw(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&fk(e,s.backdrop),a&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),Aw(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,n,i,s.maxWidth)),e.fillText(c,n,i,s.maxWidth),dk(e,n,i,c,s),i+=Number(r.lineHeight);e.restore()}function gk(e,t){const{x:n,y:i,w:r,h:s,radius:o}=t;e.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*ex,ex,!0),e.lineTo(n,i+s-o.bottomLeft),e.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,ex,sx,!0),e.lineTo(n+r-o.bottomRight,i+s),e.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,sx,0,!0),e.lineTo(n+r,i+o.topRight),e.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-sx,!0),e.lineTo(n+o.topLeft,i)}const mk=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,vk=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function yk(e,t){const n=(""+e).match(mk);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const _k=e=>+e||0;function bk(e,t){const n={},i=Dw(t),r=i?Object.keys(t):t,s=Dw(e)?i?n=>jw(e[n],e[t[n]]):t=>e[t]:()=>e;for(const o of r)n[o]=_k(s(o));return n}function wk(e){return bk(e,{top:"y",right:"x",bottom:"y",left:"x"})}function xk(e){return bk(e,["topLeft","topRight","bottomLeft","bottomRight"])}function kk(e){const t=wk(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Ek(e,t){e=e||{},t=t||ek.font;let n=jw(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let i=jw(e.style,t.style);i&&!(""+i).match(vk)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:jw(e.family,t.family),lineHeight:yk(jw(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:jw(e.weight,t.weight),string:""};return r.string=function(e){return!e||Aw(e.size)||Aw(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(r),r}function Ck(e,t,n,i){let r,s,o,a=!0;for(r=0,s=e.length;r<s;++r)if(o=e[r],void 0!==o&&(void 0!==t&&"function"===typeof o&&(o=o(t),a=!1),void 0!==n&&Ow(o)&&(o=o[n%o.length],a=!1),void 0!==o))return i&&!a&&(i.cacheable=!1),o}function Sk(e,t){return Object.assign(Object.create(e),t)}function Tk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const r=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=Fk("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:n,_getTarget:i,override:i=>Tk([i,...e],t,r,n)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,i)=>Ak(n,i,()=>function(e,t,n,i){let r;for(const s of t)if(r=Fk(Rk(s,e),n),"undefined"!==typeof r)return Nk(e,r)?Lk(n,i,e,r):r}(i,t,e,n)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>Uk(e).includes(t),ownKeys:e=>Uk(e),set(e,t,n){const r=e._storage||(e._storage=i());return e[t]=r[t]=n,delete e._keys,!0}})}function Ik(e,t,n,i){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:Pk(e,i),setContext:t=>Ik(e,t,n,i),override:r=>Ik(e.override(r),t,n,i)};return new Proxy(r,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>Ak(e,t,()=>function(e,t,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=e;let a=i[t];Jw(a)&&o.isScriptable(t)&&(a=function(e,t,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(s,o||i);a.delete(e),Nk(e,l)&&(l=Lk(r._scopes,r,e,l));return l}(t,a,e,n));Ow(a)&&a.length&&(a=function(e,t,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if("undefined"!==typeof s.index&&i(e))return t[s.index%t.length];if(Dw(t[0])){const n=t,i=r._scopes.filter(e=>e!==n);t=[];for(const l of n){const n=Lk(i,r,e,l);t.push(Ik(n,s,o&&o[e],a))}}return t}(t,a,e,o.isIndexable));Nk(t,a)&&(a=Ik(a,r,s&&s[t],o));return a}(e,t,n)),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,i)=>(e[n]=i,delete t[n],!0)})}function Pk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:i,isScriptable:Jw(n)?n:()=>n,isIndexable:Jw(i)?i:()=>i}}const Rk=(e,t)=>e?e+$w(t):t,Nk=(e,t)=>Dw(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function Ak(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const i=n();return e[t]=i,i}function Ok(e,t,n){return Jw(e)?e(t,n):e}const Dk=(e,t)=>!0===e?t:"string"===typeof e?Qw(t,e):void 0;function Mk(e,t,n,i,r){for(const s of t){const t=Dk(n,s);if(t){e.add(t);const s=Ok(t._fallback,n,r);if("undefined"!==typeof s&&s!==n&&s!==i)return s}else if(!1===t&&"undefined"!==typeof i&&n!==i)return null}return!1}function Lk(e,t,n,i){const r=t._rootScopes,s=Ok(t._fallback,n,i),o=[...e,...r],a=new Set;a.add(i);let l=jk(a,o,n,s||n,i);return null!==l&&(("undefined"===typeof s||s===n||(l=jk(a,o,s,l,i),null!==l))&&Tk(Array.from(a),[""],r,s,()=>function(e,t,n){const i=e._getTarget();t in i||(i[t]={});const r=i[t];if(Ow(r)&&Dw(n))return n;return r||{}}(t,n,i)))}function jk(e,t,n,i,r){for(;n;)n=Mk(e,t,n,i,r);return n}function Fk(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function Uk(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function Vk(e,t,n,i){const{iScale:r}=e,{key:s="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=t[c],o[a]={r:r.parse(Qw(u,s),c)};return o}const zk=Number.EPSILON||1e-14,Bk=(e,t)=>t<e.length&&!e[t].skip&&e[t],Wk=e=>"x"===e?"y":"x";function Hk(e,t,n,i){const r=e.skip?t:e,s=t,o=n.skip?t:n,a=yx(s,r),l=yx(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:s.x-h*(o.x-r.x),y:s.y-h*(o.y-r.y)},next:{x:s.x+d*(o.x-r.x),y:s.y+d*(o.y-r.y)}}}function qk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=Wk(t),i=e.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=Bk(e,0);for(o=0;o<i;++o)if(a=l,l=c,c=Bk(e,o+1),l){if(c){const e=c[t]-l[t];r[o]=0!==e?(c[n]-l[n])/e:0}s[o]=a?c?cx(r[o-1])!==cx(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}!function(e,t,n){const i=e.length;let r,s,o,a,l,c=Bk(e,0);for(let u=0;u<i-1;++u)l=c,c=Bk(e,u+1),l&&c&&(ux(t[u],0,zk)?n[u]=n[u+1]=0:(r=n[u]/t[u],s=n[u+1]/t[u],a=Math.pow(r,2)+Math.pow(s,2),a<=9||(o=3/Math.sqrt(a),n[u]=r*o*t[u],n[u+1]=s*o*t[u])))}(e,r,s),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const i=Wk(n),r=e.length;let s,o,a,l=Bk(e,0);for(let c=0;c<r;++c){if(o=a,a=l,l=Bk(e,c+1),!a)continue;const r=a[n],u=a[i];o&&(s=(r-o[n])/3,a["cp1".concat(n)]=r-s,a["cp1".concat(i)]=u-s*t[c]),l&&(s=(l[n]-r)/3,a["cp2".concat(n)]=r+s,a["cp2".concat(i)]=u+s*t[c])}}(e,s,t)}function Kk(e,t,n){return Math.max(Math.min(e,n),t)}function Gk(e,t,n,i,r){let s,o,a,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)qk(e,r);else{let n=i?e[e.length-1]:e[0];for(s=0,o=e.length;s<o;++s)a=e[s],l=Hk(n,a,e[Math.min(s+1,o-(i?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,n=a}t.capBezierPoints&&function(e,t){let n,i,r,s,o,a=ak(e[0],t);for(n=0,i=e.length;n<i;++n)o=s,s=a,a=n<i-1&&ak(e[n+1],t),s&&(r=e[n],o&&(r.cp1x=Kk(r.cp1x,t.left,t.right),r.cp1y=Kk(r.cp1y,t.top,t.bottom)),a&&(r.cp2x=Kk(r.cp2x,t.left,t.right),r.cp2y=Kk(r.cp2y,t.top,t.bottom)))}(e,n)}function Yk(){return"undefined"!==typeof window&&"undefined"!==typeof document}function Qk(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function $k(e,t,n){let i;return"string"===typeof e?(i=parseInt(e,10),-1!==e.indexOf("%")&&(i=i/100*t.parentNode[n])):i=e,i}const Xk=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const Jk=["top","right","bottom","left"];function Zk(e,t,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=Jk[r];i[s]=parseFloat(e[t+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function eE(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,r=Xk(n),s="border-box"===r.boxSizing,o=Zk(r,"padding"),a=Zk(r,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:r,offsetY:s}=i;let o,a,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(r,s,e.target))o=r,a=s;else{const e=t.getBoundingClientRect();o=i.clientX-e.left,a=i.clientY-e.top,l=!0}return{x:o,y:a,box:l}}(e,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=t;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-h)/f*n.width/i),y:Math.round((c-d)/p*n.height/i)}}const tE=e=>Math.round(10*e)/10;function nE(e,t,n,i){const r=Xk(e),s=Zk(r,"margin"),o=$k(r.maxWidth,e,"clientWidth")||ix,a=$k(r.maxHeight,e,"clientHeight")||ix,l=function(e,t,n){let i,r;if(void 0===t||void 0===n){const s=e&&Qk(e);if(s){const e=s.getBoundingClientRect(),o=Xk(s),a=Zk(o,"border","width"),l=Zk(o,"padding");t=e.width-l.width-a.width,n=e.height-l.height-a.height,i=$k(o.maxWidth,s,"clientWidth"),r=$k(o.maxHeight,s,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:i||ix,maxHeight:r||ix}}(e,t,n);let{width:c,height:u}=l;if("content-box"===r.boxSizing){const e=Zk(r,"border","width"),t=Zk(r,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=tE(Math.min(c,o,l.maxWidth)),u=tE(Math.min(u,a,l.maxHeight)),c&&!u&&(u=tE(c/2));return(void 0!==t||void 0!==n)&&i&&l.height&&u>l.height&&(u=l.height,c=tE(Math.floor(u*i))),{width:c,height:u}}function iE(e,t,n){const i=t||1,r=Math.floor(e.height*i),s=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height="".concat(e.height,"px"),o.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==i||o.height!==r||o.width!==s)&&(e.currentDevicePixelRatio=i,o.height=r,o.width=s,e.ctx.setTransform(i,0,0,i,0,0),!0)}const rE=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Yk()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(mI){}return e}();function sE(e,t){const n=function(e,t){return Xk(e).getPropertyValue(t)}(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function oE(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function aE(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:"middle"===i?n<.5?e.y:t.y:"after"===i?n<1?e.y:t.y:n>0?t.y:e.y}}function lE(e,t,n,i){const r={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},o=oE(e,r,n),a=oE(r,s,n),l=oE(s,t,n),c=oE(o,a,n),u=oE(a,l,n);return oE(c,u,n)}function cE(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function uE(e,t){let n,i;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function hE(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function dE(e){return"angle"===e?{between:wx,compare:_x,normalize:bx}:{between:kx,compare:(e,t)=>e-t,normalize:e=>e}}function fE(e){let{start:t,end:n,count:i,loop:r,style:s}=e;return{start:t%i,end:n%i,loop:r&&(n-t+1)%i===0,style:s}}function pE(e,t,n){if(!n)return[e];const{property:i,start:r,end:s}=n,o=t.length,{compare:a,between:l,normalize:c}=dE(i),{start:u,end:h,loop:d,style:f}=function(e,t,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=dE(i),l=t.length;let c,u,{start:h,end:d,loop:f}=e;if(f){for(h+=l,d+=l,c=0,u=l;c<u&&o(a(t[h%l][i]),r,s);++c)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:f,style:e.style}}(e,t,n),p=[];let g,m,v,y=!1,_=null;const b=()=>y||l(r,v,g)&&0!==a(r,v),w=()=>!y||0===a(s,g)||l(s,v,g);for(let x=u,k=u;x<=h;++x)m=t[x%o],m.skip||(g=c(m[i]),g!==v&&(y=l(g,r,s),null===_&&b()&&(_=0===a(g,r)?x:k),null!==_&&w()&&(p.push(fE({start:_,end:x,loop:d,count:o,style:f})),_=null),k=x,v=g));return null!==_&&p.push(fE({start:_,end:h,loop:d,count:o,style:f})),p}function gE(e,t){const n=[],i=e.segments;for(let r=0;r<i.length;r++){const s=pE(i[r],e.points,t);s.length&&n.push(...s)}return n}function mE(e,t,n,i){return i&&i.setContext&&n?function(e,t,n,i){const r=e._chart.getContext(),s=vE(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=n.length,c=[];let u=s,h=t[0].start,d=h;function f(e,t,i,r){const s=a?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=s;for(;n[t%l].skip;)t+=s;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:i,style:r}),u=r,h=t%l)}}for(const p of t){h=a?h:p.start;let e,t=n[h%l];for(d=h+1;d<=p.end;d++){const s=n[d%l];e=vE(i.setContext(Sk(r,{type:"segment",p0:t,p1:s,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),yE(e,u)&&f(h,d-1,p.loop,u),t=s,u=e}h<d-1&&f(h,d-1,p.loop,u)}return c}(e,t,n,i):t}function vE(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function yE(e,t){if(!t)return!1;const n=[],i=function(e,t){return Vx(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,i)!==JSON.stringify(t,i)}function _E(e,t,n){return e.options.clip?e[n]:t[n]}function bE(e,t){const n=t._clip;if(n.disabled)return!1;const i=function(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:_E(n,t,"left"),right:_E(n,t,"right"),top:_E(i,t,"top"),bottom:_E(i,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:i.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:i.right+(!0===n.right?0:n.right),top:!1===n.top?0:i.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:i.bottom+(!0===n.bottom?0:n.bottom)}}class wE{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,i){const r=t.listeners[i],s=t.duration;r.forEach(i=>i({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=Rx.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let s,o=r.length-1,a=!1;for(;o>=0;--o)s=r[o],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,n,e,"progress")),r.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),t+=r.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var xE=new wE;const kE="transparent",EE={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const i=zx(e||kE),r=i.valid&&zx(t||kE);return r&&r.valid?r.mix(i,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class CE{constructor(e,t,n,i){const r=t[n];i=Ck([e.to,i,r,e.from]);const s=Ck([e.from,r,i]);this._active=!0,this._fn=e.fn||EE[e.type||typeof s],this._easing=Ux[e.easing]||Ux.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,s=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=Ck([e.to,t,i,e.from]),this._from=Ck([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,i=this._prop,r=this._from,s=this._loop,o=this._to;let a;if(this._active=r!==o&&(s||t<n),!this._active)return this._target[i]=o,void this._notify(!0);t<0?this._target[i]=r:(a=t/n%2,a=s&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[i]=this._fn(r,o,a))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][t]()}}class SE{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Dw(e))return;const t=Object.keys(ek.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const r=e[i];if(!Dw(r))return;const s={};for(const e of t)s[e]=r[e];(Ow(r.properties)&&r.properties||[i]).forEach(e=>{e!==i&&n.has(e)||n.set(e,s)})})}_animateOptions(e,t){const n=t.options,i=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(e,t){const n=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const t=e[i[r]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then(()=>{e.options=n},()=>{}),r}_createAnimations(e,t){const n=this._properties,i=[],r=e.$animations||(e.$animations={}),s=Object.keys(t),o=Date.now();let a;for(a=s.length-1;a>=0;--a){const l=s[a];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(e,t));continue}const c=t[l];let u=r[l];const h=n.get(l);if(u){if(h&&u.active()){u.update(h,c,o);continue}u.cancel()}h&&h.duration?(r[l]=u=new CE(h,e,l,c),i.push(u)):e[l]=c}return i}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(xE.add(this._chart,n),!0):void 0}}function TE(e,t){const n=e&&e.options||{},i=n.reverse,r=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:i?s:r,end:i?r:s}}function IE(e,t){const n=[],i=e._getSortedDatasetMetas(t);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function PE(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=e.keys,s="single"===i.mode;let o,a,l,c;if(null===t)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(u=!0,i.all)continue;break}c=e.values[l],Mw(c)&&(s||0===t||cx(t)===cx(c))&&(t+=c)}return u||i.all?t:0}function RE(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function NE(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function AE(e,t,n,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const t=e[r.index];if(n&&t>0||!n&&t<0)return r.index}return null}function OE(e,t){const{chart:n,_cachedMeta:i}=e,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(s,o,i),h=t.length;let d;for(let f=0;f<h;++f){const e=t[f],{[l]:n,[c]:s}=e;d=(e._stacks||(e._stacks={}))[c]=NE(r,u,n),d[a]=s,d._top=AE(d,o,!0,i.type),d._bottom=AE(d,o,!1,i.type);(d._visualValues||(d._visualValues={}))[a]=s}}function DE(e,t){const n=e.scales;return Object.keys(n).filter(e=>n[e].axis===t).shift()}function ME(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[i]||void 0===t[i][n])return;delete t[i][n],void 0!==t[i]._visualValues&&void 0!==t[i]._visualValues[n]&&delete t[i]._visualValues[n]}}}const LE=e=>"reset"===e||"none"===e,jE=(e,t)=>t?e:Object.assign({},e);class FE{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=RE(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&ME(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),i=(e,t,n,i)=>"x"===e?t:"r"===e?i:n,r=t.xAxisID=jw(n.xAxisID,DE(e,"x")),s=t.yAxisID=jw(n.yAxisID,DE(e,"y")),o=t.rAxisID=jw(n.rAxisID,DE(e,"r")),a=t.indexAxis,l=t.iAxisID=i(a,r,s,o),c=t.vAxisID=i(a,s,r,o);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&Ix(this._data,this),e._stacked&&ME(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(Dw(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:i}=t,r="x"===n.axis?"x":"y",s="x"===i.axis?"x":"y",o=Object.keys(e),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[s]:e[u]};return a}(t,e)}else if(n!==t){if(n){Ix(n,this);const e=this._cachedMeta;ME(e),e._parsed=[]}t&&Object.isExtensible(t)&&(r=this,(i=t)._chartjs?i._chartjs.listeners.push(r):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[r]}}),Tx.forEach(e=>{const t="_onData"+$w(e),n=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];const o=n.apply(this,r);return i._chartjs.listeners.forEach(e=>{"function"===typeof e[t]&&e[t](...r)}),o}})}))),this._syncList=[],this._data=t}var i,r}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=t._stacked;t._stacked=RE(t.vScale,t),t.stack!==n.stack&&(i=!0,ME(t),t.stack=n.stack),this._resyncElements(e),(i||r!==t._stacked)&&(OE(this,t._parsed),t._stacked=RE(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:s}=n,o=r.axis;let a,l,c,u=0===e&&t===i.length||n._sorted,h=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,c=i;else{c=Ow(i[e])?this.parseArrayData(n,i,e,t):Dw(i[e])?this.parseObjectData(n,i,e,t):this.parsePrimitiveData(n,i,e,t);const r=()=>null===l[o]||h&&l[o]<h[o];for(a=0;a<t;++a)n._parsed[a+e]=l=c[a],u&&(r()&&(u=!1),h=l);n._sorted=u}s&&OE(this,c)}parsePrimitiveData(e,t,n,i){const{iScale:r,vScale:s}=e,o=r.axis,a=s.axis,l=r.getLabels(),c=r===s,u=new Array(i);let h,d,f;for(h=0,d=i;h<d;++h)f=h+n,u[h]={[o]:c||r.parse(l[f],f),[a]:s.parse(t[f],f)};return u}parseArrayData(e,t,n,i){const{xScale:r,yScale:s}=e,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=t[c],o[a]={x:r.parse(u[0],c),y:s.parse(u[1],c)};return o}parseObjectData(e,t,n,i){const{xScale:r,yScale:s}=e,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l=new Array(i);let c,u,h,d;for(c=0,u=i;c<u;++c)h=c+n,d=t[h],l[c]={x:r.parse(Qw(d,o),h),y:s.parse(Qw(d,a),h)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const i=this.chart,r=this._cachedMeta,s=t[e.axis];return PE({keys:IE(i,!0),values:t._stacks[e.axis]._visualValues},s,r.index,{mode:n})}updateRangeFromParsed(e,t,n,i){const r=n[t.axis];let s=null===r?NaN:r;const o=i&&n._stacks[t.axis];i&&o&&(i.values=o,s=PE(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&e===n.iScale,s=i.length,o=this._getOtherScale(e),a=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:IE(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:i,maxDefined:r}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(o);let h,d;function f(){d=i[h];const t=d[o.axis];return!Mw(d[e.axis])||c>t||u<t}for(h=0;h<s&&(f()||(this.updateRangeFromParsed(l,e,d,a),!r));++h);if(r)for(h=s-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(l,e,d,a);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i][e.axis],Mw(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,i=t.vScale,r=this.getParsed(e);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,i,r;return Dw(e)?(t=e.top,n=e.right,i=e.bottom,r=e.left):t=n=i=r=e,{top:t,right:n,bottom:i,left:r,disabled:!1===e}}(jw(this.options.clip,function(e,t,n){if(!1===n)return!1;const i=TE(e,n),r=TE(t,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,i=n.data||[],r=t.chartArea,s=[],o=this._drawStart||0,a=this._drawCount||i.length-o,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,r,o,a),c=o;c<o+a;++c){const t=i[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,r))}for(c=0;c<s.length;++c)s[c].draw(e,r)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const i=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];r=t.$context||(t.$context=function(e,t,n){return Sk(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),r.parsed=this.getParsed(e),r.raw=i.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=function(e,t){return Sk(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=n,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const i="active"===t,r=this._cachedDataOpts,s=e+"-"+t,o=r[s],a=this.enableOptionSharing&&Xw(n);if(o)return jE(o,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=i?["".concat(e,"Hover"),"hover",e,""]:[e,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(ek.elements[e]),f=l.resolveNamedOptions(h,d,()=>this.getContext(n,i,t),u);return f.$shared&&(f.$shared=a,r[s]=Object.freeze(jE(f,a))),f}_resolveAnimations(e,t,n){const i=this.chart,r=this._cachedDataOpts,s="animation-".concat(t),o=r[s];if(o)return o;let a;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,t),s=i.getOptionScopes(this.getDataset(),r);a=i.createResolver(s,this.getContext(e,n,t))}const l=new SE(i,a&&a.animations);return a&&a._cacheable&&(r[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||LE(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),i=this._sharedOptions,r=this.getSharedOptions(n),s=this.includeOptions(t,r)||r!==i;return this.updateSharedOptions(r,t,n),{sharedOptions:r,includeOptions:s}}updateElement(e,t,n,i){LE(i)?Object.assign(e,n):this._resolveAnimations(t,i).update(e,n)}updateSharedOptions(e,t,n){e&&!LE(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,i){e.active=i;const r=this.getStyle(t,i);this._resolveAnimations(t,n,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[o,a,l]of this._syncList)this[o](a,l);this._syncList=[];const i=n.length,r=t.length,s=Math.min(r,i);s&&this.parse(0,s),r>i?this._insertElements(i,r-i,e):r<i&&this._removeElements(r,i-r)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this._cachedMeta,r=i.data,s=e+t;let o;const a=e=>{for(e.length+=t,o=e.length-1;o>=s;o--)e[o]=e[o-t]};for(a(r),o=e;o<s;++o)r[o]=new this.dataElementType;this._parsing&&a(i._parsed),this.parse(e,t),n&&this.updateElements(r,e,t,"reset")}updateElements(e,t,n,i){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,t);n._stacked&&ME(n,i)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,i]=e;this[t](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function UE(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let t=0,r=n.length;t<r;t++)i=i.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=Px(i.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let i,r,s,o,a=t._length;const l=()=>{32767!==s&&-32768!==s&&(Xw(o)&&(a=Math.min(a,Math.abs(s-o)||a)),o=s)};for(i=0,r=n.length;i<r;++i)s=t.getPixelForValue(n[i]),l();for(o=void 0,i=0,r=t.ticks.length;i<r;++i)s=t.getPixelForTick(i),l();return a}function VE(e,t,n,i){return Ow(e)?function(e,t,n,i){const r=n.parse(e[0],i),s=n.parse(e[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}(e,t,n,i):t[n.axis]=n.parse(e,i),t}function zE(e,t,n,i){const r=e.iScale,s=e.vScale,o=r.getLabels(),a=r===s,l=[];let c,u,h,d;for(c=n,u=n+i;c<u;++c)d=t[c],h={},h[r.axis]=a||r.parse(o[c],c),l.push(VE(d,h,s,c));return l}function BE(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function WE(e,t,n,i){let r=t.borderSkipped;const s={};if(!r)return void(e.borderSkipped=s);if(!0===r)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:l,top:c,bottom:u}=function(e){let t,n,i,r,s;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:t,top:r,bottom:s}}(e);"middle"===r&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(s[HE(u,o,a,l)]=!0,r=c)),s[HE(r,o,a,l)]=!0,e.borderSkipped=s}function HE(e,t,n,i){var r,s,o;return i?(o=n,e=qE(e=(r=e)===(s=t)?o:r===o?s:r,n,t)):e=qE(e,t,n),e}function qE(e,t,n){return"start"===e?t:"end"===e?n:e}function KE(e,t,n){let{inflateAmount:i}=t;e.inflateAmount="auto"===i?1===n?.33:0:i}a(FE,"defaults",{}),a(FE,"datasetElementType",null),a(FE,"dataElementType",null);class GE extends FE{parsePrimitiveData(e,t,n,i){return zE(e,t,n,i)}parseArrayData(e,t,n,i){return zE(e,t,n,i)}parseObjectData(e,t,n,i){const{iScale:r,vScale:s}=e,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l="x"===r.axis?o:a,c="x"===s.axis?o:a,u=[];let h,d,f,p;for(h=n,d=n+i;h<d;++h)p=t[h],f={},f[r.axis]=r.parse(Qw(p,l),h),u.push(VE(Qw(p,c),f,s,h));return u}updateRangeFromParsed(e,t,n,i){super.updateRangeFromParsed(e,t,n,i);const r=n._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:i}=t,r=this.getParsed(e),s=r._custom,o=BE(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,i){const r="reset"===i,{index:s,_cachedMeta:{vScale:o}}=this,a=o.getBasePixel(),l=o.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,i);for(let d=t;d<t+n;d++){const t=this.getParsed(d),n=r||Aw(t[o.axis])?{base:a,head:a}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,c),p=(t._stacks||{})[o.axis],g={horizontal:l,base:n.base,enableBorderRadius:!p||BE(t._custom)||s===p._top||s===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};h&&(g.options=u||this.resolveDataElementOptions(d,e[d].active?"active":i));const m=g.options||e[d].options;WE(g,m,p,s),KE(g,m,c.ratio),this.updateElement(e[d],d,g,i)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),r=n.options.stacked,s=[],o=this._cachedMeta.controller.getParsed(t),a=o&&o[n.axis],l=e=>{const t=e._parsed.find(e=>e[n.axis]===a),i=t&&t[e.vScale.axis];if(Aw(i)||isNaN(i))return!0};for(const c of i)if((void 0===t||!l(c))&&((!1===r||-1===s.indexOf(c.stack)||void 0===r&&void 0===c.stack)&&s.push(c.stack),c.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[jw("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,n){const i=this._getStacks(e,n),r=void 0!==t?i.indexOf(t):-1;return-1===r?i.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,i=[];let r,s;for(r=0,s=t.data.length;r<s;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const o=e.barThickness;return{min:o||UE(t),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:i},options:{base:r,minBarLength:s}}=this,o=r||0,a=this.getParsed(e),l=a._custom,c=BE(l);let u,h,d=a[t.axis],f=0,p=n?this.applyStack(t,a,n):d;p!==d&&(f=p-d,p=d),c&&(d=l.barStart,p=l.barEnd-l.barStart,0!==d&&cx(d)!==cx(l.barEnd)&&(f=0),f+=d);const g=Aw(r)||c?f:r;let m=t.getPixelForValue(g);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(f+p):m,h=u-m,Math.abs(h)<s){h=function(e,t,n){return 0!==e?cx(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(h,t,o)*s,d===o&&(m-=h/2);const e=t.getPixelForDecimal(0),r=t.getPixelForDecimal(1),l=Math.min(e,r),f=Math.max(e,r);m=Math.max(Math.min(m,f),l),u=m+h,n&&!c&&(a._stacks[t.axis]._visualValues[i]=t.getValueForPixel(u)-t.getValueForPixel(m))}if(m===t.getPixelForValue(o)){const e=cx(h)*t.getLineWidthForValue(o)/2;m+=e,h-=e}return{size:h,base:m,head:u,center:u+h/2}}_calculateBarIndexPixels(e,t){const n=t.scale,i=this.options,r=i.skipNull,s=jw(i.maxBarThickness,1/0);let o,a;const l=this._getAxisCount();if(t.grouped){const n=r?this._getStackCount(e):t.stackCount,c="flex"===i.barThickness?function(e,t,n,i){const r=t.pixels,s=r[e];let o=e>0?r[e-1]:null,a=e<r.length-1?r[e+1]:null;const l=n.categoryPercentage;null===o&&(o=s-(null===a?t.end-t.start:a-s)),null===a&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}(e,t,i,n*l):function(e,t,n,i){const r=n.barThickness;let s,o;return Aw(r)?(s=t.min*n.categoryPercentage,o=n.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:t.pixels[e]-s/2}}(e,t,i,n*l),u="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,h=this._getAxis().indexOf(jw(u,this.getFirstScaleIdForIndexAxis())),d=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0)+h;o=c.start+c.chunk*d+c.chunk/2,a=Math.min(s,c.chunk*c.ratio)}else o=n.getPixelForValue(this.getParsed(e)[n.axis],e),a=Math.min(s,t.min*t.ratio);return{base:o-a/2,head:o+a/2,center:o,size:a}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,i=n.length;let r=0;for(;r<i;++r)null===this.getParsed(r)[t.axis]||n[r].hidden||n[r].draw(this._ctx)}}a(GE,"id","bar"),a(GE,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),a(GE,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class YE extends FE{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,i){const r=super.parsePrimitiveData(e,t,n,i);for(let s=0;s<r.length;s++)r[s]._custom=this.resolveDataElementOptions(s+n).radius;return r}parseArrayData(e,t,n,i){const r=super.parseArrayData(e,t,n,i);for(let s=0;s<r.length;s++){const e=t[n+s];r[s]._custom=jw(e[2],this.resolveDataElementOptions(s+n).radius)}return r}parseObjectData(e,t,n,i){const r=super.parseObjectData(e,t,n,i);for(let s=0;s<r.length;s++){const e=t[n+s];r[s]._custom=jw(e&&e.r&&+e.r,this.resolveDataElementOptions(s+n).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=t,s=this.getParsed(e),o=i.getLabelForValue(s.x),a=r.getLabelForValue(s.y),l=s._custom;return{label:n[e]||"",value:"("+o+", "+a+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:o}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(t,i),c=s.axis,u=o.axis;for(let h=t;h<t+n;h++){const t=e[h],n=!r&&this.getParsed(h),d={},f=d[c]=r?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),p=d[u]=r?o.getBasePixel():o.getPixelForValue(n[u]);d.skip=isNaN(f)||isNaN(p),l&&(d.options=a||this.resolveDataElementOptions(h,t.active?"active":i),r&&(d.options.radius=0)),this.updateElement(t,h,d,i)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let i=super.resolveDataElementOptions(e,t);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==t&&(i.radius=0),i.radius+=jw(n&&n._custom,r),i}}a(YE,"id","bubble"),a(YE,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),a(YE,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class QE extends FE{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,s,o=e=>+n[e];if(Dw(n[e])){const{key:e="value"}=this._parsing;o=t=>+Qw(n[t],e)}for(r=e,s=e+t;r<s;++r)i._parsed[r]=o(r)}}_getRotation(){return px(this.options.rotation-90)}_getCircumference(){return px(this.options.circumference)}_getRotationExtents(){let e=tx,t=-tx;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),s=i._getCircumference();e=Math.min(e,r),t=Math.max(t,r+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,i=this._cachedMeta,r=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-s)/2,0),a=Math.min((l=this.options.cutout,c=o,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(e,t,n){let i=1,r=1,s=0,o=0;if(t<tx){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(e,t,i)=>wx(e,a,l,!0)?1:Math.max(t,t*n,i,i*n),p=(e,t,i)=>wx(e,a,l,!0)?-1:Math.min(t,t*n,i,i*n),g=f(0,c,h),m=f(sx,u,d),v=p(ex,c,h),y=p(ex+sx,u,d);i=(g-v)/2,r=(m-y)/2,s=-(g+v)/2,o=-(m+y)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}(d,h,a),v=(n.width-s)/f,y=(n.height-s)/p,_=Math.max(Math.min(v,y)/2,0),b=Fw(this.options.radius,_),w=(b-Math.max(b*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*b,this.offsetY=m*b,i.total=this.calculateTotal(),this.outerRadius=b-w*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-w*u,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===i._parsed[e]||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*r/tx)}updateElements(e,t,n,i){const r="reset"===i,s=this.chart,o=s.chartArea,a=s.options.animation,l=(o.left+o.right)/2,c=(o.top+o.bottom)/2,u=r&&a.animateScale,h=u?0:this.innerRadius,d=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(t,i);let g,m=this._getRotation();for(g=0;g<t;++g)m+=this._circumference(g,r);for(g=t;g<t+n;++g){const t=this._circumference(g,r),n=e[g],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+t,circumference:t,outerRadius:d,innerRadius:h};p&&(s.options=f||this.resolveDataElementOptions(g,n.active?"active":i)),m+=t,this.updateElement(n,g,s,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,i=0;for(n=0;n<t.length;n++){const r=e._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||t[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?tx*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Kx(t._parsed[e],n.options.locale);return{label:i[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const n=this.chart;let i,r,s,o,a;if(!e)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){s=n.getDatasetMeta(i),e=s.data,o=s.controller;break}if(!e)return 0;for(i=0,r=e.length;i<r;++i)a=o.resolveDataElementOptions(i),"inner"!==a.borderAlign&&(t=Math.max(t,a.borderWidth||0,a.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,i=e.length;n<i;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(jw(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}a(QE,"id","doughnut"),a(QE,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),a(QE,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),a(QE,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map((t,r)=>{const s=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class $E extends FE{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=t,s=this.chart._animationsDisabled;let{start:o,count:a}=Dx(t,i,s);this._drawStart=o,this._drawCount=a,Mx(t)&&(o=0,a=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},e),this.updateElements(i,o,a,e)}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,i),h=s.axis,d=o.axis,{spanGaps:f,segment:p}=this.options,g=dx(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||r||"none"===i,v=t+n,y=e.length;let _=t>0&&this.getParsed(t-1);for(let b=0;b<y;++b){const n=e[b],f=m?n:{};if(b<t||b>=v){f.skip=!0;continue}const y=this.getParsed(b),w=Aw(y[d]),x=f[h]=s.getPixelForValue(y[h],b),k=f[d]=r||w?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,y,a):y[d],b);f.skip=isNaN(x)||isNaN(k)||w,f.stop=b>0&&Math.abs(y[h]-_[h])>g,p&&(f.parsed=y,f.raw=l.data[b]),u&&(f.options=c||this.resolveDataElementOptions(b,n.active?"active":i)),m||this.updateElement(n,b,f,i),_=y}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),s=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}a($E,"id","line"),a($E,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),a($E,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class XE extends FE{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=Kx(t._parsed[e].r,n.options.locale);return{label:i[e]||"",value:r}}parseObjectData(e,t,n,i){return Vk.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<t.min&&(t.min=i),i>t.max&&(t.max=i))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(i/2,0),s=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=r-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,n,i){const r="reset"===i,s=this.chart,o=s.options.animation,a=this._cachedMeta.rScale,l=a.xCenter,c=a.yCenter,u=a.getIndexAngle(0)-.5*ex;let h,d=u;const f=360/this.countVisibleElements();for(h=0;h<t;++h)d+=this._computeAngle(h,i,f);for(h=t;h<t+n;h++){const t=e[h];let n=d,p=d+this._computeAngle(h,i,f),g=s.getDataVisibility(h)?a.getDistanceFromCenterForValue(this.getParsed(h).r):0;d=p,r&&(o.animateScale&&(g=0),o.animateRotate&&(n=p=u));const m={x:l,y:c,innerRadius:0,outerRadius:g,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(h,t.active?"active":i)};this.updateElement(t,h,m,i)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?px(this.resolveDataElementOptions(e,t).angle||n):0}}a(XE,"id","polarArea"),a(XE,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),a(XE,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map((t,r)=>{const s=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class JE extends QE{}a(JE,"id","pie"),a(JE,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class ZE extends FE{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,i){return Vk.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta,n=t.dataset,i=t.data||[],r=t.iScale.getLabels();if(n.points=i,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:r.length===i.length,options:t};this.updateElement(n,void 0,s,e)}this.updateElements(i,0,i.length,e)}updateElements(e,t,n,i){const r=this._cachedMeta.rScale,s="reset"===i;for(let o=t;o<t+n;o++){const t=e[o],n=this.resolveDataElementOptions(o,t.active?"active":i),a=r.getPointPositionForValue(o,this.getParsed(o).r),l=s?r.xCenter:a.x,c=s?r.yCenter:a.y,u={x:l,y:c,angle:a.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,o,u,i)}}}a(ZE,"id","radar"),a(ZE,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),a(ZE,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class eC extends FE{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=t,s=this.getParsed(e),o=i.getLabelForValue(s.x),a=r.getLabelForValue(s.y);return{label:n[e]||"",value:"("+o+", "+a+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,i=this.chart._animationsDisabled;let{start:r,count:s}=Dx(t,n,i);if(this._drawStart=r,this._drawCount=s,Mx(t)&&(r=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:r,_dataset:s}=t;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=n;const o=this.resolveDatasetElementOptions(e);o.segment=this.options.segment,this.updateElement(r,void 0,{animated:!i,options:o},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,r,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,i),u=this.getSharedOptions(c),h=this.includeOptions(i,u),d=s.axis,f=o.axis,{spanGaps:p,segment:g}=this.options,m=dx(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||"none"===i;let y=t>0&&this.getParsed(t-1);for(let _=t;_<t+n;++_){const t=e[_],n=this.getParsed(_),c=v?t:{},p=Aw(n[f]),b=c[d]=s.getPixelForValue(n[d],_),w=c[f]=r||p?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,n,a):n[f],_);c.skip=isNaN(b)||isNaN(w)||p,c.stop=_>0&&Math.abs(n[d]-y[d])>m,g&&(c.parsed=n,c.raw=l.data[_]),h&&(c.options=u||this.resolveDataElementOptions(_,t.active?"active":i)),v||this.updateElement(t,_,c,i),y=n}this.updateSharedOptions(u,i,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,i=n.options&&n.options.borderWidth||0;if(!t.length)return i;const r=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(i,r,s)/2}}a(eC,"id","scatter"),a(eC,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),a(eC,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function tC(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class nC{static override(e){Object.assign(nC.prototype,e)}constructor(e){a(this,"options",void 0),this.options=e||{}}init(){}formats(){return tC()}parse(){return tC()}format(){return tC()}add(){return tC()}diff(){return tC()}startOf(){return tC()}endOf(){return tC()}}var iC=nC;function rC(e,t,n,i){const{controller:r,data:s,_sorted:o}=e,a=r._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(a&&t===a.axis&&"r"!==t&&o&&s.length){const o=a._reversePixels?Sx:Cx;if(!i){const i=o(s,t,n);if(l){const{vScale:t}=r._cachedMeta,{_parsed:n}=e,s=n.slice(0,i.lo+1).reverse().findIndex(e=>!Aw(e[t.axis]));i.lo-=Math.max(0,s);const o=n.slice(i.hi).findIndex(e=>!Aw(e[t.axis]));i.hi+=Math.max(0,o)}return i}if(r._sharedOptions){const e=s[0],i="function"===typeof e.getRange&&e.getRange(t);if(i){const e=o(s,t,n-i),r=o(s,t,n+i);return{lo:e.lo,hi:r.hi}}}}return{lo:0,hi:s.length-1}}function sC(e,t,n,i,r){const s=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=s.length;a<l;++a){const{index:e,data:n}=s[a],{lo:l,hi:c}=rC(s[a],t,o,r);for(let t=l;t<=c;++t){const r=n[t];r.skip||i(r,e,t)}}}function oC(e,t,n,i,r){const s=[];if(!r&&!e.isPointInArea(t))return s;return sC(e,n,t,function(n,o,a){(r||ak(n,e.chartArea,0))&&n.inRange(t.x,t.y,i)&&s.push({element:n,datasetIndex:o,index:a})},!0),s}function aC(e,t,n,i,r,s){let o=[];const a=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,i){const r=t?Math.abs(e.x-i.x):0,s=n?Math.abs(e.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return sC(e,n,t,function(n,c,u){const h=n.inRange(t.x,t.y,r);if(i&&!h)return;const d=n.getCenterPoint(r);if(!(!!s||e.isPointInArea(d))&&!h)return;const f=a(t,d);f<l?(o=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&o.push({element:n,datasetIndex:c,index:u})}),o}function lC(e,t,n,i,r,s){return s||e.isPointInArea(t)?"r"!==n||i?aC(e,t,n,i,r,s):function(e,t,n,i){let r=[];return sC(e,n,t,function(e,n,s){const{startAngle:o,endAngle:a}=e.getProps(["startAngle","endAngle"],i),{angle:l}=vx(e,{x:t.x,y:t.y});wx(l,o,a)&&r.push({element:e,datasetIndex:n,index:s})}),r}(e,t,n,r):[]}function cC(e,t,n,i,r){const s=[],o="x"===n?"inXRange":"inYRange";let a=!1;return sC(e,n,t,(e,i,l)=>{e[o]&&e[o](t[n],r)&&(s.push({element:e,datasetIndex:i,index:l}),a=a||e.inRange(t.x,t.y,r))}),i&&!a?[]:s}var uC={evaluateInteractionItems:sC,modes:{index(e,t,n,i){const r=eE(t,e),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?oC(e,r,s,i,o):lC(e,r,s,!1,i,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=a[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,n,i){const r=eE(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?oC(e,r,s,i,o):lC(e,r,s,!1,i,o);if(a.length>0){const t=a[0].datasetIndex,n=e.getDatasetMeta(t).data;a=[];for(let e=0;e<n.length;++e)a.push({element:n[e],datasetIndex:t,index:e})}return a},point:(e,t,n,i)=>oC(e,eE(t,e),n.axis||"xy",i,n.includeInvisible||!1),nearest(e,t,n,i){const r=eE(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;return lC(e,r,s,n.intersect,i,o)},x:(e,t,n,i)=>cC(e,eE(t,e),"x",n.intersect,i),y:(e,t,n,i)=>cC(e,eE(t,e),"y",n.intersect,i)}};const hC=["left","top","right","bottom"];function dC(e,t){return e.filter(e=>e.pos===t)}function fC(e,t){return e.filter(e=>-1===hC.indexOf(e.pos)&&e.box.axis===t)}function pC(e,t){return e.sort((e,n)=>{const i=t?n:e,r=t?e:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function gC(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:i,stackWeight:r}=n;if(!e||!hC.includes(i))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=r}return t}(e),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let s,o,a;for(s=0,o=e.length;s<o;++s){a=e[s];const{fullSize:o}=a.box,l=n[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*i:o&&t.availableWidth,a.height=r):(a.width=i,a.height=c?c*r:o&&t.availableHeight)}return n}function mC(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function vC(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function yC(e,t,n,i){const{pos:r,box:s}=n,o=e.maxPadding;if(!Dw(r)){n.size&&(e[r]-=n.size);const t=i[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?s.height:s.width),n.size=t.size/t.count,e[r]+=n.size}s.getPadding&&vC(o,s.getPadding());const a=Math.max(0,t.outerWidth-mC(o,e,"left","right")),l=Math.max(0,t.outerHeight-mC(o,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function _C(e,t){const n=t.maxPadding;function i(e){const i={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{i[e]=Math.max(t[e],n[e])}),i}return i(e?["left","right"]:["top","bottom"])}function bC(e,t,n,i){const r=[];let s,o,a,l,c,u;for(s=0,o=e.length,c=0;s<o;++s){a=e[s],l=a.box,l.update(a.width||t.w,a.height||t.h,_C(a.horizontal,t));const{same:o,other:h}=yC(t,n,a,i);c|=o&&r.length,u=u||h,l.fullSize||r.push(a)}return c&&bC(r,t,n,i)||u}function wC(e,t,n,i,r){e.top=n,e.left=t,e.right=t+i,e.bottom=n+r,e.width=i,e.height=r}function xC(e,t,n,i){const r=n.padding;let{x:s,y:o}=t;for(const a of e){const e=a.box,l=i[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const i=t.w*c,s=l.size||e.height;Xw(l.start)&&(o=l.start),e.fullSize?wC(e,r.left,o,n.outerWidth-r.right-r.left,s):wC(e,t.left+l.placed,o,i,s),l.start=o,l.placed+=i,o=e.bottom}else{const i=t.h*c,o=l.size||e.width;Xw(l.start)&&(s=l.start),e.fullSize?wC(e,s,r.top,o,n.outerHeight-r.bottom-r.top):wC(e,s,t.top+l.placed,o,i),l.start=s,l.placed+=i,s=e.right}}t.x=s,t.y=o}var kC={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const r=kk(e.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(n-r.height,0),a=function(e){const t=function(e){const t=[];let n,i,r,s,o,a;for(n=0,i=(e||[]).length;n<i;++n)r=e[n],({position:s,options:{stack:o,stackWeight:a=1}}=r),t.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return t}(e),n=pC(t.filter(e=>e.box.fullSize),!0),i=pC(dC(t,"left"),!0),r=pC(dC(t,"right")),s=pC(dC(t,"top"),!0),o=pC(dC(t,"bottom")),a=fC(t,"x"),l=fC(t,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:dC(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}(e.boxes),l=a.vertical,c=a.horizontal;Vw(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const u=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},r);vC(d,kk(i));const f=Object.assign({maxPadding:d,w:s,h:o,x:r.left,y:r.top},r),p=gC(l.concat(c),h);bC(a.fullSize,f,h,p),bC(l,f,h,p),bC(c,f,h,p)&&bC(l,f,h,p),function(e){const t=e.maxPadding;function n(n){const i=Math.max(t[n]-e[n],0);return e[n]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),xC(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,xC(a.rightAndBottom,f,h,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Vw(a.chartArea,t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class EC{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,i){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):n)}}isAttached(e){return!0}updateConfig(e){}}class CC extends EC{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const SC="$chartjs",TC={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},IC=e=>null===e||""===e;const PC=!!rE&&{passive:!0};function RC(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,PC)}function NC(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function AC(e,t,n){const i=e.canvas,r=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||NC(n.addedNodes,i),t=t&&!NC(n.removedNodes,i);t&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function OC(e,t,n){const i=e.canvas,r=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||NC(n.removedNodes,i),t=t&&!NC(n.addedNodes,i);t&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const DC=new Map;let MC=0;function LC(){const e=window.devicePixelRatio;e!==MC&&(MC=e,DC.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function jC(e,t,n){const i=e.canvas,r=i&&Qk(i);if(!r)return;const s=Nx((e,t)=>{const i=r.clientWidth;n(e,t),i<r.clientWidth&&n()},window),o=new ResizeObserver(e=>{const t=e[0],n=t.contentRect.width,i=t.contentRect.height;0===n&&0===i||s(n,i)});return o.observe(r),function(e,t){DC.size||window.addEventListener("resize",LC),DC.set(e,t)}(e,s),o}function FC(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){DC.delete(e),DC.size||window.removeEventListener("resize",LC)}(e)}function UC(e,t,n){const i=e.canvas,r=Nx(t=>{null!==e.ctx&&n(function(e,t){const n=TC[e.type]||e.type,{x:i,y:r}=eE(e,t);return{type:n,chart:t,native:e,x:void 0!==i?i:null,y:void 0!==r?r:null}}(t,e))},e);return function(e,t,n){e&&e.addEventListener(t,n,PC)}(i,t,r),r}class VC extends EC{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,i=e.getAttribute("height"),r=e.getAttribute("width");if(e[SC]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",IC(r)){const t=sE(e,"width");void 0!==t&&(e.width=t)}if(IC(i))if(""===e.style.height)e.height=e.width/(t||2);else{const t=sE(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[SC])return!1;const n=t[SC].initial;["height","width"].forEach(e=>{const i=n[e];Aw(i)?t.removeAttribute(e):t.setAttribute(e,i)});const i=n.style||{};return Object.keys(i).forEach(e=>{t.style[e]=i[e]}),t.width=t.width,delete t[SC],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),r={attach:AC,detach:OC,resize:jC}[t]||UC;i[t]=r(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),i=n[t];if(!i)return;({attach:FC,detach:FC,resize:FC}[t]||RC)(e,t,i),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,i){return nE(e,t,n,i)}isAttached(e){const t=e&&Qk(e);return!(!t||!t.isConnected)}}class zC{constructor(){a(this,"x",void 0),a(this,"y",void 0),a(this,"active",!1),a(this,"options",void 0),a(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return dx(this.x)&&dx(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const i={};return e.forEach(e=>{i[e]=n[e]&&n[e].active()?n[e]._to:this[e]}),i}}function BC(e,t){const n=e.options.ticks,i=function(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(i,r))}(e),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?function(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}(t):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return function(e,t,n,i){let r,s=0,o=n[0];for(i=Math.ceil(i),r=0;r<e.length;r++)r===o&&(t.push(e[r]),s++,o=n[s*i])}(t,c,s,o/r),c;const u=function(e,t,n){const i=function(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}(e),r=t.length/n;if(!i)return Math.max(r,1);const s=function(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(0|n)&&t.push(n),t.sort((e,t)=>e-t).pop(),t}(i);for(let o=0,a=s.length-1;o<a;o++){const e=s[o];if(e>r)return e}return Math.max(r,1)}(s,t,r);if(o>0){let e,n;const i=o>1?Math.round((l-a)/(o-1)):null;for(WC(t,c,u,Aw(i)?0:a-i,a),e=0,n=o-1;e<n;e++)WC(t,c,u,s[e],s[e+1]);return WC(t,c,u,l,Aw(i)?t.length:l+i),c}return WC(t,c,u),c}function WC(e,t,n,i,r){const s=jw(i,0),o=Math.min(jw(r,e.length),e.length);let a,l,c,u=0;for(n=Math.ceil(n),r&&(a=r-i,n=a/Math.floor(a/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<o;l++)l===c&&(t.push(e[l]),u++,c=Math.round(s+u*n))}a(zC,"defaults",{}),a(zC,"defaultRoutes",void 0);const HC=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,qC=(e,t)=>Math.min(t||e,e);function KC(e,t){const n=[],i=e.length/t,r=e.length;let s=0;for(;s<r;s+=i)n.push(e[Math.floor(s)]);return n}function GC(e,t,n){const i=e.ticks.length,r=Math.min(t,i-1),s=e._startPixel,o=e._endPixel,a=1e-6;let l,c=e.getPixelForTick(r);if(!(n&&(l=1===i?Math.max(c-s,o-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(r-1))/2,c+=r<t?l:-l,c<s-a||c>o+a)))return c}function YC(e){return e.drawTicks?e.tickLength:0}function QC(e,t){if(!e.display)return 0;const n=Ek(e.font,t),i=kk(e.padding);return(Ow(e.text)?e.text.length:1)*n.lineHeight+i.height}function $C(e,t,n){let i=Ax(e);return(n&&"right"!==t||!n&&"right"===t)&&(i=(e=>"left"===e?"right":"right"===e?"left":e)(i)),i}class XC extends zC{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:i}=this;return e=Lw(e,Number.POSITIVE_INFINITY),t=Lw(t,Number.NEGATIVE_INFINITY),n=Lw(n,Number.POSITIVE_INFINITY),i=Lw(i,Number.NEGATIVE_INFINITY),{min:Lw(e,n),max:Lw(t,i),minDefined:Mw(e),maxDefined:Mw(t)}}getMinMax(e){let t,{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:n,max:i};const o=this.getMatchingVisibleMetas();for(let a=0,l=o.length;a<l;++a)t=o[a].controller.getMinMax(this,e),r||(n=Math.min(n,t.min)),s||(i=Math.max(i,t.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:Lw(n,Lw(i,n)),max:Lw(i,Lw(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Uw(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:i,grace:r,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:i,max:r}=e,s=Fw(t,(r-i)/2),o=(e,t)=>n&&0===e?0:e+t;return{min:o(i,-Math.abs(s)),max:o(r,s)}}(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=o<this.ticks.length;this._convertTicksToLabels(a?KC(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=BC(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Uw(this.options.afterUpdate,[this])}beforeSetDimensions(){Uw(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Uw(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Uw(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Uw(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,i,r;for(n=0,i=e.length;n<i;n++)r=e[n],r.label=Uw(t.callback,[r.value,n,e],this)}afterTickToLabelConversion(){Uw(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Uw(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=qC(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,r=t.maxRotation;let s,o,a,l=i;if(!this._isVisible()||!t.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,d=xx(this.chart.width-u,0,this.maxWidth);s=e.offset?this.maxWidth/n:d/(n-1),u+6>s&&(s=d/(n-(e.offset?.5:1)),o=this.maxHeight-YC(e.grid)-t.padding-QC(e.title,this.chart.options.font),a=Math.sqrt(u*u+h*h),l=gx(Math.min(Math.asin(xx((c.highest.height+6)/s,-1,1)),Math.asin(xx(o/a,-1,1))-Math.asin(xx(h/a,-1,1)))),l=Math.max(i,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){Uw(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Uw(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:i,grid:r}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){const s=QC(i,t.options.font);if(o?(e.width=this.maxWidth,e.height=YC(r)+s):(e.height=this.maxHeight,e.width=YC(r)+s),n.display&&this.ticks.length){const{first:t,last:i,widest:r,highest:s}=this._getLabelSizes(),a=2*n.padding,l=px(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(o){const t=n.mirror?0:u*r.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+a)}else{const t=n.mirror?0:c*r.width+u*s.height;e.width=Math.min(this.maxWidth,e.width+t+a)}this._calculatePadding(t,i,u,c)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,i){const{ticks:{align:r,padding:s},position:o}=this.options,a=0!==this.labelRotation,l="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;a?l?(u=i*e.width,h=n*t.height):(u=n*e.height,h=i*t.width):"start"===r?h=t.width:"end"===r?u=e.width:"inner"!==r&&(u=e.width/2,h=t.width/2),this.paddingLeft=Math.max((u-o+s)*this.width/(this.width-o),0),this.paddingRight=Math.max((h-c+s)*this.width/(this.width-c),0)}else{let n=t.height/2,i=e.height/2;"start"===r?(n=0,i=e.height):"end"===r&&(n=t.height,i=0),this.paddingTop=n+s,this.paddingBottom=i+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Uw(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)Aw(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=KC(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:i,_longestTextCache:r}=this,s=[],o=[],a=Math.floor(t/qC(t,n));let l,c,u,h,d,f,p,g,m,v,y,_=0,b=0;for(l=0;l<t;l+=a){if(h=e[l].label,d=this._resolveTickFontOptions(l),i.font=f=d.string,p=r[f]=r[f]||{data:{},gc:[]},g=d.lineHeight,m=v=0,Aw(h)||Ow(h)){if(Ow(h))for(c=0,u=h.length;c<u;++c)y=h[c],Aw(y)||Ow(y)||(m=tk(i,p.data,p.gc,m,y),v+=g)}else m=tk(i,p.data,p.gc,m,h),v=g;s.push(m),o.push(v),_=Math.max(m,_),b=Math.max(v,b)}!function(e,t){Vw(e,e=>{const n=e.gc,i=n.length/2;let r;if(i>t){for(r=0;r<i;++r)delete e.data[n[r]];n.splice(0,i)}})}(r,t);const w=s.indexOf(_),x=o.indexOf(b),k=e=>({width:s[e]||0,height:o[e]||0});return{first:k(0),last:k(t-1),widest:k(w),highest:k(x),widths:s,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return xx(this._alignToPixels?ik(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return Sk(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=Sk(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=px(this.labelRotation),n=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),r=this._getLabelSizes(),s=e.autoSkipPadding||0,o=r?r.widest.width+s:0,a=r?r.highest.height+s:0;return this.isHorizontal()?a*n>o*i?o/n:a/i:a*i<o*n?a/n:o/i}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,i=this.options,{grid:r,position:s,border:o}=i,a=r.offset,l=this.isHorizontal(),c=this.ticks.length+(a?1:0),u=YC(r),h=[],d=o.setContext(this.getContext()),f=d.display?d.width:0,p=f/2,g=function(e){return ik(n,e,f)};let m,v,y,_,b,w,x,k,E,C,S,T;if("top"===s)m=g(this.bottom),w=this.bottom-u,k=m-p,C=g(e.top)+p,T=e.bottom;else if("bottom"===s)m=g(this.top),C=e.top,T=g(e.bottom)-p,w=m+p,k=this.top+u;else if("left"===s)m=g(this.right),b=this.right-u,x=m-p,E=g(e.left)+p,S=e.right;else if("right"===s)m=g(this.left),E=e.left,S=g(e.right)-p,b=m+p,x=this.left+u;else if("x"===t){if("center"===s)m=g((e.top+e.bottom)/2+.5);else if(Dw(s)){const e=Object.keys(s)[0],t=s[e];m=g(this.chart.scales[e].getPixelForValue(t))}C=e.top,T=e.bottom,w=m+p,k=w+u}else if("y"===t){if("center"===s)m=g((e.left+e.right)/2);else if(Dw(s)){const e=Object.keys(s)[0],t=s[e];m=g(this.chart.scales[e].getPixelForValue(t))}b=m-p,x=b-u,E=e.left,S=e.right}const I=jw(i.ticks.maxTicksLimit,c),P=Math.max(1,Math.ceil(c/I));for(v=0;v<c;v+=P){const e=this.getContext(v),t=r.setContext(e),i=o.setContext(e),s=t.lineWidth,c=t.color,u=i.dash||[],d=i.dashOffset,f=t.tickWidth,p=t.tickColor,g=t.tickBorderDash||[],m=t.tickBorderDashOffset;y=GC(this,v,a),void 0!==y&&(_=ik(n,y,s),l?b=x=E=S=_:w=k=C=T=_,h.push({tx1:b,ty1:w,tx2:x,ty2:k,x1:E,y1:C,x2:S,y2:T,width:s,color:c,borderDash:u,borderDashOffset:d,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,h}_computeLabelItems(e){const t=this.axis,n=this.options,{position:i,ticks:r}=n,s=this.isHorizontal(),o=this.ticks,{align:a,crossAlign:l,padding:c,mirror:u}=r,h=YC(n.grid),d=h+c,f=u?-c:d,p=-px(this.labelRotation),g=[];let m,v,y,_,b,w,x,k,E,C,S,T,I="middle";if("top"===i)w=this.bottom-f,x=this._getXAxisLabelAlignment();else if("bottom"===i)w=this.top+f,x=this._getXAxisLabelAlignment();else if("left"===i){const e=this._getYAxisLabelAlignment(h);x=e.textAlign,b=e.x}else if("right"===i){const e=this._getYAxisLabelAlignment(h);x=e.textAlign,b=e.x}else if("x"===t){if("center"===i)w=(e.top+e.bottom)/2+d;else if(Dw(i)){const e=Object.keys(i)[0],t=i[e];w=this.chart.scales[e].getPixelForValue(t)+d}x=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===i)b=(e.left+e.right)/2-d;else if(Dw(i)){const e=Object.keys(i)[0],t=i[e];b=this.chart.scales[e].getPixelForValue(t)}x=this._getYAxisLabelAlignment(h).textAlign}"y"===t&&("start"===a?I="top":"end"===a&&(I="bottom"));const P=this._getLabelSizes();for(m=0,v=o.length;m<v;++m){y=o[m],_=y.label;const e=r.setContext(this.getContext(m));k=this.getPixelForTick(m)+r.labelOffset,E=this._resolveTickFontOptions(m),C=E.lineHeight,S=Ow(_)?_.length:1;const t=S/2,n=e.color,a=e.textStrokeColor,c=e.textStrokeWidth;let h,d=x;if(s?(b=k,"inner"===x&&(d=m===v-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),T="top"===i?"near"===l||0!==p?-S*C+C/2:"center"===l?-P.highest.height/2-t*C+C:-P.highest.height+C/2:"near"===l||0!==p?C/2:"center"===l?P.highest.height/2-t*C:P.highest.height-S*C,u&&(T*=-1),0===p||e.showLabelBackdrop||(b+=C/2*Math.sin(p))):(w=k,T=(1-S)*C/2),e.showLabelBackdrop){const t=kk(e.backdropPadding),n=P.heights[m],i=P.widths[m];let r=T-t.top,s=0-t.left;switch(I){case"middle":r-=n/2;break;case"bottom":r-=n}switch(x){case"center":s-=i/2;break;case"right":s-=i;break;case"inner":m===v-1?s-=i:m>0&&(s-=i/2)}h={left:s,top:r,width:i+t.width,height:n+t.height,color:e.backdropColor}}g.push({label:_,font:E,textOffset:T,options:{rotation:p,color:n,strokeColor:a,strokeWidth:c,textAlign:d,textBaseline:I,translation:[b,w],backdrop:h}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-px(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,s=e+r,o=this._getLabelSizes().widest.width;let a,l;return"left"===t?i?(l=this.right+r,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l+=o)):(l=this.right-s,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l=this.left)):"right"===t?i?(l=this.left+r,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l-=o)):(l=this.left+s,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:i,width:r,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,i,r,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(t=>t.value===e);if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,s;const o=(e,t,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(r=0,s=i.length;r<s;++r){const e=i[r];t.drawOnChartArea&&o({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&o({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),s=n.display?r.width:0;if(!s)return;const o=i.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,u,h;this.isHorizontal()?(l=ik(e,this.left,s)-s/2,c=ik(e,this.right,o)+o/2,u=h=a):(u=ik(e,this.top,s)-s/2,h=ik(e,this.bottom,o)+o/2,l=c=a),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&lk(t,n);const i=this.getLabelItems(e);for(const r of i){const e=r.options,n=r.font;pk(t,r.label,0,r.textOffset,n,e)}n&&ck(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:i}}=this;if(!n.display)return;const r=Ek(n.font),s=kk(n.padding),o=n.align;let a=r.lineHeight/2;"bottom"===t||"center"===t||Dw(t)?(a+=s.bottom,Ow(n.text)&&(a+=r.lineHeight*(n.text.length-1))):a+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:h}=function(e,t,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let h,d,f,p=0;const g=o-r,m=a-s;if(e.isHorizontal()){if(d=Ox(i,s,a),Dw(n)){const e=Object.keys(n)[0],i=n[e];f=u[e].getPixelForValue(i)+g-t}else f="center"===n?(c.bottom+c.top)/2+g-t:HC(e,n,t);h=a-s}else{if(Dw(n)){const e=Object.keys(n)[0],i=n[e];d=u[e].getPixelForValue(i)-m+t}else d="center"===n?(c.left+c.right)/2-m+t:HC(e,n,t);f=Ox(i,o,r),p="left"===n?-sx:sx}return{titleX:d,titleY:f,maxWidth:h,rotation:p}}(this,a,t,o);pk(e,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:h,textAlign:$C(o,t,i),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=jw(e.grid&&e.grid.z,-1),i=jw(e.border&&e.border.z,0);return this._isVisible()&&this.draw===XC.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,s;for(r=0,s=t.length;r<s;++r){const s=t[r];s[n]!==this.id||e&&s.type!==e||i.push(s)}return i}_resolveTickFontOptions(e){return Ek(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class JC{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const i=this.items,r=e.id,s=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,function(e,t,n){const i=qw(Object.create(null),[n?ek.get(n):{},ek.get(t),e.defaults]);ek.set(t,i),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(n=>{const i=n.split("."),r=i.pop(),s=[e].concat(i).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");ek.route(s,r,l,a)})}(t,e.defaultRoutes);e.descriptors&&ek.describe(t,e.descriptors)}(e,s,n),this.override&&ek.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,i=this.scope;n in t&&delete t[n],i&&n in ek[i]&&(delete ek[i][n],this.override&&delete Qx[n])}}class ZC{constructor(){this.controllers=new JC(FE,"datasets",!0),this.elements=new JC(zC,"elements"),this.plugins=new JC(Object,"plugins"),this.scales=new JC(XC,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach(t=>{const i=n||this._getRegistryForType(t);n||i.isForType(t)||i===this.plugins&&t.id?this._exec(e,i,t):Vw(t,t=>{const i=n||this._getRegistryForType(t);this._exec(e,i,t)})})}_exec(e,t,n){const i=$w(e);Uw(n["before"+i],[],n),t[e](n),Uw(n["after"+i],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const i=t.get(e);if(void 0===i)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var eS=new ZC;class tS{constructor(){this._init=[]}notify(e,t,n,i){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=i?this._descriptors(e).filter(i):this._descriptors(e),s=this._notify(r,e,t,n);return"afterDestroy"===t&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,n,i){i=i||{};for(const r of e){const e=r.plugin;if(!1===Uw(e[n],[t,i,r.options],e)&&i.cancelable)return!1}return!0}invalidate(){Aw(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,i=jw(n.options&&n.options.plugins,{}),r=function(e){const t={},n=[],i=Object.keys(eS.plugins.items);for(let s=0;s<i.length;s++)n.push(eS.getPlugin(i[s]));const r=e.plugins||[];for(let s=0;s<r.length;s++){const e=r[s];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==i||t?function(e,t,n,i){let{plugins:r,localIds:s}=t;const o=[],a=e.getContext();for(const l of r){const t=l.id,r=nS(n[t],i);null!==r&&o.push({plugin:l,options:iS(e.config,{plugin:l,local:s[t]},r,a)})}return o}(e,r,i,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,i=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(i(t,n),e,"stop"),this._notify(i(n,t),e,"start")}}function nS(e,t){return t||!1!==e?!0===e?{}:e:null}function iS(e,t,n,i){let{plugin:r,local:s}=t;const o=e.pluginScopeKeys(r),a=e.getOptionScopes(n,o);return s&&r.defaults&&a.push(r.defaults),e.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function rS(e,t){const n=ek.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function sS(e){if("x"===e||"y"===e||"r"===e)return e}function oS(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function aS(e){if(sS(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n){const t=r.axis||oS(r.position)||e.length>1&&sS(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function lS(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function cS(e,t){const n=Qx[e.type]||{scales:{}},i=t.scales||{},r=rS(e.type,t),s=Object.create(null);return Object.keys(i).forEach(t=>{const o=i[t];if(!Dw(o))return console.error("Invalid scale configuration for scale: ".concat(t));if(o._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const a=aS(t,o,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(n.length)return lS(e,"x",n[0])||lS(e,"y",n[0])}return{}}(t,e),ek.scales[o.type]),l=function(e,t){return e===t?"_index_":"_value_"}(a,r),c=n.scales||{};s[t]=Kw(Object.create(null),[{axis:a},o,c[a],c[l]])}),e.data.datasets.forEach(n=>{const r=n.type||e.type,o=n.indexAxis||rS(r,t),a=(Qx[r]||{}).scales||{};Object.keys(a).forEach(e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,o),r=n[t+"AxisID"]||t;s[r]=s[r]||Object.create(null),Kw(s[r],[{axis:t},i[r],a[e]])})}),Object.keys(s).forEach(e=>{const t=s[e];Kw(t,[ek.scales[t.type],ek.scale])}),s}function uS(e){const t=e.options||(e.options={});t.plugins=jw(t.plugins,{}),t.scales=cS(e,t)}function hS(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const dS=new Map,fS=new Set;function pS(e,t){let n=dS.get(e);return n||(n=t(),dS.set(e,n),fS.add(n)),n}const gS=(e,t,n)=>{const i=Qw(t,n);void 0!==i&&e.add(i)};class mS{constructor(e){this._config=function(e){return(e=e||{}).data=hS(e.data),uS(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=hS(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),uS(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return pS(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return pS("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return pS("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return pS("".concat(n,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let i=n.get(e);return i&&!t||(i=new Map,n.set(e,i)),i}getOptionScopes(e,t,n){const{options:i,type:r}=this,s=this._cachedScopes(e,n),o=s.get(t);if(o)return o;const a=new Set;t.forEach(t=>{e&&(a.add(e),t.forEach(t=>gS(a,e,t))),t.forEach(e=>gS(a,i,e)),t.forEach(e=>gS(a,Qx[r]||{},e)),t.forEach(e=>gS(a,ek,e)),t.forEach(e=>gS(a,$x,e))});const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),fS.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,Qx[t]||{},ek.datasets[t]||{},{type:t},ek,$x]}resolveNamedOptions(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const r={$shared:!0},{resolver:s,subPrefixes:o}=vS(this._resolverCache,e,i);let a=s;if(function(e,t){const{isScriptable:n,isIndexable:i}=Pk(e);for(const r of t){const t=n(r),s=i(r),o=(s||t)&&e[r];if(t&&(Jw(o)||yS(o))||s&&Ow(o))return!0}return!1}(s,t)){r.$shared=!1;a=Ik(s,n=Jw(n)?n():n,this.createResolver(e,n,o))}for(const l of t)r[l]=a[l];return r}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],i=arguments.length>3?arguments[3]:void 0;const{resolver:r}=vS(this._resolverCache,e,n);return Dw(t)?Ik(r,t,void 0,i):r}}function vS(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const r=n.join();let s=i.get(r);if(!s){s={resolver:Tk(t,n),subPrefixes:n.filter(e=>!e.toLowerCase().includes("hover"))},i.set(r,s)}return s}const yS=e=>Dw(e)&&Object.getOwnPropertyNames(e).some(t=>Jw(e[t]));const _S=["top","bottom","left","right","chartArea"];function bS(e,t){return"top"===e||"bottom"===e||-1===_S.indexOf(e)&&"x"===t}function wS(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function xS(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Uw(n&&n.onComplete,[e],t)}function kS(e){const t=e.chart,n=t.options.animation;Uw(n&&n.onProgress,[e],t)}function ES(e){return Yk()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const CS={},SS=e=>{const t=ES(e);return Object.values(CS).filter(e=>e.canvas===t).pop()};function TS(e,t,n){const i=Object.keys(e);for(const r of i){const i=+r;if(i>=t){const s=e[r];delete e[r],(n>0||i>t)&&(e[i+n]=s)}}}class IS{static register(){eS.add(...arguments),PS()}static unregister(){eS.remove(...arguments),PS()}constructor(e,t){const n=this.config=new mS(t),i=ES(e),r=SS(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!Yk()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?CC:VC}(i)),this.platform.updateConfig(n);const o=this.platform.acquireContext(i,s.aspectRatio),a=o&&o.canvas,l=a&&a.height,c=a&&a.width;this.id=Nw(),this.ctx=o,this.canvas=a,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new tS,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}(e=>this.update(e),s.resizeDelay||0),this._dataChanges=[],CS[this.id]=this,o&&a?(xE.listen(this,"complete",xS),xE.listen(this,"progress",kS),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:i,_aspectRatio:r}=this;return Aw(e)?t&&r?r:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return eS}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():iE(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return rk(this.canvas,this.ctx),this}stop(){return xE.stop(this),this}resize(e,t){xE.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,e,t,r),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,iE(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),Uw(n.onResize,[this,s],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){Vw(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,i=Object.keys(n).reduce((e,t)=>(e[t]=!1,e),{});let r=[];t&&(r=r.concat(Object.keys(t).map(e=>{const n=t[e],i=aS(e,n),r="r"===i,s="x"===i;return{options:n,dposition:r?"chartArea":s?"bottom":"left",dtype:r?"radialLinear":s?"category":"linear"}}))),Vw(r,t=>{const r=t.options,s=r.id,o=aS(s,r),a=jw(r.type,t.dtype);void 0!==r.position&&bS(r.position,o)===bS(t.dposition)||(r.position=t.dposition),i[s]=!0;let l=null;if(s in n&&n[s].type===a)l=n[s];else{l=new(eS.getScale(a))({id:s,type:a,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(r,e)}),Vw(i,(e,t)=>{e||delete n[t]}),Vw(n,e=>{kC.configure(this,e,e.options),kC.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((e,t)=>e.index-t.index),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(wS("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,n)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=t.length;n<i;n++){const i=t[n];let r=this.getDatasetMeta(n);const s=i.type||this.config.type;if(r.type&&r.type!==s&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=s,r.indexAxis=i.indexAxis||rS(s,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const t=eS.getController(s),{datasetElementType:i,dataElementType:o}=ek.datasets[s];Object.assign(t,{dataElementType:eS.getElement(o),datasetElementType:i&&eS.getElement(i)}),r.controller=new t(this,n),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){Vw(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!i&&-1===r.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),i||Vw(r,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(wS("z","_idx"));const{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){Vw(this.scales,e=>{kC.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);Zw(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of t){TS(e,i,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),i=n(0);for(let r=1;r<t;r++)if(!Zw(i,n(r)))return;return Array.from(i).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;kC.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],Vw(this.boxes,e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Jw(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(xE.has(this)?this.attached&&!xE.running(this)&&xE.start(this):(this.draw(),xS({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let i,r;for(i=0,r=t.length;i<r;++i){const r=t[i];e&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},i=bE(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(i&&lk(t,i),e.controller.draw(),i&&ck(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return ak(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,i){const r=uC.modes[t];return"function"===typeof r?r(this,e,n,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let i=n.filter(e=>e&&e._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Sk(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const i=n?"show":"hide",r=this.getDatasetMeta(e),s=r.controller._resolveAnimations(void 0,i);Xw(t)?(r.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(r,{visible:n}),this.update(t=>t.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),xE.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),rk(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete CS[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};Vw(this.options.events,e=>n(e,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(n,i)=>{e[n]&&(t.removeEventListener(this,n,i),delete e[n])},r=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const o=()=>{i("attach",o),this.attached=!0,this.resize(),n("resize",r),n("detach",s)};s=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",o)},t.isAttached(this.canvas)?o():s()}unbindEvents(){Vw(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Vw(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const i=n?"set":"remove";let r,s,o,a;for("dataset"===t&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),o=0,a=e.length;o<a;++o){s=e[o];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(e=>{let{datasetIndex:t,index:n}=e;const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[n],index:n}});!zw(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,n){const i=this.options.hover,r=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),s=r(t,e),o=n?e:r(e,t);s.length&&this.updateHoverStyle(s,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:i=[],options:r}=this,s=t,o=this._getActiveElements(e,i,n,s),a=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,i){return n&&"mouseout"!==e.type?i?t:e:null}(e,this._lastEvent,n,a);n&&(this._lastEvent=null,Uw(r.onHover,[e,o,this],this),a&&Uw(r.onClick,[e,o,this],this));const c=!zw(o,i);return(c||t)&&(this._active=o,this._updateHoverStyles(o,i,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,i){if("mouseout"===e.type)return[];if(!n)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,i)}}function PS(){return Vw(IS.instances,e=>e._plugins.invalidate())}function RS(e,t,n,i){const r=bk(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-t)/2,o=Math.min(s,i*t/2),a=e=>{const t=(n-Math.min(s,e))*i/2;return xx(e,0,Math.min(s,t))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:xx(r.innerStart,0,o),innerEnd:xx(r.innerEnd,0,o)}}function NS(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function AS(e,t,n,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,h=Math.max(t.outerRadius+i+n-c,0),d=u>0?u+i+n+c:0;let f=0;const p=r-l;if(i){const e=((u>0?u-i:0)+(h>0?h-i:0))/2;f=(p-(0!==e?p*e/(e+i):p))/2}const g=(p-Math.max(.001,p*h-n/ex)/h)/2,m=l+g+f,v=r-g-f,{outerStart:y,outerEnd:_,innerStart:b,innerEnd:w}=RS(t,d,h,v-m),x=h-y,k=h-_,E=m+y/x,C=v-_/k,S=d+b,T=d+w,I=m+b/S,P=v-w/T;if(e.beginPath(),s){const t=(E+C)/2;if(e.arc(o,a,h,E,t),e.arc(o,a,h,t,C),_>0){const t=NS(k,C,o,a);e.arc(t.x,t.y,_,C,v+sx)}const n=NS(T,v,o,a);if(e.lineTo(n.x,n.y),w>0){const t=NS(T,P,o,a);e.arc(t.x,t.y,w,v+sx,P+Math.PI)}const i=(v-w/d+(m+b/d))/2;if(e.arc(o,a,d,v-w/d,i,!0),e.arc(o,a,d,i,m+b/d,!0),b>0){const t=NS(S,I,o,a);e.arc(t.x,t.y,b,I+Math.PI,m-sx)}const r=NS(x,m,o,a);if(e.lineTo(r.x,r.y),y>0){const t=NS(x,E,o,a);e.arc(t.x,t.y,y,m-sx,E)}}else{e.moveTo(o,a);const t=Math.cos(E)*h+o,n=Math.sin(E)*h+a;e.lineTo(t,n);const i=Math.cos(C)*h+o,r=Math.sin(C)*h+a;e.lineTo(i,r)}e.closePath()}function OS(e,t,n,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d,borderRadius:f}=l,p="inner"===l.borderAlign;if(!c)return;e.setLineDash(h||[]),e.lineDashOffset=d,p?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let g=t.endAngle;if(s){AS(e,t,n,i,g,r);for(let t=0;t<s;++t)e.stroke();isNaN(a)||(g=o+(a%tx||tx))}p&&function(e,t,n){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=t;let c=r/a;e.beginPath(),e.arc(s,o,a,i-c,n+c),l>r?(c=r/l,e.arc(s,o,l,n+c,i-c,!0)):e.arc(s,o,r,n+sx,i-sx),e.closePath(),e.clip()}(e,t,g),l.selfJoin&&g-o>=ex&&0===f&&"miter"!==u&&function(e,t,n){const{startAngle:i,x:r,y:s,outerRadius:o,innerRadius:a,options:l}=t,{borderWidth:c,borderJoinStyle:u}=l,h=Math.min(c/o,bx(i-n));if(e.beginPath(),e.arc(r,s,o-c/2,i+h/2,n-h/2),a>0){const t=Math.min(c/a,bx(i-n));e.arc(r,s,a+c/2,n-t/2,i+t/2,!0)}else{const t=Math.min(c/2,o*bx(i-n));if("round"===u)e.arc(r,s,t,n-ex/2,i+ex/2,!0);else if("bevel"===u){const o=2*t*t,a=-o*Math.cos(n+ex/2)+r,l=-o*Math.sin(n+ex/2)+s,c=o*Math.cos(i+ex/2)+r,u=o*Math.sin(i+ex/2)+s;e.lineTo(a,l),e.lineTo(c,u)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,g),s||(AS(e,t,n,i,g,r),e.stroke())}a(IS,"defaults",ek),a(IS,"instances",CS),a(IS,"overrides",Qx),a(IS,"registry",eS),a(IS,"version","4.5.0"),a(IS,"getChart",SS);class DS extends zC{constructor(e){super(),a(this,"circumference",void 0),a(this,"endAngle",void 0),a(this,"fullCircles",void 0),a(this,"innerRadius",void 0),a(this,"outerRadius",void 0),a(this,"pixelMargin",void 0),a(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.getProps(["x","y"],n),{angle:r,distance:s}=vx(i,{x:e,y:t}),{startAngle:o,endAngle:a,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,d=jw(u,a-o),f=wx(r,o,a)&&o!==a,p=d>=tx||f,g=kx(s,l+h,c+h);return p&&g}getCenterPoint(e){const{x:t,y:n,startAngle:i,endAngle:r,innerRadius:s,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:a,spacing:l}=this.options,c=(i+r)/2,u=(s+o+l+a)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,i=(t.offset||0)/4,r=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>tx?Math.floor(n/tx):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*i,Math.sin(o)*i);const a=i*(1-Math.sin(Math.min(ex,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,i,r){const{fullCircles:s,startAngle:o,circumference:a}=t;let l=t.endAngle;if(s){AS(e,t,n,i,l,r);for(let t=0;t<s;++t)e.fill();isNaN(a)||(l=o+(a%tx||tx))}AS(e,t,n,i,l,r),e.fill()}(e,this,a,r,s),OS(e,this,a,r,s),e.restore()}}function MS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=jw(n.borderCapStyle,t.borderCapStyle),e.setLineDash(jw(n.borderDash,t.borderDash)),e.lineDashOffset=jw(n.borderDashOffset,t.borderDashOffset),e.lineJoin=jw(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=jw(n.borderWidth,t.borderWidth),e.strokeStyle=jw(n.borderColor,t.borderColor)}function LS(e,t,n){e.lineTo(n.x,n.y)}function jS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=t,l=Math.max(r,o),c=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:t.loop,ilen:c<l&&!u?i+c-l:c-l}}function FS(e,t,n,i){const{points:r,options:s}=t,{count:o,start:a,loop:l,ilen:c}=jS(r,n,i),u=function(e){return e.stepped?uk:e.tension||"monotone"===e.cubicInterpolationMode?hk:LS}(s);let h,d,f,{move:p=!0,reverse:g}=i||{};for(h=0;h<=c;++h)d=r[(a+(g?c-h:h))%o],d.skip||(p?(e.moveTo(d.x,d.y),p=!1):u(e,f,d,g,s.stepped),f=d);return l&&(d=r[(a+(g?c:0))%o],u(e,f,d,g,s.stepped)),!!l}function US(e,t,n,i){const r=t.points,{count:s,start:o,ilen:a}=jS(r,n,i),{move:l=!0,reverse:c}=i||{};let u,h,d,f,p,g,m=0,v=0;const y=e=>(o+(c?a-e:e))%s,_=()=>{f!==p&&(e.lineTo(m,p),e.lineTo(m,f),e.lineTo(m,g))};for(l&&(h=r[y(0)],e.moveTo(h.x,h.y)),u=0;u<=a;++u){if(h=r[y(u)],h.skip)continue;const t=h.x,n=h.y,i=0|t;i===d?(n<f?f=n:n>p&&(p=n),m=(v*m+t)/++v):(_(),e.lineTo(t,n),d=i,v=0,f=p=n),g=n}_()}function VS(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?US:FS}a(DS,"id","arc"),a(DS,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),a(DS,"defaultRoutes",{backgroundColor:"backgroundColor"}),a(DS,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const zS="function"===typeof Path2D;function BS(e,t,n,i){zS&&!t.options.segment?function(e,t,n,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,i)&&r.closePath()),MS(e,t.options),e.stroke(r)}(e,t,n,i):function(e,t,n,i){const{segments:r,options:s}=t,o=VS(t);for(const a of r)MS(e,s,a.style),e.beginPath(),o(e,t,a,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}(e,t,n,i)}class WS extends zC{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;Gk(this._points,n,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,i=e.options.spanGaps,r=n.length;if(!r)return[];const s=!!e._loop,{start:o,end:a}=function(e,t,n,i){let r=0,s=t-1;if(n&&!i)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(s+=r);s>r&&e[s%t].skip;)s--;return s%=t,{start:r,end:s}}(n,r,s,i);return mE(e,!0===i?[{start:o,end:a,loop:s}]:function(e,t,n,i){const r=e.length,s=[];let o,a=t,l=e[t];for(o=t+1;o<=n;++o){const n=e[o%r];n.skip||n.stop?l.skip||(i=!1,s.push({start:t%r,end:(o-1)%r,loop:i}),t=a=n.stop?o:null):(a=o,l.skip&&(t=o)),l=n}return null!==a&&s.push({start:t%r,end:a%r,loop:i}),s}(n,o,a<o?a+r:a,!!e._fullLoop&&0===o&&a===r-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,i=e[t],r=this.points,s=gE(this,{property:t,start:i,end:i});if(!s.length)return;const o=[],a=function(e){return e.stepped?aE:e.tension||"monotone"===e.cubicInterpolationMode?lE:oE}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:u}=s[l],h=r[c],d=r[u];if(h===d){o.push(h);continue}const f=a(h,d,Math.abs((i-h[t])/(d[t]-h[t])),n.stepped);f[t]=e[t],o.push(f)}return 1===o.length?o[0]:o}pathSegment(e,t,n){return VS(this)(e,this,t,n)}path(e,t,n){const i=this.segments,r=VS(this);let s=this._loop;t=t||0,n=n||this.points.length-t;for(const o of i)s&=r(e,this,o,{start:t,end:t+n-1});return!!s}draw(e,t,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),BS(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function HS(e,t,n,i){const r=e.options,{[n]:s}=e.getProps([n],i);return Math.abs(t-s)<r.radius+r.hitRadius}a(WS,"id","line"),a(WS,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),a(WS,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),a(WS,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class qS extends zC{constructor(e){super(),a(this,"parsed",void 0),a(this,"skip",void 0),a(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.options,{x:r,y:s}=this.getProps(["x","y"],n);return Math.pow(e-r,2)+Math.pow(t-s,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return HS(this,e,"x",t)}inYRange(e,t){return HS(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!ak(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,sk(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function KS(e,t){const{x:n,y:i,base:r,width:s,height:o}=e.getProps(["x","y","base","width","height"],t);let a,l,c,u,h;return e.horizontal?(h=o/2,a=Math.min(n,r),l=Math.max(n,r),c=i-h,u=i+h):(h=s/2,a=n-h,l=n+h,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function GS(e,t,n,i){return e?0:xx(t,n,i)}function YS(e){const t=KS(e),n=t.right-t.left,i=t.bottom-t.top,r=function(e,t,n){const i=e.options.borderWidth,r=e.borderSkipped,s=wk(i);return{t:GS(r.top,s.top,0,n),r:GS(r.right,s.right,0,t),b:GS(r.bottom,s.bottom,0,n),l:GS(r.left,s.left,0,t)}}(e,n/2,i/2),s=function(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,s=xk(r),o=Math.min(t,n),a=e.borderSkipped,l=i||Dw(r);return{topLeft:GS(!l||a.top||a.left,s.topLeft,0,o),topRight:GS(!l||a.top||a.right,s.topRight,0,o),bottomLeft:GS(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:GS(!l||a.bottom||a.right,s.bottomRight,0,o)}}(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function QS(e,t,n,i){const r=null===t,s=null===n,o=e&&!(r&&s)&&KS(e,i);return o&&(r||kx(t,o.left,o.right))&&(s||kx(n,o.top,o.bottom))}function $S(e,t){e.rect(t.x,t.y,t.w,t.h)}function XS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-i,o=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+i,y:e.y+r,w:e.w+s,h:e.h+o,radius:e.radius}}a(qS,"id","point"),a(qS,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),a(qS,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class JS extends zC{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:s}=YS(this),o=(a=s.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?gk:$S;var a;e.save(),s.w===r.w&&s.h===r.h||(e.beginPath(),o(e,XS(s,t,r)),e.clip(),o(e,XS(r,-t,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),o(e,XS(r,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,n){return QS(this,e,t,n)}inXRange(e,t){return QS(this,e,null,t)}inYRange(e,t){return QS(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+i)/2:t,y:r?n:(n+i)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}a(JS,"id","bar"),a(JS,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),a(JS,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});new WeakMap;const ZS={average(e){if(!e.length)return!1;let t,n,i=new Set,r=0,s=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();i.add(e.x),r+=e.y,++s}}if(0===s||0===i.size)return!1;return{x:[...i].reduce((e,t)=>e+t)/i.size,y:r/s}},nearest(e,t){if(!e.length)return!1;let n,i,r,s=t.x,o=t.y,a=Number.POSITIVE_INFINITY;for(n=0,i=e.length;n<i;++n){const i=e[n].element;if(i&&i.hasValue()){const e=yx(t,i.getCenterPoint());e<a&&(a=e,r=i)}}if(r){const e=r.tooltipPosition();s=e.x,o=e.y}return{x:s,y:o}}};function eT(e,t){return t&&(Ow(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function tT(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function nT(e,t){const{element:n,datasetIndex:i,index:r}=t,s=e.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:e,label:o,parsed:s.getParsed(r),raw:e.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function iT(e,t){const n=e.chart.ctx,{body:i,footer:r,title:s}=e,{boxWidth:o,boxHeight:a}=t,l=Ek(t.bodyFont),c=Ek(t.titleFont),u=Ek(t.footerFont),h=s.length,d=r.length,f=i.length,p=kk(t.padding);let g=p.height,m=0,v=i.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(v+=e.beforeBody.length+e.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),v){g+=f*(t.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(v-f)*l.lineHeight+(v-1)*t.bodySpacing}d&&(g+=t.footerMarginTop+d*u.lineHeight+(d-1)*t.footerSpacing);let y=0;const _=function(e){m=Math.max(m,n.measureText(e).width+y)};return n.save(),n.font=c.string,Vw(e.title,_),n.font=l.string,Vw(e.beforeBody.concat(e.afterBody),_),y=t.displayColors?o+2+t.boxPadding:0,Vw(i,e=>{Vw(e.before,_),Vw(e.lines,_),Vw(e.after,_)}),y=0,n.font=u.string,Vw(e.footer,_),n.restore(),m+=p.width,{width:m,height:g}}function rT(e,t,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return"center"===i?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),function(e,t,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;return"left"===e&&r+s+o>t.width||"right"===e&&r-s-o<0||void 0}(c,e,t,n)&&(c="center"),c}function sT(e,t,n){const i=n.yAlign||t.yAlign||function(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||rT(e,t,n,i),yAlign:i}}function oT(e,t,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=xk(o);let p=function(e,t){let{x:n,width:i}=e;return"right"===t?n-=i:"center"===t&&(n-=i/2),n}(t,a);const g=function(e,t,n){let{y:i,height:r}=e;return"top"===t?i+=n:i-="bottom"===t?r+n:r/2,i}(t,l,c);return"center"===l?"left"===a?p+=c:"right"===a&&(p-=c):"left"===a?p-=Math.max(u,d)+r:"right"===a&&(p+=Math.max(h,f)+r),{x:xx(p,0,i.width-t.width),y:xx(g,0,i.height-t.height)}}function aT(e,t,n){const i=kk(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-i.right:e.x+i.left}function lT(e){return eT([],tT(e))}function cT(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const uT={beforeTitle:Rw,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:Rw,beforeBody:Rw,beforeLabel:Rw,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Aw(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Rw,afterBody:Rw,beforeFooter:Rw,footer:Rw,afterFooter:Rw};function hT(e,t,n,i){const r=e[t].call(n,i);return"undefined"===typeof r?uT[t].call(n,i):r}class dT extends zC{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&t.options.animation&&n.animations,r=new SE(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,Sk(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,i=hT(n,"beforeTitle",this,e),r=hT(n,"title",this,e),s=hT(n,"afterTitle",this,e);let o=[];return o=eT(o,tT(i)),o=eT(o,tT(r)),o=eT(o,tT(s)),o}getBeforeBody(e,t){return lT(hT(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,i=[];return Vw(e,e=>{const t={before:[],lines:[],after:[]},r=cT(n,e);eT(t.before,tT(hT(r,"beforeLabel",this,e))),eT(t.lines,hT(r,"label",this,e)),eT(t.after,tT(hT(r,"afterLabel",this,e))),i.push(t)}),i}getAfterBody(e,t){return lT(hT(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,i=hT(n,"beforeFooter",this,e),r=hT(n,"footer",this,e),s=hT(n,"afterFooter",this,e);let o=[];return o=eT(o,tT(i)),o=eT(o,tT(r)),o=eT(o,tT(s)),o}_createItems(e){const t=this._active,n=this.chart.data,i=[],r=[],s=[];let o,a,l=[];for(o=0,a=t.length;o<a;++o)l.push(nT(this.chart,t[o]));return e.filter&&(l=l.filter((t,i,r)=>e.filter(t,i,r,n))),e.itemSort&&(l=l.sort((t,i)=>e.itemSort(t,i,n))),Vw(l,t=>{const n=cT(e.callbacks,t);i.push(hT(n,"labelColor",this,t)),r.push(hT(n,"labelPointStyle",this,t)),s.push(hT(n,"labelTextColor",this,t))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),i=this._active;let r,s=[];if(i.length){const e=ZS[n.position].call(this,i,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const t=this._size=iT(this,n),o=Object.assign({},e,t),a=sT(this.chart,n,o),l=oT(n,o,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,r={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=s,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,i){const r=this.getCaretPosition(e,n,i);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,n){const{xAlign:i,yAlign:r}=this,{caretSize:s,cornerRadius:o}=n,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:u}=xk(o),{x:h,y:d}=e,{width:f,height:p}=t;let g,m,v,y,_,b;return"center"===r?(_=d+p/2,"left"===i?(g=h,m=g-s,y=_+s,b=_-s):(g=h+f,m=g+s,y=_-s,b=_+s),v=g):(m="left"===i?h+Math.max(a,c)+s:"right"===i?h+f-Math.max(l,u)-s:this.caretX,"top"===r?(y=d,_=y-s,g=m-s,v=m+s):(y=d+p,_=y+s,g=m+s,v=m-s),b=y),{x1:g,x2:m,x3:v,y1:y,y2:_,y3:b}}drawTitle(e,t,n){const i=this.title,r=i.length;let s,o,a;if(r){const l=cE(n.rtl,this.x,this.width);for(e.x=aT(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",s=Ek(n.titleFont),o=n.titleSpacing,t.fillStyle=n.titleColor,t.font=s.string,a=0;a<r;++a)t.fillText(i[a],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+o,a+1===r&&(e.y+=n.titleMarginBottom-o)}}_drawColorBox(e,t,n,i,r){const s=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:a,boxWidth:l}=r,c=Ek(r.bodyFont),u=aT(this,"left",r),h=i.x(u),d=a<c.lineHeight?(c.lineHeight-a)/2:0,f=t.y+d;if(r.usePointStyle){const t={radius:Math.min(l,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},n=i.leftForLtr(h,l)+l/2,c=f+a/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,sk(e,t,n,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,sk(e,t,n,c)}else{e.lineWidth=Dw(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=i.leftForLtr(h,l),n=i.leftForLtr(i.xPlus(h,1),l-2),o=xk(s.borderRadius);Object.values(o).some(e=>0!==e)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,gk(e,{x:t,y:f,w:l,h:a,radius:o}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),gk(e,{x:n,y:f+1,w:l-2,h:a-2,radius:o}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(t,f,l,a),e.strokeRect(t,f,l,a),e.fillStyle=s.backgroundColor,e.fillRect(n,f+1,l-2,a-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:i}=this,{bodySpacing:r,bodyAlign:s,displayColors:o,boxHeight:a,boxWidth:l,boxPadding:c}=n,u=Ek(n.bodyFont);let h=u.lineHeight,d=0;const f=cE(n.rtl,this.x,this.width),p=function(n){t.fillText(n,f.x(e.x+d),e.y+h/2),e.y+=h+r},g=f.textAlign(s);let m,v,y,_,b,w,x;for(t.textAlign=s,t.textBaseline="middle",t.font=u.string,e.x=aT(this,g,n),t.fillStyle=n.bodyColor,Vw(this.beforeBody,p),d=o&&"right"!==g?"center"===s?l/2+c:l+2+c:0,_=0,w=i.length;_<w;++_){for(m=i[_],v=this.labelTextColors[_],t.fillStyle=v,Vw(m.before,p),y=m.lines,o&&y.length&&(this._drawColorBox(t,e,_,f,n),h=Math.max(u.lineHeight,a)),b=0,x=y.length;b<x;++b)p(y[b]),h=u.lineHeight;Vw(m.after,p)}d=0,h=u.lineHeight,Vw(this.afterBody,p),e.y-=r}drawFooter(e,t,n){const i=this.footer,r=i.length;let s,o;if(r){const a=cE(n.rtl,this.x,this.width);for(e.x=aT(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=a.textAlign(n.footerAlign),t.textBaseline="middle",s=Ek(n.footerFont),t.fillStyle=n.footerColor,t.font=s.string,o=0;o<r;++o)t.fillText(i[o],a.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,t,n,i){const{xAlign:r,yAlign:s}=this,{x:o,y:a}=e,{width:l,height:c}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=xk(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(o+u,a),"top"===s&&this.drawCaret(e,t,n,i),t.lineTo(o+l-h,a),t.quadraticCurveTo(o+l,a,o+l,a+h),"center"===s&&"right"===r&&this.drawCaret(e,t,n,i),t.lineTo(o+l,a+c-f),t.quadraticCurveTo(o+l,a+c,o+l-f,a+c),"bottom"===s&&this.drawCaret(e,t,n,i),t.lineTo(o+d,a+c),t.quadraticCurveTo(o,a+c,o,a+c-d),"center"===s&&"left"===r&&this.drawCaret(e,t,n,i),t.lineTo(o,a+u),t.quadraticCurveTo(o,a,o+u,a),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=ZS[e.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=iT(this,e),o=Object.assign({},n,this._size),a=sT(t,e,o),l=oT(e,o,a,t);i._to===l.x&&r._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=kk(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(r,e,i,t),uE(e,t.textDirection),r.y+=s.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),hE(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,i=e.map(e=>{let{datasetIndex:t,index:n}=e;const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[n],index:n}}),r=!zw(n,i),s=this._positionChanged(i,t);(r||s)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],s=this._getActiveElements(e,r,t,n),o=this._positionChanged(s,e),a=t||!zw(s,r)||o;return a&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),a}_getActiveElements(e,t,n,i){const r=this.options;if("mouseout"===e.type)return[];if(!i)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const s=this.chart.getElementsAtEventForMode(e,r.mode,r,n);return r.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:n,caretY:i,options:r}=this,s=ZS[r.position].call(this,e,t);return!1!==s&&(n!==s.x||i!==s.y)}}a(dT,"positioners",ZS);function fT(e,t,n,i){const r=e.indexOf(t);if(-1===r)return((e,t,n,i)=>("string"===typeof t?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,i);return r!==e.lastIndexOf(t)?n:r}function pT(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class gT extends XC{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:i}of t)e[n]===i&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Aw(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:xx(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:fT(n,e,jw(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=0===e&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=t;s++)i.push({value:s});return i}getLabelForValue(e){return pT.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function mT(e,t){const n=[],{bounds:i,step:r,min:s,max:o,precision:a,count:l,maxTicks:c,maxDigits:u,includeBounds:h}=e,d=r||1,f=c-1,{min:p,max:g}=t,m=!Aw(s),v=!Aw(o),y=!Aw(l),_=(g-p)/(u+1);let b,w,x,k,E=hx((g-p)/f/d)*d;if(E<1e-14&&!m&&!v)return[{value:p},{value:g}];k=Math.ceil(g/E)-Math.floor(p/E),k>f&&(E=hx(k*E/f/d)*d),Aw(a)||(b=Math.pow(10,a),E=Math.ceil(E*b)/b),"ticks"===i?(w=Math.floor(p/E)*E,x=Math.ceil(g/E)*E):(w=p,x=g),m&&v&&r&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((o-s)/r,E/1e3)?(k=Math.round(Math.min((o-s)/E,c)),E=(o-s)/k,w=s,x=o):y?(w=m?s:w,x=v?o:x,k=l-1,E=(x-w)/k):(k=(x-w)/E,k=ux(k,Math.round(k),E/1e3)?Math.round(k):Math.ceil(k));const C=Math.max(mx(E),mx(w));b=Math.pow(10,Aw(a)?C:a),w=Math.round(w*b)/b,x=Math.round(x*b)/b;let S=0;for(m&&(h&&w!==s?(n.push({value:s}),w<s&&S++,ux(Math.round((w+S*E)*b)/b,s,vT(s,_,e))&&S++):w<s&&S++);S<k;++S){const e=Math.round((w+S*E)*b)/b;if(v&&e>o)break;n.push({value:e})}return v&&h&&x!==o?n.length&&ux(n[n.length-1].value,o,vT(o,_,e))?n[n.length-1].value=o:n.push({value:o}):v&&x!==o||n.push({value:x}),n}function vT(e,t,n){let{horizontal:i,minRotation:r}=n;const s=px(r),o=(i?Math.sin(s):Math.cos(s))||.001,a=.75*t*(""+e).length;return Math.min(t/o,a)}a(gT,"id","category"),a(gT,"defaults",{ticks:{callback:pT}});class yT extends XC{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Aw(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const s=e=>i=t?i:e,o=e=>r=n?r:e;if(e){const e=cx(i),t=cx(r);e<0&&t<0?o(0):e>0&&t>0&&s(0)}if(i===r){let t=0===r?1:Math.abs(.05*r);o(r+t),e||s(i-t)}this.min=i,this.max=r}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:i}=e;return i?(t=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(i," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=mT({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&fx(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-t)/Math.max(e.length-1,1)/2;t-=i,n+=i}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return Kx(e,this.chart.options.locale,this.options.ticks.format)}}class _T extends yT{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Mw(e)?e:0,this.max=Mw(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=px(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/i))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}a(_T,"id","linear"),a(_T,"defaults",{ticks:{callback:Yx.formatters.numeric}});const bT=e=>Math.floor(lx(e)),wT=(e,t)=>Math.pow(10,bT(e)+t);function xT(e){return 1===e/Math.pow(10,bT(e))}function kT(e,t,n){const i=Math.pow(10,n),r=Math.floor(e/i);return Math.ceil(t/i)-r}function ET(e,t){let{min:n,max:i}=t;n=Lw(e.min,n);const r=[],s=bT(n);let o=function(e,t){let n=bT(t-e);for(;kT(e,t,n)>10;)n++;for(;kT(e,t,n)<10;)n--;return Math.min(n,bT(e))}(n,i),a=o<0?Math.pow(10,Math.abs(o)):1;const l=Math.pow(10,o),c=s>o?Math.pow(10,s):0,u=Math.round((n-c)*a)/a,h=Math.floor((n-c)/l/10)*l*10;let d=Math.floor((u-h)/Math.pow(10,o)),f=Lw(e.min,Math.round((c+h+d*Math.pow(10,o))*a)/a);for(;f<i;)r.push({value:f,major:xT(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(o++,d=2,a=o>=0?1:a),f=Math.round((c+h+d*Math.pow(10,o))*a)/a;const p=Lw(e.max,f);return r.push({value:p,major:xT(p),significand:d}),r}class CT extends XC{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=yT.prototype.parse.apply(this,[e,t]);if(0!==n)return Mw(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Mw(e)?Math.max(0,e):null,this.max=Mw(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Mw(this._userMin)&&(this.min=e===wT(this.min,0)?wT(this.min,-1):wT(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,i=this.max;const r=t=>n=e?n:t,s=e=>i=t?i:e;n===i&&(n<=0?(r(1),s(10)):(r(wT(n,-1)),s(wT(i,1)))),n<=0&&r(wT(i,-1)),i<=0&&s(wT(n,1)),this.min=n,this.max=i}buildTicks(){const e=this.options,t=ET({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&fx(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":Kx(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=lx(e),this._valueRange=lx(this.max)-lx(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(lx(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function ST(e){const t=e.ticks;if(t.display&&e.display){const e=kk(t.backdropPadding);return jw(t.font&&t.font.size,ek.font.size)+e.height}return 0}function TT(e,t,n){return n=Ow(n)?n:[n],{w:nk(e,t.string,n),h:n.length*t.lineHeight}}function IT(e,t,n,i,r){return e===i||e===r?{start:t-n/2,end:t+n/2}:e<i||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function PT(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),i=[],r=[],s=e._pointLabels.length,o=e.options.pointLabels,a=o.centerPointLabels?ex/s:0;for(let l=0;l<s;l++){const s=o.setContext(e.getPointLabelContext(l));r[l]=s.padding;const c=e.getPointPosition(l,e.drawingArea+r[l],a),u=Ek(s.font),h=TT(e.ctx,u,e._pointLabels[l]);i[l]=h;const d=bx(e.getIndexAngle(l)+a),f=Math.round(gx(d));RT(n,t,d,IT(f,c.x,h.w,0,180),IT(f,c.y,h.h,90,270))}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const i=[],r=e._pointLabels.length,s=e.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:ST(s)/2,additionalAngle:o?ex/r:0};let c;for(let u=0;u<r;u++){l.padding=n[u],l.size=t[u];const r=NT(e,u,l);i.push(r),"auto"===a&&(r.visible=AT(r,c),r.visible&&(c=r))}return i}(e,i,r)}function RT(e,t,n,i,r){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<t.l?(a=(t.l-i.start)/s,e.l=Math.min(e.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/s,e.r=Math.max(e.r,t.r+a)),r.start<t.t?(l=(t.t-r.start)/o,e.t=Math.min(e.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/o,e.b=Math.max(e.b,t.b+l))}function NT(e,t,n){const i=e.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=n,l=e.getPointPosition(t,i+r+o,s),c=Math.round(gx(bx(l.angle+sx))),u=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,a.h,c),h=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),d=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function AT(e,t){if(!t)return!0;const{left:n,top:i,right:r,bottom:s}=e;return!(ak({x:n,y:i},t)||ak({x:n,y:s},t)||ak({x:r,y:i},t)||ak({x:r,y:s},t))}function OT(e,t,n){const{left:i,top:r,right:s,bottom:o}=n,{backdropColor:a}=t;if(!Aw(a)){const n=xk(t.borderRadius),l=kk(t.backdropPadding);e.fillStyle=a;const c=i-l.left,u=r-l.top,h=s-i+l.width,d=o-r+l.height;Object.values(n).some(e=>0!==e)?(e.beginPath(),gk(e,{x:c,y:u,w:h,h:d,radius:n}),e.fill()):e.fillRect(c,u,h,d)}}function DT(e,t,n,i){const{ctx:r}=e;if(n)r.arc(e.xCenter,e.yCenter,t,0,tx);else{let n=e.getPointPosition(0,t);r.moveTo(n.x,n.y);for(let s=1;s<i;s++)n=e.getPointPosition(s,t),r.lineTo(n.x,n.y)}}a(CT,"id","logarithmic"),a(CT,"defaults",{ticks:{callback:Yx.formatters.logarithmic,major:{enabled:!0}}});class MT extends yT{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=kk(ST(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Mw(e)&&!isNaN(e)?e:0,this.max=Mw(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ST(this.options))}generateTickLabels(e){yT.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const n=Uw(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?PT(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,i))}getIndexAngle(e){return bx(e*(tx/(this._pointLabels.length||1))+px(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(Aw(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Aw(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return Sk(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=this.getIndexAngle(e)-sx+n;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:i,bottom:r}=this._pointLabelItems[e];return{left:t,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),DT(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:i,border:r}=t,s=this._pointLabels.length;let o,a,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:i}}=e;for(let r=t-1;r>=0;r--){const t=e._pointLabelItems[r];if(!t.visible)continue;const s=i.setContext(e.getPointLabelContext(r));OT(n,s,t);const o=Ek(s.font),{x:a,y:l,textAlign:c}=t;pk(n,e._pointLabels[r],a,l+o.lineHeight/2,o,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),i.display&&this.ticks.forEach((e,t)=>{if(0!==t||0===t&&this.min<0){a=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),o=i.setContext(n),l=r.setContext(n);!function(e,t,n,i,r){const s=e.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!i||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),DT(e,n,o,i),s.closePath(),s.stroke(),s.restore())}(this,o,a,s,l)}}),n.display){for(e.save(),o=s-1;o>=0;o--){const i=n.setContext(this.getPointLabelContext(o)),{color:r,lineWidth:s}=i;s&&r&&(e.lineWidth=s,e.strokeStyle=r,e.setLineDash(i.borderDash),e.lineDashOffset=i.borderDashOffset,a=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(o,a),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((i,o)=>{if(0===o&&this.min>=0&&!t.reverse)return;const a=n.setContext(this.getContext(o)),l=Ek(a.font);if(r=this.getDistanceFromCenterForValue(this.ticks[o].value),a.showLabelBackdrop){e.font=l.string,s=e.measureText(i.label).width,e.fillStyle=a.backdropColor;const t=kk(a.backdropPadding);e.fillRect(-s/2-t.left,-r-l.size/2-t.top,s+t.width,l.size+t.height)}pk(e,i.label,0,-r,l,{color:a.color,strokeColor:a.textStrokeColor,strokeWidth:a.textStrokeWidth})}),e.restore()}drawTitle(){}}a(MT,"id","radialLinear"),a(MT,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Yx.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),a(MT,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),a(MT,"descriptors",{angleLines:{_fallback:"grid"}});const LT={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},jT=Object.keys(LT);function FT(e,t){return e-t}function UT(e,t){if(Aw(t))return null;const n=e._adapter,{parser:i,round:r,isoWeekday:s}=e._parseOpts;let o=t;return"function"===typeof i&&(o=i(o)),Mw(o)||(o="string"===typeof i?n.parse(o,i):n.parse(o)),null===o?null:(r&&(o="week"!==r||!dx(s)&&!0!==s?n.startOf(o,r):n.startOf(o,"isoWeek",s)),+o)}function VT(e,t,n,i){const r=jT.length;for(let s=jT.indexOf(e);s<r-1;++s){const e=LT[jT[s]],r=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(r*e.size))<=i)return jT[s]}return jT[r-1]}function zT(e,t,n){if(n){if(n.length){const{lo:i,hi:r}=Ex(n,t);e[n[i]>=t?n[i]:n[r]]=!0}}else e[t]=!0}function BT(e,t,n){const i=[],r={},s=t.length;let o,a;for(o=0;o<s;++o)a=t[o],r[a]=o,i.push({value:a,major:!1});return 0!==s&&n?function(e,t,n,i){const r=e._adapter,s=+r.startOf(t[0].value,i),o=t[t.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(t[l].major=!0);return t}(e,i,r,n):i}class WT extends XC{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),i=this._adapter=new iC(e.adapters.date);i.init(t),Kw(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:UT(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:i,max:r,minDefined:s,maxDefined:o}=this.getUserBounds();function a(e){s||isNaN(e.min)||(i=Math.min(i,e.min)),o||isNaN(e.max)||(r=Math.max(r,e.max))}s&&o||(a(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||a(this.getMinMax(!1))),i=Mw(i)&&!isNaN(i)?i:+t.startOf(Date.now(),n),r=Mw(r)&&!isNaN(r)?r:+t.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,s=function(e,t,n){let i=0,r=e.length;for(;i<r&&e[i]<t;)i++;for(;r>i&&e[r-1]>n;)r--;return i>0||r<e.length?e.slice(i,r):e}(i,r,this.max);return this._unit=t.unit||(n.autoSkip?VT(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(e,t,n,i,r){for(let s=jT.length-1;s>=jT.indexOf(n);s--){const n=jT[s];if(LT[n].common&&e._adapter.diff(r,i,n)>=t-1)return n}return jT[n?jT.indexOf(n):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=jT.indexOf(e)+1,n=jT.length;t<n;++t)if(LT[jT[t]].common)return jT[t]}(this._unit):void 0,this.initOffsets(i),e.reverse&&s.reverse(),BT(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=0,r=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),i=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),r=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;i=xx(i,0,s),r=xx(r,0,s),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const e=this._adapter,t=this.min,n=this.max,i=this.options,r=i.time,s=r.unit||VT(r.minUnit,t,n,this._getLabelCapacity(t)),o=jw(i.ticks.stepSize,1),a="week"===s&&r.isoWeekday,l=dx(a)||!0===a,c={};let u,h,d=t;if(l&&(d=+e.startOf(d,"isoWeek",a)),d=+e.startOf(d,l?"day":s),e.diff(n,t,s)>1e5*o)throw new Error(t+" and "+n+" are too far apart with stepSize of "+o+" "+s);const f="data"===i.ticks.source&&this.getDataTimestamps();for(u=d,h=0;u<n;u=+e.add(u,o,s),h++)zT(c,u,f);return u!==n&&"ticks"!==i.bounds&&1!==h||zT(c,u,f),Object.keys(c).sort(FT).map(e=>+e)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,i=this._unit,r=t||n[i];return this._adapter.format(e,r)}_tickFormatFunction(e,t,n,i){const r=this.options,s=r.ticks.callback;if(s)return Uw(s,[e,t,n],this);const o=r.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&o[a],u=l&&o[l],h=n[t],d=l&&u&&h&&h.major;return this._adapter.format(e,i||(d?u:c))}generateTickLabels(e){let t,n,i;for(t=0,n=e.length;t<n;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,i=px(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(i),s=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:n*r+o*s,h:n*s+o*r}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,i=n[t.unit]||n.millisecond,r=this._tickFormatFunction(e,0,BT(this,[e],this._majorUnit),i),s=this._getLabelSize(r),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,t=i.length;e<t;++e)n=n.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const i=this.getLabels();for(t=0,n=i.length;t<n;++t)e.push(UT(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Px(e.sort(FT))}}function HT(e,t,n){let i,r,s,o,a=0,l=e.length-1;n?(t>=e[a].pos&&t<=e[l].pos&&({lo:a,hi:l}=Cx(e,"pos",t)),({pos:i,time:s}=e[a]),({pos:r,time:o}=e[l])):(t>=e[a].time&&t<=e[l].time&&({lo:a,hi:l}=Cx(e,"time",t)),({time:i,pos:s}=e[a]),({time:r,pos:o}=e[l]));const c=r-i;return c?s+(o-s)*(t-i)/c:s}a(WT,"id","time"),a(WT,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class qT extends WT{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=HT(t,this.min),this._tableRange=HT(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,i=[],r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;++s)l=e[s],l>=t&&l<=n&&i.push(l);if(i.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(s=0,o=i.length;s<o;++s)c=i[s+1],a=i[s-1],l=i[s],Math.round((c+a)/2)!==l&&r.push({time:l,pos:s/(o-1)});return r}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(HT(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return HT(this._table,n*this._tableRange+this._minPos,!0)}}a(qT,"id","timeseries"),a(qT,"defaults",WT.defaults);const KT=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],GT="label";function YT(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function QT(e,t){e.labels=t}function $T(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:GT;const i=[];e.datasets=t.map(t=>{const r=e.datasets.find(e=>e[n]===t[n]);return r&&t.data&&!i.includes(r)?(i.push(r),Object.assign(r,t),r):c({},t)})}function XT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:GT;const n={labels:[],datasets:[]};return QT(n,e.labels),$T(n,e.datasets,t),n}function JT(e,n){const{height:i=150,width:r=300,redraw:s=!1,datasetIdKey:o,type:a,data:l,options:u,plugins:h=[],fallbackContent:d,updateMode:f}=e,p=Tb(e,KT),g=(0,t.useRef)(null),m=(0,t.useRef)(null),v=()=>{g.current&&(m.current=new IS(g.current,{type:a,data:XT(l,o),options:u&&c({},u),plugins:h}),YT(n,m.current))},y=()=>{YT(n,null),m.current&&(m.current.destroy(),m.current=null)};return(0,t.useEffect)(()=>{!s&&m.current&&u&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(m.current,u)},[s,u]),(0,t.useEffect)(()=>{!s&&m.current&&QT(m.current.config.data,l.labels)},[s,l.labels]),(0,t.useEffect)(()=>{!s&&m.current&&l.datasets&&$T(m.current.config.data,l.datasets,o)},[s,l.datasets]),(0,t.useEffect)(()=>{m.current&&(s?(y(),setTimeout(v)):m.current.update(f))},[s,u,l.labels,l.datasets,f]),(0,t.useEffect)(()=>{m.current&&(y(),setTimeout(v))},[a]),(0,t.useEffect)(()=>(v(),()=>y()),[]),t.createElement("canvas",c({ref:g,role:"img",height:i,width:r},p),d)}const ZT=(0,t.forwardRef)(JT);function eI(e,n){return IS.register(n),(0,t.forwardRef)((n,i)=>t.createElement(ZT,c(c({},n),{},{ref:i,type:e})))}const tI=eI("bar",GE),nI=eI("pie",JE),iI=e=>{let{barData:t,pieData:n}=e;const i=t&&t.labels&&t.datasets,r=n&&n.labels&&n.datasets;return(0,ke.jsxs)("div",{className:"analytics-section",children:[(0,ke.jsx)("h1",{children:"Analytics"}),(0,ke.jsx)("div",{className:"chart-container",children:i?(0,ke.jsx)(tI,{data:t,options:{responsive:!0}}):(0,ke.jsx)("p",{children:"No bar chart data available."})}),(0,ke.jsx)("div",{className:"chart-container",children:r?(0,ke.jsx)(nI,{data:n,options:{responsive:!0}}):(0,ke.jsx)("p",{children:"No pie chart data available."})})]})},rI=e=>{let{paginatedLogs:t=[],logs:n=[],pageSize:i=5,logPage:r=1,setLogPage:s=()=>{},endLogIndex:o=0}=e;return(0,ke.jsxs)("div",{className:"log-table",children:[(0,ke.jsx)("h2",{children:"Action Logs"}),(0,ke.jsxs)("table",{children:[(0,ke.jsx)("thead",{children:(0,ke.jsxs)("tr",{children:[(0,ke.jsx)("th",{children:"Time"}),(0,ke.jsx)("th",{children:"Message"})]})}),(0,ke.jsx)("tbody",{children:0===t.length?(0,ke.jsx)("tr",{children:(0,ke.jsx)("td",{colSpan:"2",children:"No logs to display."})}):t.map((e,t)=>(0,ke.jsxs)("tr",{children:[(0,ke.jsx)("td",{children:e.timestamp}),(0,ke.jsx)("td",{children:e.message})]},t))})]}),n.length>i&&(0,ke.jsxs)("div",{className:"pagination-controls",children:[(0,ke.jsx)("button",{disabled:1===r,onClick:()=>s(e=>e-1),children:"Previous"}),(0,ke.jsxs)("span",{children:["Page ",r," of ",Math.ceil(n.length/i)]}),(0,ke.jsx)("button",{disabled:o>=n.length,onClick:()=>s(e=>e+1),children:"Next"})]})]})},sI=e=>{let{showRejectModal:t,rejectionReason:n,setRejectionReason:i,handleRejectSubmit:r,closeRejectModal:s}=e;return t?(0,ke.jsx)("div",{className:"modal-overlay",children:(0,ke.jsxs)("div",{className:"modal-content",children:[(0,ke.jsx)("h3",{children:"Reject Request"}),(0,ke.jsx)("textarea",{value:n,onChange:e=>i(e.target.value),placeholder:"Enter reason for rejection"}),(0,ke.jsxs)("div",{className:"modal-actions",children:[(0,ke.jsx)("button",{onClick:r,children:"Submit"}),(0,ke.jsx)("button",{onClick:s,children:"Cancel"})]})]})}):null},oI=e=>{let{showConfirmModal:t,pendingResource:n,confirmAddResource:i,cancelAddResource:r}=e;return t&&n?(0,ke.jsx)("div",{className:"modal-overlay",children:(0,ke.jsxs)("div",{className:"modal-content",children:[(0,ke.jsx)("h3",{children:"Confirm Resource Addition"}),(0,ke.jsxs)("p",{children:[(0,ke.jsx)("strong",{children:"Title:"})," ",n.title]}),(0,ke.jsxs)("p",{children:[(0,ke.jsx)("strong",{children:"Description:"})," ",n.description]}),(0,ke.jsxs)("p",{children:[(0,ke.jsx)("strong",{children:"Type:"})," ",n.type]}),(0,ke.jsxs)("p",{children:[(0,ke.jsx)("strong",{children:"Content:"})," ","pdf"===n.type?"PDF file uploaded":n.content]}),(0,ke.jsxs)("div",{className:"modal-actions",children:[(0,ke.jsx)("button",{onClick:i,className:"confirm-button",children:"Confirm"}),(0,ke.jsx)("button",{onClick:r,children:"Cancel"})]})]})}):null},aI=e=>{ie();const[n,i]=(0,t.useState)("pending-requests"),{user:r,notifications:s,showNotifications:o,toggleNotifications:a,handleLogout:l,handleProfileClick:c,handleUserProfileClick:u,error:h,editResourceId:d,setEditResourceId:f,resourceName:p,setResourceName:g,resourceDetails:m,setResourceDetails:v,resourceType:y,setResourceType:_,handleFileChange:b,file:w,contentUrl:x,setContentUrl:k,handleUrlChange:E,handleAddResource:C,handleSaveEdit:S,handleClearForm:T,handleRecommendSearch:I,recommendSearch:P,setRecommendSearch:R,recommendations:N,handleAutoFill:A,filteredResources:O,searchTerm:D,setSearchTerm:M,paginatedResources:L,handleEditResource:j,handleDeleteResource:F,pageSize:U,resourcePage:V,setResourcePage:z,endResourceIndex:B,paginatedRequests:W,users:H,handleApprove:q,handleRejectClick:K,allRequests:G,requestPage:Y,setRequestPage:Q,endRequestIndex:$,paginatedDownloads:X,downloads:J,downloadPage:Z,setDownloadPage:ee,endDownloadIndex:te,barData:ne,pieData:re,paginatedLogs:se,logPage:oe,setLogPage:ae,endLogIndex:le,logs:ce,showRejectModal:ue,rejectionReason:he,setRejectionReason:de,handleRejectSubmit:fe,closeRejectModal:pe,showConfirmModal:ge,pendingResource:me,confirmAddResource:ve,cancelAddResource:ye}=e;return e.loading?(0,ke.jsx)("div",{className:"dashboard-container",children:(0,ke.jsxs)("div",{style:{textAlign:"center",padding:"20px",fontSize:"1.5rem"},children:["Loading...",h&&(0,ke.jsx)("p",{className:"error",children:h})]})}):(0,ke.jsxs)("div",{className:"dashboard-container",children:[(0,ke.jsx)(jb,{user:r,unreadCount:(null===s||void 0===s?void 0:s.length)||0,toggleNotifications:a,onProfileClick:c,onLogout:l}),h&&(0,ke.jsx)("div",{className:"error",children:h}),(0,ke.jsx)(Gb,{activeTab:n,setActiveTab:i}),"manage-resources"===n&&(0,ke.jsxs)(ke.Fragment,{children:[(0,ke.jsx)(Yb,{editResourceId:d,resourceName:p,setResourceName:g,resourceDetails:m,setResourceDetails:v,resourceType:y,setResourceType:_,handleFileChange:b,file:w,contentUrl:x,handleUrlChange:E,handleAddResource:C,handleSaveEdit:S,handleClearForm:T,setEditResourceId:f,handleRecommendSearch:I,recommendSearch:P,setRecommendSearch:R,recommendations:N,handleAutoFill:A,filteredResources:O,searchTerm:D,setSearchTerm:M,paginatedResources:L,handleEditResource:j,handleDeleteResource:F,pageSize:U,resourcePage:V,setResourcePage:z,endResourceIndex:B}),(0,ke.jsx)(rI,{paginatedLogs:se,logPage:oe,setLogPage:ae,pageSize:U,endLogIndex:le,logs:ce})]}),"pending-requests"===n&&(0,ke.jsx)(Qb,{paginatedRequests:W,users:H,handleUserProfileClick:u,handleApprove:q,handleRejectClick:K,allRequests:G,requestPage:Y,setRequestPage:Q,pageSize:U,endRequestIndex:$}),"downloads"===n&&(0,ke.jsx)($b,{paginatedDownloads:X,users:H,handleUserProfileClick:u,downloads:J,downloadPage:Z,setDownloadPage:ee,pageSize:U,endDownloadIndex:te}),"analytics-section"===n&&(0,ke.jsx)(iI,{barData:ne,pieData:re}),(0,ke.jsx)(sI,{showRejectModal:ue,rejectionReason:he,setRejectionReason:de,handleRejectSubmit:fe,closeRejectModal:pe}),(0,ke.jsx)(oI,{showConfirmModal:ge,pendingResource:me,confirmAddResource:ve,cancelAddResource:ye})]})},lI=e=>{let{user:n}=e;const[i,r]=(0,t.useState)(null),[s,o]=(0,t.useState)(""),[a,l]=(0,t.useState)(""),[u,h]=(0,t.useState)("default-avatar.png"),[d,f]=(0,t.useState)("light"),[p,g]=(0,t.useState)(!1),[m,v]=(0,t.useState)(null),y=ie();console.log("Profile.js - Received user prop:",n),(0,t.useEffect)(()=>{console.log("Profile.js - useEffect triggered");(async()=>{try{if(!n||!n.uid)return console.error("Profile.js - No user or UID provided"),void v("No user data available");console.log("Profile.js - Fetching profile for UID:",n.uid);const e=B_(ab,"users/".concat(n.uid)),t=(await q_(e)).val();if(console.log("Profile.js - Fetched data:",t),t)r(t),o(t.name||n.email.split("@")[0]),h(t.avatar||"default-avatar.png"),f(t.theme||"light"),console.log("Profile.js - Profile data set:",t);else{const t={name:n.email.split("@")[0],email:n.email,role:n.role,createdAt:(new Date).toISOString(),avatar:"default-avatar.png",theme:"light"};console.log("Profile.js - No data found, using defaults:",t),await H_(e,t),console.log("Profile.js - Default data saved to database"),r(t),o(t.name),h(t.avatar),f(t.theme)}}catch(m){var e;console.error("Profile.js - Error fetching profile:",m.message),v("Failed to load profile: ".concat(m.message));const i={name:(null===n||void 0===n||null===(e=n.email)||void 0===e?void 0:e.split("@")[0])||"Unknown",email:(null===n||void 0===n?void 0:n.email)||"N/A",role:(null===n||void 0===n?void 0:n.role)||"user",createdAt:(new Date).toISOString(),avatar:"default-avatar.png",theme:"light"};r(i),o(i.name)}})()},[n]);return i?(console.log("Profile.js - Rendering with profileData:",i),(0,ke.jsxs)("div",{className:"dashboard-container ".concat(d),children:[(0,ke.jsx)("nav",{className:"navbar",children:(0,ke.jsxs)("ul",{children:[(0,ke.jsx)("li",{children:(0,ke.jsx)(Eb,{to:"/",children:"Home"})}),(0,ke.jsx)("li",{children:(0,ke.jsx)(Eb,{to:"admin"===n.role?"/admin-dashboard":"/dashboard",children:"Dashboard"})}),(0,ke.jsx)("li",{children:(0,ke.jsx)(Eb,{to:"/profile",children:"Profile"})}),(0,ke.jsx)("li",{children:(0,ke.jsx)(Eb,{to:"/",onClick:async()=>{try{console.log("Profile.js - Logging out"),await Bo(ob),console.log("Profile.js - Logout successful"),y("/auth")}catch(m){console.error("Profile.js - Logout error:",m.message)}},children:"Logout"})})]})}),(0,ke.jsxs)("div",{className:"profile-details",children:[(0,ke.jsx)("h1",{children:"Profile"}),m&&(0,ke.jsx)("p",{className:"error",children:m}),(0,ke.jsxs)("div",{className:"user-info",children:[(0,ke.jsxs)("div",{className:"status",children:["Status: ",(0,ke.jsx)("span",{className:"active",children:"Active"})]}),(0,ke.jsxs)("div",{className:"info-row",children:[(0,ke.jsx)("strong",{children:"Username: "}),p?(0,ke.jsxs)("div",{className:"edit-row",children:[(0,ke.jsx)("input",{type:"text",value:s,onChange:e=>o(e.target.value)}),(0,ke.jsx)("button",{onClick:async()=>{try{console.log("Profile.js - Saving username:",s),await H_(B_(ab,"users/".concat(n.uid)),c(c({},i),{},{name:s})),r(c(c({},i),{},{name:s})),g(!1),console.log("Profile.js - Username saved successfully")}catch(m){console.error("Profile.js - Error saving username:",m.message),v("Failed to save username: ".concat(m.message))}},children:"Save"}),(0,ke.jsx)("button",{onClick:()=>g(!1),children:"Cancel"})]}):(0,ke.jsxs)("div",{className:"edit-row",children:[(0,ke.jsx)("span",{children:i.name}),(0,ke.jsx)("button",{onClick:()=>g(!0),children:"Edit"})]})]}),(0,ke.jsxs)("p",{children:[(0,ke.jsx)("strong",{children:"Email:"})," ",i.email]}),(0,ke.jsxs)("div",{className:"info-row",children:[(0,ke.jsx)("strong",{children:"Password:"})," ********",(0,ke.jsxs)("div",{className:"edit-row",children:[(0,ke.jsx)("input",{type:"password",placeholder:"New Password",value:a,onChange:e=>l(e.target.value)}),(0,ke.jsx)("button",{onClick:async()=>{try{console.log("Profile.js - Updating password"),await function(e,t){return zo(Mt(e),null,t)}(ob.currentUser,a),l(""),alert("Password updated successfully!"),console.log("Profile.js - Password updated successfully")}catch(m){console.error("Profile.js - Error updating password:",m.message),alert("Failed to update password: ".concat(m.message))}},disabled:!a,children:"Update Password"})]})]}),(0,ke.jsxs)("p",{children:[(0,ke.jsx)("strong",{children:"Role:"})," ",i.role]}),(0,ke.jsxs)("p",{children:[(0,ke.jsx)("strong",{children:"Joined:"})," ",new Date(i.createdAt).toLocaleDateString()]})]}),(0,ke.jsxs)("div",{className:"customization",children:[(0,ke.jsx)("h2",{children:"Customize Profile"}),(0,ke.jsxs)("div",{className:"customization-row",children:[(0,ke.jsx)("label",{children:"Avatar:"}),(0,ke.jsx)("select",{value:u,onChange:e=>h(e.target.value),children:[{name:"Default",value:"default-avatar.png"},{name:"Cartoon Robot",value:"Cartoon Style Robot.jpg"},{name:"Gesturing Robot",value:"robot-gesturing.jpg"}].map(e=>(0,ke.jsx)("option",{value:e.value,children:e.name},e.value))}),(0,ke.jsx)("img",{src:"/avatars/".concat(u),alt:"Avatar",className:"avatar-preview"})]}),(0,ke.jsxs)("div",{className:"customization-row",children:[(0,ke.jsx)("label",{children:"Theme:"}),(0,ke.jsxs)("select",{value:d,onChange:e=>f(e.target.value),children:[(0,ke.jsx)("option",{value:"light",children:"Light"}),(0,ke.jsx)("option",{value:"dark",children:"Dark"}),(0,ke.jsx)("option",{value:"blue",children:"Blue"})]})]}),(0,ke.jsx)("button",{onClick:async()=>{try{console.log("Profile.js - Saving customization:",{avatar:u,theme:d}),await H_(B_(ab,"users/".concat(n.uid)),c(c({},i),{},{avatar:u,theme:d})),console.log("Profile.js - Customization saved successfully"),alert("Profile customization saved!")}catch(m){console.error("Profile.js - Error saving customization:",m.message),v("Failed to save customization: ".concat(m.message))}},children:"Save Customization"})]}),(0,ke.jsx)("div",{className:"back-button-container",children:(0,ke.jsx)("button",{onClick:()=>{console.log("Profile.js - Navigating back to dashboard"),y("admin"===n.role?"/admin-dashboard":"/dashboard")},className:"back-button",children:"Back to Dashboard"})})]})]})):(console.log("Profile.js - Profile data not loaded yet"),(0,ke.jsx)("div",{children:"Loading profile..."}))},cI=()=>(0,ke.jsxs)("footer",{className:"footer",children:[(0,ke.jsxs)("div",{className:"footer-logo",children:[(0,ke.jsx)("img",{src:xe,alt:"Resource Hub Logo"}),(0,ke.jsx)("p",{children:"\xa9 2025 Resource Hub. All rights reserved."})]}),(0,ke.jsxs)("div",{className:"footer-links",children:[(0,ke.jsx)("h2",{children:"Useful Links"}),(0,ke.jsxs)("ul",{children:[(0,ke.jsx)("li",{children:(0,ke.jsx)(Eb,{to:"/",className:"footer-link",children:"Home"})}),(0,ke.jsx)("li",{children:(0,ke.jsx)(Eb,{to:"#",className:"footer-link",children:"About Us"})}),(0,ke.jsx)("li",{children:(0,ke.jsx)(Eb,{to:"#",className:"footer-link",children:"Contact Us"})}),(0,ke.jsx)("li",{children:(0,ke.jsx)(Eb,{to:"#",className:"footer-link",children:"FAQ"})})]})]}),(0,ke.jsxs)("div",{className:"footer-connect",children:[(0,ke.jsx)("h2",{children:"Connect with us"}),(0,ke.jsxs)("ul",{children:[(0,ke.jsx)("li",{children:(0,ke.jsx)(Eb,{to:"/",className:"footer-link",children:"Home"})}),(0,ke.jsx)("li",{children:(0,ke.jsx)(Eb,{to:"#",className:"footer-link",children:"About Us"})}),(0,ke.jsx)("li",{children:(0,ke.jsx)(Eb,{to:"#",className:"footer-link",children:"Contact Us"})}),(0,ke.jsx)("li",{children:(0,ke.jsx)(Eb,{to:"#",className:"footer-link",children:"FAQ"})})]})]})]}),uI=e=>{let{children:t}=e;return(0,ke.jsxs)("div",{className:"layout-container",children:[(0,ke.jsx)("main",{className:"main-content",children:t}),(0,ke.jsx)(cI,{})]})},hI="/capacitiprojectbase",dI=()=>{const e=ie();return(0,ke.jsx)(Re,{onGetStarted:()=>e("".concat(hI,"/auth"))})},fI=()=>{const[e,n]=(0,t.useState)(null),[i,r]=(0,t.useState)(!0),s=ie(),o=te();(0,t.useEffect)(()=>{const e=function(e,t,n,i){return Mt(e).onAuthStateChanged(t,n,i)}(ob,async e=>{const t=(e=>e.startsWith(hI)?e.slice(20)||"/":e)(o.pathname);if(e)try{const i=B_(ab,"users/".concat(e.uid)),r=(await q_(i)).val(),o={uid:e.uid,email:e.email,name:(null===r||void 0===r?void 0:r.name)||e.email.split("@")[0],role:(null===r||void 0===r?void 0:r.role)||"user"};if(n(o),"/auth"===t){const e="admin"===o.role?"admin-dashboard":"dashboard";s("/".concat(e),{replace:!0})}}catch(i){console.error("Error fetching user data:",i),n(null)}else{n(null);"/"===t||"/auth"===t||s("".concat(hI,"/"),{replace:!0})}r(!1)});return()=>e()},[o.pathname,s]);const a=(0,t.useMemo)(()=>e?c({},e):null,[e]);if(i)return(0,ke.jsx)("div",{className:"loading",children:"Loading..."});const l=async()=>{try{await ob.signOut(),n(null),s("".concat(hI,"/"))}catch(e){console.error("Logout error:",e)}};return(0,ke.jsxs)(be,{children:[(0,ke.jsx)(ye,{path:"/",element:(0,ke.jsx)(uI,{user:a,children:(0,ke.jsx)(dI,{})})}),(0,ke.jsx)(ye,{path:"auth",element:(0,ke.jsx)(uI,{user:a,children:(0,ke.jsx)(pb,{})})}),(0,ke.jsx)(ye,{path:"dashboard",element:a?(0,ke.jsx)(uI,{user:a,handleLogout:l,children:(0,ke.jsx)(Kb,{user:a})}):(0,ke.jsx)(uI,{children:(0,ke.jsx)(dI,{})})}),(0,ke.jsx)(ye,{path:"admin-dashboard",element:"admin"===(null===a||void 0===a?void 0:a.role)?(0,ke.jsx)(uI,{user:a,handleLogout:l,children:(0,ke.jsx)(aI,{user:a,handleLogout:l,handleProfileClick:()=>{s("".concat(hI,"/profile"))}})}):(0,ke.jsx)(uI,{children:(0,ke.jsx)(dI,{})})}),(0,ke.jsx)(ye,{path:"profile",element:a?(0,ke.jsx)(uI,{user:a,handleLogout:l,children:(0,ke.jsx)(lI,{user:a})}):(0,ke.jsx)(uI,{children:(0,ke.jsx)(dI,{})})})]})},pI=()=>(0,ke.jsx)(wb,{basename:hI,children:(0,ke.jsx)(fI,{})}),gI=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:i,getFCP:r,getLCP:s,getTTFB:o}=t;n(e),i(e),r(e),s(e),o(e)})};r.createRoot(document.getElementById("root")).render((0,ke.jsx)(t.StrictMode,{children:(0,ke.jsx)(pI,{})})),gI()})()})();
//# sourceMappingURL=main.cc1d079b.js.map